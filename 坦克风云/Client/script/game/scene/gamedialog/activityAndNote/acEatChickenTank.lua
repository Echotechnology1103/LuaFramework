
acEatChickenTank={
   container,
   sprite, --坦克图片
   shellSp, --子弹
   tankBarrelSP, --坦克炮管
   tankPedrellSp, --坦克履带
   ltankDustSp, --坦克履带烟雾（左）
   rtankDustSp, --坦克履带烟雾（右）
   lightSp, --开火闪光
   tid,
   num, --剩余坦克数量
   isSpace, --坦克站位，因为此位置没有坦克
   pos,
   area,
   isWillDie,
   isG,--是否是G 红色子弹效果
   sameBuffNum={}, --同一种buff效果数据
   
   tankBarrelFrameCount={5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,5,5,5,5,5,0,0,0,0,0}, --每种坦克炮管帧动画数 20种坦克
   tankPedrellFrameCount={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, --每种坦克履带帧动画数 20种坦克
   tankDustFrameCount={10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10}, --每种坦克履带烟雾帧动画数 20种坦克
   tankFireFrameCount={7,7,7,7,7,10,10,10,10,10,9,9,9,9,9,11,11,11,11,11,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,11,11,11,11,11}, --每种坦克履开火帧动画数 20种坦克
   
   leftDownPos={ccp(112,394),ccp(258,294),ccp(413,195),ccp(69,245),ccp(209,148),ccp(358,53)}, --左下角6个坦克位置
   rightTopPos={ccp(230,694),ccp(359,603),ccp(510,512),ccp(291,821),ccp(427,738),ccp(557,658)}, --右上角6个坦克位置
   leftDownShellStartPos={ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,110),ccp(80,110),ccp(80,100),ccp(80,100),ccp(80,110),ccp(40,50),ccp(84,75),ccp(84,75),ccp(84,78),ccp(90,87),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,85),ccp(80,85),ccp(80,85),ccp(80,85),ccp(80,85),ccp(80,60),ccp(80,60),ccp(80,60),ccp(80,60),ccp(80,60),ccp(40,50),ccp(110,75),ccp(84,75),ccp(84,78),ccp(90,87)}, --每个坦克子弹相对坦克本身的坐标偏移

   
   leftDownShellEndPos={ccp(640,713),ccp(640,542),ccp(640,383),ccp(640,560),ccp(640,415),ccp(640,273)}, --左方每个坦克的子弹终点值,6个
   rightTopShellStartPos={ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,40),ccp(-80,45),ccp(-80,20),ccp(-80,30),ccp(-80,40),ccp(-10,35),ccp(-34,23),ccp(-14,27),ccp(-45,15),ccp(-50,25),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,20),ccp(-80,20),ccp(-80,20),ccp(-80,20),ccp(-80,20),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-80,-30),ccp(-10,35),ccp(-34,23),ccp(-14,27),ccp(-45,15),ccp(-50,25)},--每个坦克子弹相对坦克本身的坐标偏移

   rightTopShellEndPos={ccp(-40,560),ccp(-40,415),ccp(-40,250),ccp(-40,668),ccp(0,535),ccp(0,380)}, --右方每个坦克的子弹终点值,6个
   r_rtankDustPos={ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50),ccp(-20,-50)}, --右边坦克右侧履带烟雾位置
   r_ltankDustPos={ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35),ccp(-60,-35)}, --右边坦克左侧履带烟雾位置
   l_rtankDustPos={ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,-20),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10),ccp(70,10)}, --左边坦克右侧履带烟雾位置
   l_ltankDustPos={ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30),ccp(20,30)}, --左边坦克左侧履带烟雾位置
   tankPosition=nil,
   randMoveDirect=1, --1:前进 -1:后退
   randMove=false,
   tickIndex=0,
   randPosition,
   tankFireSp,  --坦克开火动画
   rtankFirePos={ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,30),ccp(-70,40),ccp(-70,40),ccp(-70,40),ccp(-70,40),ccp(-15,35),ccp(-25,25),ccp(-19,25),ccp(-55,15),ccp(-50,25),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,10),ccp(-70,10),ccp(-70,10),ccp(-70,10),ccp(-70,10),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20),ccp(-50,10),ccp(-70,-20),ccp(-70,-20),ccp(-70,-20)},  --右边坦克开火动画位置
   ltankFirePos={ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(60,90),ccp(80,100),ccp(80,93),ccp(80,100),ccp(80,100),ccp(40,50),ccp(65,55),ccp(65,55),ccp(80,63),ccp(85,70),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,50),ccp(80,75),ccp(80,75),ccp(80,75),ccp(80,75),ccp(80,75),ccp(80,60),ccp(80,60),ccp(80,60),ccp(80,60),ccp(80,60),ccp(40,50),ccp(90,55),ccp(65,55),ccp(80,63),ccp(85,70)},  --左边坦克开火动画位置
   needShock=false,
   shockIndex=1,
   inBattle=false,
   attackType={1,3,3,3,3,1,1,1,1,1,1,2,2,2,2,6,6,6,6,6,2,2,2,2,2,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,6,6,6,6,6},
   fireNum=0, --开火次数
   tankNumSp, --坦克数量容器
   tankNumLb, --坦克数量label
   subLife, --扣除血量
   leftNum, --剩余坦克数量
   subLifeLb, --扣除血量飘字提示
   fyBufPosWidth=nil,--减防BUF图标位置（根据是否有多重护盾来自动调换）
   tankBulletCfg={{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_2_1.png","newbullet_effect_2_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_4_1.png","newbullet_effect_4_2.png"},{"newbullet_effect_4_1.png","newbullet_effect_4_2.png"},{"newbullet_effect_5_1.png","newbullet_effect_5_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       {"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},

   },

   l_tankBulletRotate={30,30,30,30,30,30,30,30,30,30,41.77,41.77,39.68,39.68,40.3,45,45,45,45,45,30,30,30,30,30,30,30,30,30,30,53.68,53.68,53.68,53.68,53.68,30,30,30,30,30,45,45,45,45,45}, --右方向上旋转为正数,控制子弹飞行角度
   r_tankBulletRotate={-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,180,185,190,190,190,180,190,190,190,190,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,180,180,180,180,180,-150,-150,-150,-150,-150,180,190,190,190,190},
   
   l_tankBulletRotateBeAttack={210,210,210,210,210,210,210,210,210,210,175,175,175,175,175,175,175,175,175,175,210,210,210,210,210,210,210,210,210,210,190,190,190,190,190,210,210,210,210,210,175,175,175,175,175}, --控制子弹飞行角度，左边的坦克发出的子弹
   r_tankBulletRotateBeAttack={30,30,30,30,30,30,30,30,30,30,60,60,60,60,60,60,60,60,60,60,30,30,30,30,30,30,30,30,30,30,50,50,50,50,50,30,30,30,30,30,60,60,60,60,60},
   l_missleTankPC={[10031]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},[10032]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},[10033]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},[10034]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},[10035]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},[10036]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},[10082]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}}}, --导弹车6发子弹 发炮位置偏差值
   r_missleTankPC={[10031]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
   [10032]={{-40,6},{-20,3},{0,0},{-40,6},{-20,3},{0,0}},
   [10033]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
   [10034]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
   [10035]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
   [10036]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
   [10082]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}}}, --导弹车6发子弹 发炮位置偏差值
   beAttackedEffect={1,1,1,1,1,2,2,2,2,2,5,5,5,5,5,3,3,3,3,3,5,5,5,5,5,2,2,2,2,2,3,3,3,3,3,5,5,5,5,5,3,3,3,3,3}, --20种坦克打中目标的爆炸效果
   beAttackedEffectFrameCount={14,16,21,0,14,6},
   beAttackedEffectScale={1.5,1.6,1.6,1.8,1.8,1.3}
}
function acEatChickenTank:initTanksCfg()
self.leftBufPosSet={ccp(-50,-20),ccp(-50,-20),ccp(-50,-20),ccp(0,0),ccp(-50,-20),ccp(-70,00)}
self.rightBufPosSet={ccp(50,-10),ccp(50,-10),ccp(50,-10),ccp(100,30),ccp(100,30),ccp(20,-20)}
self.bufPicDataTb={}--显示坦克buf debuf 图片的 数据信息（存放sp,buf的key,排列位置）
self.bufAllTb={}--保存当前坦克所拥有的所有buf,debuf的key
self.bufShowMask=nil--显示buf图片的容器
self.bufSmallDialog=nil
self.moreBufShow={}
self.curTankNums=nil--当前坦克数量
self.tankBarrelFrameCount={   [10001]=5,  [10002]=5,  [10003]=5,  [10004]=5,  [10005]=5,  [10011]=5,  [10012]=5,  [10013]=5,  [10014]=5,  [10015]=5,  [10021]=5,  [10022]=5,  [10023]=5,  [10024]=5,  [10025]=5,  [10031]=0,  [10032]=0,  [10033]=0,  [10034]=0,  [10035]=0,  [10041]=5,  [10042]=5,  [10043]=5,  [10044]=5,  [20044]=5,  [10045]=5,  [10051]=5,  [10052]=5,  [10053]=5,  [20055]=5,  [10054]=5,  [20054]=5,  [10055]=5,  [10061]=0,  [10062]=0,  [10063]=0,  [20065]=4,  [10064]=5,  [20064]=5,  [10065]=0,  [10071]=5,  [10072]=5,  [10073]=5,  [10074]=5,  [20074]=5,  [10075]=5,  [10081]=0,  [10082]=0,  [10083]=0,  [10084]=0,  [10163]=0,  [10164]=0,  [10165]=0,  [20083]=0,  [20153]=0,  [20154]=0,  [20155]=0,  [10006]=5,  [10016]=5,  [10026]=5,  [10036]=0,  [10093]=5,  [10103]=0,  [10104]=0,  [10113]=0,  [10123]=0,  [10007]=5,  [10017]=5,  [10027]=5,  [10037]=0,  [10008]=5,  [10018]=5,  [10028]=5,  [10038]=0,  [10094]=4,  [10095]=4,  [20094]=4,  [10133]=4,  [10134]=4,  [10135]=4,  [10114]=4,  [20115]=4,  [20114]=4,  [10124]=4,  [20125]=4,  [20124]=4,  [10144]=4,  [10145]=4,  [10143]=4,  [99999]=0,  [99998]=0}   --每种坦克炮管帧动画数20种坦克
self.tankPedrellFrameCount={     [10001]=0,  [10002]=0,  [10003]=0,  [10004]=0,  [10005]=0,  [10011]=0,  [10012]=0,  [10013]=0,  [10014]=0,  [10015]=0,  [10021]=0,  [10022]=0,  [10023]=0,   [10024]=0,  [10025]=0,  [10031]=0,  [10032]=0,  [10033]=0,  [10034]=0,  [10035]=0,  [10041]=0,  [10042]=0,  [10043]=0,  [10044]=0,  [20044]=0,  [10045]=0,  [10051]=0,  [10052]=0,   [10053]=0,  [20055]=0,  [10054]=0,  [20054]=0,  [10055]=0,  [10061]=0,  [10062]=0,  [10063]=0,  [20065]=0,  [10064]=0,  [20064]=0,  [10065]=0,  [10071]=0,  [10072]=0,  [10073]=0,  [10074]=0,   [10075]=0,  [20074]=0,  [10081]=0,  [10082]=0,  [10083]=0,  [10084]=0,  [10163]=0,  [10164]=0,  [10165]=0,  [20083]=0,  [20153]=0,  [20154]=0,  [20155]=0,  [10006]=0,  [10016]=0,  [10026]=0,  [10036]=0,  [10093]=0,   [10103]=0,  [10104]=0,  [10113]=0,  [10123]=0,  [10007]=0,  [10017]=0,  [10027]=0,  [10037]=0,  [10008]=0,  [10018]=0,  [10028]=0,  [10038]=0,  [10094]=0,  [10095]=0,  [20094]=0,  [10133]=0,  [10134]=0,  [10135]=0,  [10114]=0,   [20115]=0,  [20114]=0,  [10124]=0,  [20125]=0,  [20124]=0,  [10144]=0,  [10145]=0,  [10143]=0,  [99999]=3,  [99998]=3}   --每种坦克履带帧动画数20种坦克
self.tankDustFrameCount={ [10001]=10, [10002]=10, [10003]=10, [10004]=10, [10005]=10, [10011]=10, [10012]=10, [10013]=10, [10014]=10, [10015]=10, [10021]=10, [10022]=10, [10023]=10, [10024]=10, [10025]=10, [10031]=10, [10032]=10, [10033]=10, [10034]=10, [10035]=10, [10041]=10, [10042]=10, [10043]=10, [10044]=10, [20044]=10, [10045]=10, [10051]=10, [10052]=10, [10053]=10, [20055]=10, [10054]=10, [20054]=10, [10055]=10, [10061]=10, [10062]=10, [10063]=10, [20065]=10, [10064]=10, [20064]=10, [10065]=10, [10071]=10, [10072]=10, [10073]=10, [10074]=10, [20074]=10, [10075]=10, [10081]=10, [10082]=10, [10083]=10, [10084]=10, [10163]=10, [10164]=10, [10165]=10, [20083]=10, [20153]=10, [20154]=10, [20155]=10, [10006]=10, [10016]=10, [10026]=10, [10036]=10, [10093]=10, [10103]=10, [10104]=10, [10113]=10, [10123]=10, [10007]=10, [10017]=10, [10027]=10, [10037]=10, [10008]=10, [10018]=10, [10028]=10, [10038]=10, [10094]=10, [10095]=10, [20094]=10, [10133]=10, [10134]=10, [10135]=10, [10114]=10, [20115]=10, [20114]=10, [10124]=10, [20125]=10, [20124]=10, [10144]=10, [10145]=10, [10143]=10, [99999]=10, [99998]=10}   --每种坦克履带烟雾帧动画数20种坦克
self.tankFireFrameCount={ [10001]=7,  [10002]=7,  [10003]=7,  [10004]=7,  [10005]=7,  [10011]=10, [10012]=10, [10013]=10, [10014]=10, [10015]=10, [10021]=9,  [10022]=9,  [10023]=9,  [10024]=9,  [10025]=9,  [10031]=11, [10032]=11, [10033]=11, [10034]=11, [10035]=11, [10041]=7,  [10042]=7,  [10043]=7,  [10044]=7,  [20044]=7,  [10045]=7,  [10051]=7,  [10052]=7,  [10053]=7,  [20055]=7,  [10054]=7,  [20054]=7,  [10055]=7,  [10061]=7,  [10062]=7,  [10063]=7,  [20065]=7,  [10064]=7,  [20064]=7,  [10065]=7,  [10071]=7,  [10072]=7,  [10073]=7,  [10074]=7,  [20074]=7,  [10075]=7,  [10081]=11, [10082]=11, [10083]=11, [10084]=11, [10163]=11, [10164]=11, [10165]=11, [20083]=11, [20153]=11, [20154]=11, [20155]=11, [10006]=7,  [10016]=10, [10026]=9,  [10036]=11, [10093]=7,  [10094]=7,  [10095]=7,  [20094]=7,  [10103]=10, [10104]=10, [10113]=10, [10133]=10, [10134]=10, [10135]=10, [10114]=10, [20115]=10, [20114]=10, [10123]=7,  [10124]=7,  [20125]=7,  [20124]=7,  [10007]=7,  [10017]=10, [10027]=9,  [10037]=11, [10008]=7,  [10018]=10, [10028]=9,  [10038]=11, [10144]=10, [10145]=10, [10143]=10, [99999]=13, [99998]=13}   --每种坦克履开火帧动画数20种坦克
self.attackType={   [10001]=1, [10002]=3, [10003]=3, [10004]=3, [10005]=3, [10011]=1,  [10012]=1,  [10013]=1,  [10014]=1,  [10015]=1,  [10021]=1,  [10022]=2,  [10023]=2,  [10024]=2,  [10025]=2,   [10031]=6,  [10032]=6,  [10033]=6,  [10034]=6,  [10035]=6,  [10041]=2,  [10042]=2,  [10043]=2,  [10044]=2,  [20044]=2,  [10045]=2,  [10051]=1,  [10052]=1,  [10053]=1,  [20055]=1,   [10054]=1,  [20054]=1,  [10055]=1,  [10061]=2,  [10062]=2,  [10063]=2,  [20065]=4,  [10064]=2,  [20064]=2,  [10065]=2,  [10071]=3,  [10072]=3,  [10073]=3,  [10074]=3,  [20074]=3,   [10075]=3,  [10081]=6,  [10082]=6,  [10083]=6,  [10084]=6,  [10163]=6,  [10164]=6, [10165]=6, [20083]=6,  [20153]=6,  [20154]=6,  [20155]=6,  [10006]=3,  [10016]=1,  [10026]=2, [10036]=6, [10093]=3, [10094]=3, [10095]=3, [20094]=3, [10103]=1,  [10104]=1,  [10113]=1,  [10133]=1,  [10134]=1,  [10135]=1,  [10114]=1,  [20115]=1,  [20114]=1,  [10123]=3,  [10124]=3,  [20125]=3,  [20124]=3,   [10007]=3,  [10017]=1,  [10027]=2,  [10037]=6,  [10008]=3,  [10018]=1,  [10028]=2,  [10038]=6,  [10144]=1,  [10145]=1,  [10143]=1,  [99999]=6,  [99998]=6}
self.l_tankBulletRotate={     [10001]=30,    [10002]=30,    [10003]=30,    [10004]=30,    [10005]=30,    [10011]=30,    [10012]=30,    [10013]=30,    [10014]=30,    [10015]=30,    [10021]=41.77,[10022]=41.77,[10023]=39.68, [10024]=39.68, [10025]=40.3,  [10031]=45,    [10032]=45,    [10033]=45,    [10034]=45,    [10035]=45,    [10041]=30,    [10042]=30,    [10043]=30,   [10044]=30,   [20044]=30,    [10045]=30,    [10051]=30,    [10052]=30,    [10053]=30,    [20055]=30,    [10054]=30,    [20054]=30,    [10055]=30,    [10061]=53.68, [10062]=53.68,[10063]=53.68,[20065]=53.68, [10064]=53.68, [20064]=53.68, [10065]=53.68, [10071]=30,    [10072]=30,    [10073]=30,    [10074]=30,    [20074]=30,    [10075]=30,    [10081]=45,   [10082]=45,   [10083]=45,    [10084]=45,    [10163]=45, [10164]=45, [10165]=45, [20083]=45,    [20153]=45,    [20154]=45,    [20155]=45,    [10006]=30,    [10016]=30,    [10026]=40.3,  [10036]=45,    [10093]=30,   [10094]=30,   [10095]=30,    [20094]=30,    [10103]=30,    [10104]=30,    [10113]=30,    [10133]=30,    [10134]=30,    [10135]=30,    [10114]=30,    [20115]=30,    [20114]=30,   [10123]=30,   [10124]=30,    [20125]=30,    [20124]=30,    [10007]=30,    [10017]=30,    [10027]=40.3,  [10037]=45,    [10008]=30,    [10018]=30,    [10028]=40.3,  [10038]=45,    [10144]=-30,   [10145]=-30,   [10143]=-30,   [99999]=30,   [99998]=30}   --右方向上旋转为正数 控制子弹飞行角度
self.r_tankBulletRotate={ [10001]=-150,  [10002]=-150,  [10003]=-150,  [10004]=-150,  [10005]=-150,  [10011]=-150,  [10012]=-150,  [10013]=-150,  [10014]=-150,  [10015]=-150,  [10021]=180,   [10022]=185,    [10023]=190,   [10024]=190,   [10025]=190,   [10031]=180,   [10032]=190,   [10033]=190,   [10034]=190,   [10035]=190,   [10041]=-150,  [10042]=-150,  [10043]=-150,  [10044]=-150,   [20044]=-150,  [10045]=-150,  [10051]=-150,  [10052]=-150,  [10053]=-150,  [20055]=-150,  [10054]=-150,  [20054]=-150,  [10055]=-150,  [10061]=180,   [10062]=180,   [10063]=180,    [20065]=180,   [10064]=180,   [20064]=180,   [10065]=180,   [10071]=-150,  [10072]=-150,  [10073]=-150,  [10074]=-150,  [20074]=-150,  [10075]=-150,  [10081]=180,   [10082]=190,    [10083]=190,   [10084]=190,   [10163]=190, [10164]=190, [10165]=190, [20083]=190,   [20153]=190,   [20154]=190,   [20155]=190,   [10006]=-150,  [10016]=-150,  [10026]=190,   [10036]=190,   [10093]=-150,  [10094]=-150,   [10095]=-150,  [20094]=-150,  [10103]=-150,  [10104]=-150,  [10113]=-150,  [10133]=-150,  [10134]=-150,  [10135]=-150,  [10114]=-150,  [20115]=-150,  [20114]=-150,  [10123]=-150,   [10124]=-150,  [20125]=-150,  [20124]=-150,  [10007]=-150,  [10017]=-150,  [10027]=190,   [10037]=190,   [10008]=-150,  [10018]=-150,  [10028]=190,   [10038]=190,   [10144]=-30,   [10145]=-30,   [10143]=-30,   [99999]=-150,  [99998]=-150}
self.l_tankBulletRotateBeAttack={    [10001]=210,   [10002]=210,   [10003]=210,   [10004]=210,   [10005]=210,   [10011]=210,   [10012]=210,   [10013]=210,   [10014]=210,   [10015]=210,   [10021]=175,   [10022]=175,   [10023]=175,   [10024]=175,   [10025]=175,   [10031]=175,   [10032]=175,   [10033]=175,   [10034]=175,   [10035]=175,   [10041]=210,   [10042]=210,   [10043]=210,   [10044]=210,   [20044]=210,   [10045]=210,   [10051]=210,   [10052]=210,   [10053]=210,   [20055]=210,   [10054]=210,   [20054]=210,   [10055]=210,   [10061]=190,   [10062]=190,   [10063]=190,   [20065]=190,   [10064]=190,   [10065]=190,   [10071]=210,   [10072]=210,   [10073]=210,   [10074]=210,   [20074]=210,   [10075]=210,   [10081]=175,   [10082]=175,   [10083]=175,   [10084]=175,   [10163]=175,   [10164]=175,   [10165]=175,   [20083]=175,   [20153]=175,   [20154]=175,   [20155]=175,   [10006]=210,   [10016]=210,   [10026]=175,   [10036]=175,   [10093]=210,   [10094]=210,   [10095]=210,   [20094]=210,   [10103]=210,   [10104]=210,   [10113]=210,   [10133]=210,   [10134]=210,   [10135]=210,   [10114]=210,   [20115]=210,   [20114]=210,   [10123]=210,   [10124]=210,   [20125]=210,   [20124]=210,   [10007]=210,   [10017]=210,   [10027]=175,   [10037]=175,   [10008]=210,   [10018]=210,   [10028]=175,   [10038]=175,   [10144]=210,   [10145]=210,   [10143]=210,   [99999]=210,   [99998]=210}   --控制子弹飞行角度,左边的坦克发出的子弹
self.r_tankBulletRotateBeAttack={     [10001]=30, [10002]=30, [10003]=30, [10004]=30, [10005]=30, [10011]=30, [10012]=30, [10013]=30, [10014]=30, [10015]=30, [10021]=60, [10022]=60, [10023]=60, [10024]=60, [10025]=60, [10031]=60, [10032]=60, [10033]=60, [10034]=60, [10035]=60, [10041]=30, [10042]=30, [10043]=30, [10044]=30, [20044]=30, [10045]=30, [10051]=30, [10052]=30, [10053]=30, [20055]=30, [10054]=30, [20054]=30, [10055]=30, [10061]=50, [10062]=50, [10063]=50, [20065]=50, [10064]=50, [20064]=50, [10065]=50, [10071]=30, [10072]=30, [10073]=30, [10074]=30, [20074]=30, [10075]=30, [10081]=60, [10082]=60, [10083]=60, [10084]=60, [10163]=60, [10164]=60, [10165]=60, [20083]=60, [20153]=60, [20154]=60, [20155]=60, [10006]=30, [10016]=30, [10026]=60, [10036]=60, [10093]=30, [10094]=30, [10095]=30, [20094]=30, [10103]=30, [10104]=30, [10113]=30, [10133]=30, [10134]=30, [10135]=30, [10114]=30, [20115]=30, [20114]=30, [10123]=30, [10124]=30, [20125]=30, [20124]=30, [10007]=30, [10017]=30, [10027]=60, [10037]=60, [10008]=30, [10018]=30, [10028]=60, [10038]=60, [10144]=30, [10145]=30, [10143]=30, [99999]=30, [99998]=30}
self.beAttackedEffect={   [10001]=1,  [10002]=1,  [10003]=1,  [10004]=1,  [10005]=1,  [10011]=2,  [10012]=2,  [10013]=2,  [10014]=2,  [10015]=2,  [10021]=5,  [10022]=5,  [10023]=5,  [10024]=5,  [10025]=5,  [10031]=3,  [10032]=3,  [10033]=3,  [10034]=3,  [10035]=3,  [10041]=5,  [10042]=5,  [10043]=5,  [10044]=5,  [20044]=5,  [10045]=5,  [10051]=2,  [10052]=2,  [10053]=2,  [20055]=2,  [10054]=2,  [20054]=2,  [10055]=2,  [10061]=3,  [10062]=3,  [10063]=3,  [20065]=3,  [10064]=3,  [20064]=3,  [10065]=3,  [10071]=5,  [10072]=5,  [10073]=5,  [10074]=5,  [20074]=5,  [10075]=5,  [10081]=3,  [10082]=3,  [10083]=3,  [10084]=3,  [10163]=3,  [10164]=3,  [10165]=3,  [20083]=3,  [20153]=3,  [20154]=3,  [20155]=3,  [10006]=1,  [10016]=2,  [10026]=5,  [10036]=3,  [10093]=1,  [10094]=1,  [10095]=1,  [20094]=1,  [10103]=2,  [10104]=2,  [10113]=2,  [10133]=2,  [10134]=2,  [10135]=2,  [10114]=2,  [20115]=2,  [20114]=2,  [10123]=1,  [10124]=1,  [20124]=1,  [20125]=1,  [10007]=1,  [10017]=2,  [10027]=5,  [10037]=3,  [10008]=1,  [10018]=2,  [10028]=5,  [10038]=3,  [10144]=6,  [10145]=6,  [10143]=6,  [99999]=3,  [99998]=3,}   --20种坦克打中目标的爆炸效果

self.r_rtankDustPos={      [10001]=ccp(-20,-50),  [10002]=ccp(-20,-50),  [10003]=ccp(-20,-50),  [10004]=ccp(-20,-50),  [10005]=ccp(-20,-50),  [10011]=ccp(-20,-50),  [10012]=ccp(-20,-50),[10013]=ccp(-20,-50), [10014]=ccp(-20,-50),  [10015]=ccp(-20,-50),  [10021]=ccp(-20,-50),  [10022]=ccp(-20,-50),  [10023]=ccp(-20,-50),  [10024]=ccp(-20,-50),  [10025]=ccp(-20,-50),[10031]=ccp(-20,-50), [10032]=ccp(-20,-50),  [10033]=ccp(-20,-50),  [10034]=ccp(-20,-50),  [10035]=ccp(-20,-50),  [10041]=ccp(-20,-50),  [10042]=ccp(-20,-50),  [10043]=ccp(-20,-50),[10044]=ccp(-20,-50), [20044]=ccp(-20,-50),  [10045]=ccp(-20,-50),  [10051]=ccp(-20,-50),  [10052]=ccp(-20,-50),  [10053]=ccp(-20,-50),  [20055]=ccp(-20,-50),  [10054]=ccp(-20,-50),[20054]=ccp(-20,-50), [10055]=ccp(-20,-50),  [10061]=ccp(-20,-50),  [10062]=ccp(-20,-50),  [10063]=ccp(-20,-50),  [20065]=ccp(-20,-50),  [10064]=ccp(-20,-50),  [20064]=ccp(-20,-50),[10065]=ccp(-20,-50), [10071]=ccp(-20,-50),  [10072]=ccp(-20,-50),  [10073]=ccp(-20,-50),  [10074]=ccp(-20,-50),  [20074]=ccp(-20,-50),  [10075]=ccp(-20,-50),  [10081]=ccp(-20,-50),[10082]=ccp(-20,-50), [10083]=ccp(-20,-50),  [10084]=ccp(-20,-50),  [10163]=ccp(-20,-50),  [10164]=ccp(-20,-50),  [10165]=ccp(-20,-50),  [20083]=ccp(-20,-50),  [20153]=ccp(-20,-50),  [20154]=ccp(-20,-50),  [20155]=ccp(-20,-50),  [10006]=ccp(-20,-50),[10016]=ccp(-20,-50), [10026]=ccp(-20,-50),  [10036]=ccp(-20,-50),  [10093]=ccp(-20,-50),  [10094]=ccp(-20,-50),  [10095]=ccp(-20,-50),  [20094]=ccp(-20,-50),  [10103]=ccp(-20,-50),[10104]=ccp(-20,-50), [10113]=ccp(-20,-50),  [10133]=ccp(-20,-50),  [10134]=ccp(-20,-50),  [10135]=ccp(-20,-50),  [10114]=ccp(-20,-50),  [20115]=ccp(-20,-50),  [20114]=ccp(-20,-50),[10123]=ccp(-20,-50), [10124]=ccp(-20,-50),  [20125]=ccp(-20,-50),  [20124]=ccp(-20,-50),  [10007]=ccp(-20,-50),  [10017]=ccp(-20,-50),  [10027]=ccp(-20,-50),  [10037]=ccp(-20,-50),[10008]=ccp(-20,-50),  [10018]=ccp(-20,-50),  [10028]=ccp(-20,-50),  [10038]=ccp(-20,-50),[10144]=ccp(-20,-50), [10145]=ccp(-20,-50),  [10143]=ccp(-20,-50),  [99999]=ccp(-20,-50),  [99998]=ccp(-20,-50),}--右边坦克右侧履带烟雾位置
self.r_ltankDustPos={  [10001]=ccp(-60,-35),    [10002]=ccp(-60,-35),    [10003]=ccp(-60,-35),    [10004]=ccp(-60,-35),    [10005]=ccp(-60,-35),    [10011]=ccp(-60,-35),         [10012]=ccp(-60,-35),     [10013]=ccp(-60,-35),    [10014]=ccp(-60,-35),    [10015]=ccp(-60,-35),    [10021]=ccp(-60,-35),    [10022]=ccp(-60,-35),    [10023]=ccp(-60,-35),         [10024]=ccp(-60,-35),     [10025]=ccp(-60,-35),    [10031]=ccp(-60,-35),    [10032]=ccp(-60,-35),    [10033]=ccp(-60,-35),    [10034]=ccp(-60,-35),    [10035]=ccp(-60,-35),         [10041]=ccp(-60,-35),     [10042]=ccp(-60,-35),    [10043]=ccp(-60,-35),    [10044]=ccp(-60,-35),    [20044]=ccp(-60,-35),    [10045]=ccp(-60,-35),    [10051]=ccp(-60,-35),         [10052]=ccp(-60,-35),     [10053]=ccp(-60,-35),    [20055]=ccp(-60,-35),    [10054]=ccp(-60,-35),    [20054]=ccp(-60,-35),    [10055]=ccp(-60,-35),    [10061]=ccp(-60,-35),         [10062]=ccp(-60,-35),     [10063]=ccp(-60,-35),    [20065]=ccp(-60,-35),    [10064]=ccp(-60,-35),    [20064]=ccp(-60,-35),    [10065]=ccp(-60,-35),    [10071]=ccp(-60,-35),         [10072]=ccp(-60,-35),     [10073]=ccp(-60,-35),    [10074]=ccp(-60,-35),    [20074]=ccp(-60,-35),    [10075]=ccp(-60,-35),    [10081]=ccp(-60,-35),    [10082]=ccp(-60,-35),         [10083]=ccp(-60,-35),     [10084]=ccp(-60,-35),    [10163]=ccp(-60,-35),    [10164]=ccp(-60,-35),    [10165]=ccp(-60,-35),    [20083]=ccp(-60,-35),    [20153]=ccp(-60,-35),    [20154]=ccp(-60,-35),    [20155]=ccp(-60,-35),    [10006]=ccp(-60,-35),    [10016]=ccp(-60,-35),         [10026]=ccp(-60,-35),     [10036]=ccp(-60,-35),    [10093]=ccp(-60,-35),    [10094]=ccp(-60,-35),    [10095]=ccp(-60,-35),    [20094]=ccp(-60,-35),    [10103]=ccp(-60,-35),         [10104]=ccp(-60,-35),     [10113]=ccp(-60,-35),    [10133]=ccp(-60,-35),    [10134]=ccp(-60,-35),    [10135]=ccp(-60,-35),    [10114]=ccp(-60,-35),    [20115]=ccp(-60,-35),         [20114]=ccp(-60,-35),     [10123]=ccp(-60,-35),    [10124]=ccp(-60,-35),    [20125]=ccp(-60,-35),    [20124]=ccp(-60,-35),    [10007]=ccp(-60,-35),    [10017]=ccp(-60,-35),         [10027]=ccp(-60,-35),     [10037]=ccp(-60,-35),    [10008]=ccp(-60,-35),    [10018]=ccp(-60,-35),         [10028]=ccp(-60,-35),     [10038]=ccp(-60,-35),    [10144]=ccp(-60,-35),    [10145]=ccp(-60,-35),    [10143]=ccp(-60,-35),    [99999]=ccp(-60,-35),    [99998]=ccp(-60,-35)}--右边坦克左侧履带烟雾位置
self.l_rtankDustPos={   [10001]=ccp(70,10),   [10002]=ccp(70,10),   [10003]=ccp(70,10),   [10004]=ccp(70,10),   [10005]=ccp(70,10),   [10011]=ccp(70,10),   [10012]=ccp(70,10),   [10013]=ccp(70,10),        [10014]=ccp(70,10),   [10015]=ccp(70,10),   [10021]=ccp(70,10),   [10022]=ccp(70,10),   [10023]=ccp(70,10),   [10024]=ccp(70,10),   [10025]=ccp(70,10),   [10031]=ccp(70,10),        [10032]=ccp(70,10),   [10033]=ccp(70,10),   [10034]=ccp(70,10),   [10035]=ccp(70,-20),  [10041]=ccp(70,10),   [10042]=ccp(70,10),   [10043]=ccp(70,10),   [10044]=ccp(70,10),        [20044]=ccp(70,10),   [10045]=ccp(70,10),   [10051]=ccp(70,10),   [10052]=ccp(70,10),   [10053]=ccp(70,10),   [20055]=ccp(70,10),   [10054]=ccp(70,10),   [20054]=ccp(70,10),        [10055]=ccp(70,10),   [10061]=ccp(70,10),   [10062]=ccp(70,10),   [10063]=ccp(70,10),   [20065]=ccp(70,10),   [10064]=ccp(70,10),   [20064]=ccp(70,10),   [10065]=ccp(70,10),        [10071]=ccp(70,10),   [10072]=ccp(70,10),   [10073]=ccp(70,10),   [10074]=ccp(70,10),   [20074]=ccp(70,10),   [10075]=ccp(70,10),   [10081]=ccp(70,10),   [10082]=ccp(70,10),        [10083]=ccp(70,10),   [10084]=ccp(70,10),   [10163]=ccp(70,10),   [10164]=ccp(70,10),   [10165]=ccp(70,10),   [20083]=ccp(70,10),   [20153]=ccp(70,10),   [20154]=ccp(70,10),   [20155]=ccp(70,10),   [10006]=ccp(70,10),   [10016]=ccp(70,10),        [10026]=ccp(70,10),   [10036]=ccp(70,-20),  [10093]=ccp(70,10),   [10094]=ccp(70,10),   [10095]=ccp(70,10),   [20094]=ccp(70,10),   [10103]=ccp(70,10),   [10104]=ccp(70,10),        [10113]=ccp(70,10),   [10133]=ccp(70,10),   [10134]=ccp(70,10),   [10135]=ccp(70,10),   [10114]=ccp(70,10),   [20115]=ccp(70,10),   [20114]=ccp(70,10),   [10123]=ccp(70,10),        [10124]=ccp(70,10),   [20125]=ccp(70,10),   [20124]=ccp(70,10),   [10007]=ccp(70,10),   [10017]=ccp(70,10),   [10027]=ccp(70,10),   [10037]=ccp(70,-20),  [10008]=ccp(70,10),   [10018]=ccp(70,10),   [10028]=ccp(70,10),   [10038]=ccp(70,-20),  [10144]=ccp(70,10),        [10145]=ccp(70,10),   [10143]=ccp(70,10),   [99999]=ccp(70,-20),  [99998]=ccp(70,-20)}--左边坦克右侧履带烟雾位置
self.l_ltankDustPos={   [10001]=ccp(20,30),   [10002]=ccp(20,30),   [10003]=ccp(20,30),   [10004]=ccp(20,30),   [10005]=ccp(20,30),   [10011]=ccp(20,30),   [10012]=ccp(20,30),   [10013]=ccp(20,30),        [10014]=ccp(20,30),   [10015]=ccp(20,30),   [10021]=ccp(20,30),   [10022]=ccp(20,30),   [10023]=ccp(20,30),   [10024]=ccp(20,30),   [10025]=ccp(20,30),   [10031]=ccp(20,30),        [10032]=ccp(20,30),   [10033]=ccp(20,30),   [10034]=ccp(20,30),   [10035]=ccp(20,30),   [10041]=ccp(20,30),   [10042]=ccp(20,30),   [10043]=ccp(20,30),   [10044]=ccp(20,30),        [20044]=ccp(20,30),   [10045]=ccp(20,30),   [10051]=ccp(20,30),   [10052]=ccp(20,30),   [10053]=ccp(20,30),   [20055]=ccp(20,30),   [10054]=ccp(20,30),   [20054]=ccp(20,30),        [10055]=ccp(20,30),   [10061]=ccp(20,30),   [10062]=ccp(20,30),   [10063]=ccp(20,30),   [20065]=ccp(20,30),   [10064]=ccp(20,30),   [20064]=ccp(20,30),   [10065]=ccp(20,30),        [10071]=ccp(20,30),   [10072]=ccp(20,30),   [10073]=ccp(20,30),   [10074]=ccp(20,30),   [20074]=ccp(20,30),   [10075]=ccp(20,30),   [10081]=ccp(20,30),   [10082]=ccp(20,30),        [10083]=ccp(20,30),   [10084]=ccp(20,30),   [10163]=ccp(20,30),   [10164]=ccp(20,30),   [10165]=ccp(20,30),   [20083]=ccp(20,30),   [20153]=ccp(20,30),   [20154]=ccp(20,30),   [20155]=ccp(20,30),   [10006]=ccp(70,10),   [10016]=ccp(70,10),        [10026]=ccp(20,30),   [10036]=ccp(20,30),   [10093]=ccp(20,30),   [10094]=ccp(20,30),   [10095]=ccp(20,30),   [20094]=ccp(20,30),   [10103]=ccp(20,30),   [10104]=ccp(20,30),        [10113]=ccp(70,10),   [10133]=ccp(70,10),   [10134]=ccp(70,10),   [10135]=ccp(70,10),   [10114]=ccp(70,10),   [20115]=ccp(70,10),   [20114]=ccp(70,10),   [10123]=ccp(70,10),        [10124]=ccp(70,10),   [20125]=ccp(70,10),   [20124]=ccp(70,10),   [10007]=ccp(70,10),   [10017]=ccp(70,10),   [10027]=ccp(20,30),   [10037]=ccp(20,30),   [10008]=ccp(70,10),   [10018]=ccp(70,10),   [10028]=ccp(20,30),   [10038]=ccp(20,30),   [10144]=ccp(70,10),        [10145]=ccp(70,10),   [10143]=ccp(70,10),   [99999]=ccp(20,30),   [99998]=ccp(20,30)}--左边坦克左侧履带烟雾位置
self.rtankFirePos={     [10001]=ccp(-70,-20), [10002]=ccp(-70,-20), [10003]=ccp(-70,-20), [10004]=ccp(-70,-20), [10005]=ccp(-70,-20), [10011]=ccp(-70,-20), [10012]=ccp(-70,-20), [10013]=ccp(-70,-20),   [10014]=ccp(-70,-20),   [10015]=ccp(-70,-20),  [10021]=ccp(-70,30),  [10022]=ccp(-70,40),  [10023]=ccp(-80,10),  [10024]=ccp(-70,40),  [10025]=ccp(-70,40),  [10031]=ccp(-15,35),    [10032]=ccp(-25,25),    [10033]=ccp(-19,25),   [10034]=ccp(-55,15),  [10035]=ccp(-50,25),  [10041]=ccp(-70,-20), [10042]=ccp(-70,-20), [10043]=ccp(-70,-20), [10044]=ccp(-70,-15),   [20044]=ccp(-70,-20),   [10045]=ccp(-70,-20),  [10051]=ccp(-70,-20), [10052]=ccp(-70,-20), [10053]=ccp(-70,-20), [20055]=ccp(-100,-35), [10054]=ccp(-70,-20), [20054]=ccp(-70,-20),   [10055]=ccp(-70,-20),   [10061]=ccp(-70,10),   [10062]=ccp(-70,10),  [10063]=ccp(-70,10),  [20065]=ccp(-70,10),  [10064]=ccp(-70,10),  [20064]=ccp(-70,10),  [10065]=ccp(-70,10),  [10071]=ccp(-70,-20),   [10072]=ccp(-70,-20),   [10073]=ccp(-70,-20),  [10074]=ccp(-70,-10), [20074]=ccp(-70,-10), [10075]=ccp(-85,-25), [10081]=ccp(-70,-20), [10082]=ccp(-50,10),  [10083]=ccp(-45,-5),    [10084]=ccp(-50,20),    [10163]=ccp(-20,25),   [10164]=ccp(-25,30),  [10165]=ccp(-25,30),  [20083]=ccp(-70,-20),  [20153]=ccp(-30,27),  [20154]=ccp(-30,27),  [20155]=ccp(-30,27),  [10006]=ccp(-70,-20), [10016]=ccp(-70,-20), [10026]=ccp(-70,25),    [10036]=ccp(-50,25),    [10093]=ccp(-70,-20),  [10094]=ccp(-70,-15), [10095]=ccp(-70,-20), [20094]=ccp(-70,-20), [10103]=ccp(-70,-5),  [10104]=ccp(-70,-20), [10113]=ccp(-70,-20),   [10133]=ccp(-70,-20),   [10134]=ccp(-80,-30),  [10135]=ccp(-110,-35), [10114]=ccp(-70,-20), [20115]=ccp(-95,-25), [20114]=ccp(-70,-20), [10123]=ccp(-70,-20), [10124]=ccp(-70,-10),   [20125]=ccp(-75,-10),   [20124]=ccp(-70,-10),  [10007]=ccp(-75,-10), [10017]=ccp(-95,-25), [10027]=ccp(-70,45),  [10037]=ccp(-50,15),  [10008]=ccp(-75,-10), [10018]=ccp(-100,-30), [10028]=ccp(-70,0),  [10038]=ccp(-50,5),  [10144]=ccp(-70,-20), [10145]=ccp(-70,-20),   [10143]=ccp(-70,-20),   [99999]=ccp(-50,25),   [99998]=ccp(-50,25)}--右边坦克开火动画位置
self.ltankFirePos={    [10001]=ccp(80,50),   [10002]=ccp(80,50),   [10003]=ccp(80,50),   [10004]=ccp(80,50),   [10005]=ccp(80,55),   [10011]=ccp(80,50),   [10012]=ccp(80,50),   [10013]=ccp(80,50),        [10014]=ccp(80,55),   [10015]=ccp(90,65),   [10021]=ccp(60,90),   [10022]=ccp(80,100),  [10023]=ccp(80,93),   [10024]=ccp(80,85),   [10025]=ccp(80,100),  [10031]=ccp(40,50),        [10032]=ccp(65,55),   [10033]=ccp(65,55),   [10034]=ccp(75,75),   [10035]=ccp(80,75),   [10041]=ccp(80,50),   [10042]=ccp(80,50),   [10043]=ccp(80,50),   [10044]=ccp(80,55),        [20044]=ccp(80,50),   [10045]=ccp(80,50),   [10051]=ccp(80,50),   [10052]=ccp(80,50),   [10053]=ccp(90,65),   [20055]=ccp(100,70),   [10054]=ccp(90,65),   [20054]=ccp(80,50),        [10055]=ccp(80,50),   [10061]=ccp(80,75),   [10062]=ccp(80,75),   [10063]=ccp(65,55),   [20065]=ccp(60,70),   [10064]=ccp(75,75),   [20064]=ccp(80,75),   [10065]=ccp(80,75),    [10071]=ccp(80,60),       [10072]=ccp(80,60),   [10073]=ccp(80,55),   [10074]=ccp(80,60),   [20074]=ccp(80,60),   [10075]=ccp(90,60),   [10081]=ccp(40,50),   [10082]=ccp(85,65),   [10083]=ccp(90,80),        [10084]=ccp(100,85),  [10163]=ccp(55,65),  [10164]=ccp(65,75),  [10165]=ccp(75,90),  [20083]=ccp(65,55),   [20153]=ccp(50,65),   [20154]=ccp(65,65),   [20155]=ccp(70,80),   [10006]=ccp(80,50),   [10016]=ccp(90,65),   [10026]=ccp(80,100),       [10036]=ccp(75,90),   [10093]=ccp(100,65),  [10094]=ccp(80,50),   [10095]=ccp(95,60),   [20094]=ccp(80,50),   [10103]=ccp(80,70),   [10104]=ccp(80,75),   [10113]=ccp(90,65),        [10133]=ccp(125,80),  [10134]=ccp(125,80),  [10135]=ccp(125,90),  [10114]=ccp(100,70),  [20115]=ccp(90,70),   [20114]=ccp(80,50),   [10123]=ccp(80,50),   [10124]=ccp(95,60),        [20125]=ccp(95,65),   [20124]=ccp(80,50),   [10007]=ccp(90,70),   [10017]=ccp(90,70),   [10027]=ccp(90,125),  [10037]=ccp(85,70),   [10008]=ccp(85,60),   [10018]=ccp(105,70),   [10028]=ccp(80,85),  [10038]=ccp(75,75),   [10144]=ccp(80,50),   [10145]=ccp(80,50),        [10143]=ccp(80,50),   [99999]=ccp(85,70),   [99998]=ccp(85,70)}--左边坦克开火动画位置

self.leftDownShellStartPos={ [10001]=ccp(80,50),    [10002]=ccp(80,50),    [10003]=ccp(80,50),    [10004]=ccp(80,50),    [10005]=ccp(80,55),    [10011]=ccp(80,50),    [10012]=ccp(80,50),   [10013]=ccp(80,50),  [10014]=ccp(80,55),    [10015]=ccp(90,60),    [10021]=ccp(80,110),   [10022]=ccp(80,110),   [10023]=ccp(80,100),   [10024]=ccp(80,100),   [10025]=ccp(80,110),[10031]=ccp(40,50),  [10032]=ccp(84,75),    [10033]=ccp(84,75),    [10034]=ccp(75,80),    [10035]=ccp(85,85),    [10041]=ccp(80,50),    [10042]=ccp(80,50),    [10043]=ccp(80,55),   [10044]=ccp(80,60),  [20044]=ccp(80,50),    [10045]=ccp(85,60),    [10051]=ccp(80,50),    [10052]=ccp(80,50),    [10053]=ccp(90,65),    [20055]=ccp(105,70),   [10054]=ccp(80,55),   [20054]=ccp(80,50),  [10055]=ccp(80,50),    [10061]=ccp(80,85),    [10062]=ccp(80,85),    [10063]=ccp(65,60),    [20065]=ccp(60,70),    [10064]=ccp(75,85),    [20064]=ccp(80,85),   [10065]=ccp(80,85),  [10071]=ccp(80,60),    [10072]=ccp(80,60),    [10073]=ccp(80,55),    [10074]=ccp(90,65),    [20074]=ccp(90,65),    [10075]=ccp(95,65),    [10081]=ccp(40,50),   [10082]=ccp(110,85), [10083]=ccp(90,80),    [10084]=ccp(90,80),    [10163]=ccp(55,75),    [10164]=ccp(75,85),    [10165]=ccp(75,95),  [20083]=ccp(84,75),    [20153]=ccp(65,80),    [20154]=ccp(70,80),    [20155]=ccp(75,85),    [10006]=ccp(85,55),   [10016]=ccp(90,60),  [10026]=ccp(80,110),   [10036]=ccp(75,95),    [10093]=ccp(100,65),   [10094]=ccp(80,50),    [10095]=ccp(100,65),   [20094]=ccp(80,50),    [10103]=ccp(80,75),   [10104]=ccp(65,65),  [10113]=ccp(90,65),    [10133]=ccp(125,75),   [10134]=ccp(125,75),   [10135]=ccp(125,85),   [10114]=ccp(100,70),   [20115]=ccp(95,65),    [20114]=ccp(80,60),   [10123]=ccp(80,50),  [10124]=ccp(90,65),    [20125]=ccp(90,70),    [20124]=ccp(80,50),    [10007]=ccp(100,80),   [10017]=ccp(95,65),    [10027]=ccp(90,138),   [10037]=ccp(90,87),   [10008]=ccp(100,70),   [10018]=ccp(105,70),    [10028]=ccp(80,85),   [10038]=ccp(85,85),   [10144]=ccp(25,45),  [10145]=ccp(25,45),    [10143]=ccp(25,45),    [99999]=ccp(80,50),    [99998]=ccp(80,50)}--每个坦克子弹相对坦克本身的坐标偏移
self.rightTopShellStartPos={   [10001]=ccp(-80,-30),  [10002]=ccp(-80,-30),  [10003]=ccp(-80,-30),  [10004]=ccp(-80,-30),  [10005]=ccp(-80,-30),  [10011]=ccp(-80,-30),  [10012]=ccp(-80,-30), [10013]=ccp(-80,-30),[10014]=ccp(-85,-30),  [10015]=ccp(-85,-30),  [10021]=ccp(-80,40),   [10022]=ccp(-80,45),   [10023]=ccp(-85,10),   [10024]=ccp(-80,30),   [10025]=ccp(-95,30),  [10031]=ccp(-10,35), [10032]=ccp(-34,23),   [10033]=ccp(-14,27),   [10034]=ccp(-45,15),   [10035]=ccp(-50,25),   [10041]=ccp(-80,-30),  [10042]=ccp(-80,-30),  [10043]=ccp(-80,-20), [10044]=ccp(-80,-25),[20044]=ccp(-80,-30),  [10045]=ccp(-80,-20),  [10051]=ccp(-80,-30),  [10052]=ccp(-80,-30),  [10053]=ccp(-85,-20),  [20055]=ccp(-110,-35),  [10054]=ccp(-80,-20), [20054]=ccp(-75,-25),[10055]=ccp(-80,-30),  [10061]=ccp(-80,20),   [10062]=ccp(-80,20),   [10063]=ccp(-80,20),   [20065]=ccp(-80,10),   [10064]=ccp(-80,20),   [20064]=ccp(-80,20),  [10065]=ccp(-80,20), [10071]=ccp(-80,-30),  [10072]=ccp(-80,-30),  [10073]=ccp(-80,-30),  [10074]=ccp(-100,-25), [20074]=ccp(-95,-25),  [10075]=ccp(-100,-35), [10081]=ccp(-10,35),  [10082]=ccp(-35,15),  [10083]=ccp(-25,-5),   [10084]=ccp(-50,15),   [10163]=ccp(-25,25),   [10164]=ccp(-30,30),   [10165]=ccp(-30,25),   [20083]=ccp(-14,27),   [20153]=ccp(-42,25),   [20154]=ccp(-42,25),   [20155]=ccp(-42,25),   [10006]=ccp(-80,-30), [10016]=ccp(-80,-25),[10026]=ccp(-80,25),   [10036]=ccp(-50,25),   [10093]=ccp(-85,-30),  [10094]=ccp(-70,-20),  [10095]=ccp(-85,-25),  [20094]=ccp(-80,-30),  [10103]=ccp(-80,0),   [10104]=ccp(-75,-25),[10113]=ccp(-80,-30),  [10133]=ccp(-85,-30),  [10134]=ccp(-80,-30),  [10135]=ccp(-110,-35), [10114]=ccp(-95,-30),  [20115]=ccp(-105,-30), [20114]=ccp(-80,-20), [10123]=ccp(-80,-30),[10124]=ccp(-100,-30), [20125]=ccp(-85,-20),  [20124]=ccp(-80,-30),  [10007]=ccp(-85,-15),  [10017]=ccp(-105,-30),  [10027]=ccp(-80,45),   [10037]=ccp(-50,15),  [10008]=ccp(-90,-30),  [10018]=ccp(-100,-35),  [10028]=ccp(-80,0),   [10038]=ccp(-50,5),  [10144]=ccp(20,25),  [10145]=ccp(-20,25),   [10143]=ccp(20,25),    [99999]=ccp(-80,-30),  [99998]=ccp(-80,-30),}--每个坦克子弹相对坦克本身的坐标偏移

self.rtankMuzzlePos={   [10001]=ccp(-60,-20),    [10002]=ccp(-60,-20),    [10003]=ccp(-60,-20),    [10004]=ccp(-70,-20),    [10005]=ccp(-70,-20),    [10011]=ccp(-60,-15),    [10012]=ccp(-60,-15),        [10013]=ccp(-60,-15),    [10014]=ccp(-70,-15),    [10015]=ccp(-70,-15),    [10021]=ccp(-50,30),     [10022]=ccp(-50,35),     [10023]=ccp(-70,10),     [10024]=ccp(-60,25),         [10025]=ccp(-80,25),     [10031]=ccp(-15,35),     [10032]=ccp(-25,25),     [10033]=ccp(-19,25),     [10034]=ccp(-55,15),     [10035]=ccp(-50,25),     [10041]=ccp(-70,-20),        [10042]=ccp(-70,-20),    [10043]=ccp(-75,-15),    [10044]=ccp(-75,-20),    [20044]=ccp(-75,-20),    [10045]=ccp(-80,-20),    [10051]=ccp(-70,-20),    [10052]=ccp(-70,-20),        [10053]=ccp(-70,-15),    [20055]=ccp(-80,-20),    [10054]=ccp(-80,-20),    [20054]=ccp(-75,-20),    [10055]=ccp(-70,-20),    [10061]=ccp(-70,10),     [10062]=ccp(-70,10),         [10063]=ccp(-60,10),     [20065]=ccp(-65,5),     [10064]=ccp(-70,15),     [20064]=ccp(-70,15),     [10065]=ccp(-70,10),     [10071]=ccp(-70,-20),    [10072]=ccp(-70,-20),        [10073]=ccp(-70,-15),    [10074]=ccp(-75,-10),    [20074]=ccp(-75,-10),    [10075]=ccp(-85,-20),    [10081]=ccp(-70,-20),    [10082]=ccp(-50,10),     [10083]=ccp(-50,10),         [10084]=ccp(-50,20),    [10163]=ccp(-50,20),     [10164]=ccp(-50,20),     [10165]=ccp(-50,20),     [20083]=ccp(-50,10),     [20153]=ccp(-45,10),     [20154]=ccp(-45,10),     [20155]=ccp(-50,10),     [10006]=ccp(-70,-20),    [10016]=ccp(-70,-15),        [10026]=ccp(-90,20),     [10036]=ccp(-50,25),     [10093]=ccp(-90,-25),    [10094]=ccp(-70,-20),    [10095]=ccp(-70,-20),    [20094]=ccp(-70,-20),    [10103]=ccp(-70,10),         [10104]=ccp(-55,-5),     [10113]=ccp(-60,-10),    [10133]=ccp(-80,-25),    [10134]=ccp(-80,-25),    [10135]=ccp(-90,-25),    [10114]=ccp(-75,-15),    [20115]=ccp(-80,-15),        [20114]=ccp(-75,-15),    [10123]=ccp(-70,-20),    [10124]=ccp(-90,-20),    [20125]=ccp(-90,-20),    [20124]=ccp(-90,-20),    [10007]=ccp(-75,-10),    [10017]=ccp(-85,-20),        [10027]=ccp(-90,40),     [10037]=ccp(-50,25),     [10008]=ccp(-75,-10),    [10018]=ccp(-85,-20),        [10028]=ccp(-90,40),     [10038]=ccp(-50,25),     [10144]=ccp(-70,-20),    [10145]=ccp(-70,-20),    [10143]=ccp(-70,-20),    [99999]=ccp(-50,25),     [99998]=ccp(-50,25)}--右边坦克炮口特效位置，需要微调
self.ltankMuzzlePos={  [10001]=ccp(85,60),   [10002]=ccp(65,45),   [10003]=ccp(85,60),   [10004]=ccp(85,60),   [10005]=ccp(85,60),   [10011]=ccp(85,60),   [10012]=ccp(85,60),   [10013]=ccp(85,60),        [10014]=ccp(85,60),   [10015]=ccp(85,60),   [10021]=ccp(60,90),   [10022]=ccp(70,100),  [10023]=ccp(80,93),   [10024]=ccp(80,95),   [10025]=ccp(80,105),  [10031]=ccp(40,50),        [10032]=ccp(70,55),   [10033]=ccp(70,55),   [10034]=ccp(60,75),   [10035]=ccp(55,70),   [10041]=ccp(85,60),   [10042]=ccp(85,60),   [10043]=ccp(85,60),   [10044]=ccp(85,60),        [20044]=ccp(85,60),   [10045]=ccp(80,60),   [10051]=ccp(85,60),   [10052]=ccp(85,60),   [10053]=ccp(85,60),   [20055]=ccp(85,60),   [10054]=ccp(85,60),   [20054]=ccp(85,60),        [10055]=ccp(85,60),   [10061]=ccp(75,80),   [10062]=ccp(75,80),   [10063]=ccp(60,60),   [20065]=ccp(60,70),   [10064]=ccp(75,80),   [20064]=ccp(75,80),   [10065]=ccp(75,80),        [10071]=ccp(80,60),   [10072]=ccp(80,60),   [10073]=ccp(80,55),   [10074]=ccp(85,65),   [20074]=ccp(85,65),   [10075]=ccp(85,65),   [10081]=ccp(40,50),   [10082]=ccp(70,60),        [10083]=ccp(70,60),   [20083]=ccp(70,55),   [20153]=ccp(30,65),   [20154]=ccp(35,50),   [20155]=ccp(45,85),   [10084]=ccp(80,63),   [10163]=ccp(75,70),   [10164]=ccp(60,60),        [10165]=ccp(65,65),   [10006]=ccp(85,60),   [10016]=ccp(85,60),        [10026]=ccp(95,110),  [10036]=ccp(60,80),   [10093]=ccp(85,60),   [10094]=ccp(75,55),   [10095]=ccp(90,60),   [20094]=ccp(75,55),   [10103]=ccp(70,65),   [10104]=ccp(70,65),        [10113]=ccp(65,55),   [10133]=ccp(85,60),   [10134]=ccp(105,70),  [10135]=ccp(105,80),  [10114]=ccp(80,60),   [20115]=ccp(85,65),   [20114]=ccp(85,60),   [10123]=ccp(85,55),        [10124]=ccp(85,60),   [20125]=ccp(85,65),   [20124]=ccp(85,60),   [10007]=ccp(90,70),   [10017]=ccp(80,60),   [10027]=ccp(90,125),  [10037]=ccp(60,70),   [10008]=ccp(50,20),   [10018]=ccp(80,60),   [10028]=ccp(90,125),  [10038]=ccp(60,70),   [10144]=ccp(55,60),        [10145]=ccp(55,60),   [10143]=ccp(55,60),   [99999]=ccp(60,70),   [99998]=ccp(60,70)}--左边坦克炮口特效位置

self.tankLv={[10031]=1,[10032]=2,[10033]=3,[10034]=4,[10035]=5,[10036]=5,[10082]=5,[10038]=5,[10037]=5,[10083]=5,[10084]=5,[10163]=5,[10164]=5,[10165]=5,[20083]=5,[20153]=5,[20154]=5,[20155]=5}

self.tankBulletCfg={{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_2_1.png","newbullet_effect_2_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_4_1.png","newbullet_effect_4_2.png"},{"newbullet_effect_4_1.png","newbullet_effect_4_2.png"},{"newbullet_effect_5_1.png","newbullet_effect_5_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_3_1.png","newbullet_effect_3_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},{"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       {"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_6_1.png","newbullet_effect_6_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},{"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},[10006]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},[10016]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},[10026]={"newbullet_effect_5_1.png","newbullet_effect_5_2.png"},[10036]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},[10093]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},[10044]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},[10045]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},[20044]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
      
       [10054]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [20054]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10103]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10104]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10113]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10123]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10064]={"t10064Bullet_1_2.png","t10064Bullet_1_1.png"},
       [20064]={"t10064Bullet_1_2.png","t10064Bullet_1_1.png"},
       [20065]={"t10064Bullet_1_2.png","t10064Bullet_1_1.png"},
       [10074]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10075]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [20074]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10007]={"newbullet_effect_2_1.png","newbullet_effect_2_2.png"},
       [10017]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10027]={"newbullet_effect_5_1.png","newbullet_effect_5_2.png"},
       [10037]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [10008]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},--newbullet_effect_1_1.png","newbullet_effect_1_2.png
       [10018]={"newbullet_effect_2_1.png","newbullet_effect_2_2.png"},
       [10028]={"newbullet_effect_5_1.png","newbullet_effect_5_2.png"},
       [10038]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [10083]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [10084]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [10163]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [10164]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [10165]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [20083]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [20055]={"newbullet_effect_1_1.png","newbullet_effect_1_1.png"},
       [20153]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [20154]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [20155]={"newbullet_effect_7_1.png","newbullet_effect_7_2.png"},
       [10094]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10095]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [20094]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10114]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [20115]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [20114]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10134]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10135]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10133]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10124]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [20125]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [20124]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [10144]={"ciBaoBullet_1_1.png","ciBaoBullet_1_1.png"},
       [10145]={"ciBaoBullet_1_1.png","ciBaoBullet_1_1.png"},
       [10143]={"ciBaoBullet_1_1.png","ciBaoBullet_1_1.png"},
       [99999]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
       [99998]={"newbullet_effect_1_1.png","newbullet_effect_1_2.png"},
    }
       self.l_missleTankPC={[10031]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10032]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10033]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10034]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10035]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10036]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10082]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10037]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10038]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10083]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10084]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10163]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10164]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [10165]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [20083]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [20153]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [20154]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [20155]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                            [20065]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},--多发炮弹也需要这个
                           } --导弹车6发子弹 发炮位置偏差值
       self.r_missleTankPC={[10031]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10032]={{-40,6},{-20,3},{0,0},{-40,6},{-20,3},{0,0}},
                           [10033]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10034]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10035]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10036]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10082]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10083]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10084]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10163]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10164]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10165]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20083]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20153]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20154]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20155]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10094]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10095]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20094]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}}, 
                           [10114]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20114]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}}, 
                           [20115]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10133]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},  
                           [10134]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}}, 
                           [10135]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}}, 
                           [10124]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20125]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20124]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},    
                           [10037]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10038]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10144]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10145]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [10143]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [99999]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [99998]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},
                           [20065]={{0,0},{-15,8},{-30,16},{0,0},{-15,8},{-30,16}},--多发炮弹也需要这个
                           } --导弹车6发子弹 发炮位置偏差值
   
   self.tankWithBulletAnim={[10145]=2,[10144]=2,[10143]=1.5} --子弹有自己的动画 value值表示缩放的倍数

end


--实例化一个坦克 tid:坦克类型(1-20),num:坦克数量 pos:坦克位置1-6  area:坦克所在的区域 1：右上角 2:左下角
function acEatChickenTank:new(tid,num,pos,area,isSpace,parent,alsoparent)
    local nc={

    }
    setmetatable(nc,self)
    self.__index=self

    nc.tid=tid
    nc.num=num
    nc.pos=pos
    nc.area=area
    nc.isSpace=isSpace
    nc.tickIndex=pos*7+(pos+13)*20
    nc.parent=parent
    nc.alsoparent=alsoparent
    nc:init()
    return nc
end

function acEatChickenTank:init()
   self.isWillDie=false
   self.isAY = false --军徽着火技能，用于自燃时特殊火焰的显示
   self.beSkillCD={}--当前坦克被攻击时中的技能，用于回合结束后，判断是否消除
   self:initTanksCfg()
   local subLength = 40
   if G_isIphone5()==true then
      self.rightTopPos={ccp(230 - subLength,694+176 - subLength),ccp(359 - subLength,603+176 - subLength),ccp(510 - subLength,512+176 - subLength),ccp(291 - subLength,821+176 - subLength),ccp(427 - subLength,738+176 - subLength),ccp(557 - subLength,658+176 - subLength)}
   else
      self.rightTopPos={ccp(230 - subLength,694 - subLength),ccp(359 - subLength,603 - subLength),ccp(510 - subLength,512 - subLength),ccp(291 - subLength,821 - subLength),ccp(427 - subLength,738 - subLength),ccp(557 - subLength,658 - subLength)}
   end
   local curId =tonumber(RemoveFirstChar(self.tid))
   self.tankId = G_pickedList(curId)--是否为精英坦克
   self.tid=GetTankOrderByTankId(self.tankId)   
   self.container=CCNode:create()
   self.container2 =CCNode:create()
   if self.isSpace==true then
       self.container:setVisible(false)
   end
   local tankFrameName="t"..self.tid.."_"..self.area..".png" --第5层
   local tankBarrel="t"..self.tid.."_"..self.area.."_1.png"  --炮管 第6层
   local tankPedrell="l"..self.tid.."_"..self.area.."_1.png" --履带 第6层
   print("self.tid====>>>>",self.tid)
   self.sprite=CCSprite:createWithSpriteFrameName(tankFrameName)
   self.container:addChild(self.sprite,5) --坦克本身
   self.container:setScale(1)
   if self.tankBarrelFrameCount[self.tankId]>0 then
        self.tankBarrelSP=CCSprite:createWithSpriteFrameName(tankBarrel)
        self.container:addChild(self.tankBarrelSP,6) --炮管
   end
   
   if self.tankPedrellFrameCount[self.tankId]>0 then
        self.tankPedrellSp=CCSprite:createWithSpriteFrameName(tankPedrell)
        self.container:addChild(self.tankPedrellSp,6) --履带
        if self.num == -2 then
           self.tankPedrellSp:setOpacity(0)
        end
   end
   if self.tankWithBulletAnim[self.tankId] then

      local addSp = CCSprite:createWithSpriteFrameName("t"..self.tid.."_"..self.area..".png")
      addSp:setTag(self.tankId)
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y))
      self.container:addChild(addSp,6)
      local pzArr=CCArray:create()
      for kk=1,5 do
          local nameStr="t"..self.tid.."_"..self.area.."_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.03)
      local animate=CCAnimate:create(animation)
      local repeatForever1=CCRepeatForever:create(animate)
      addSp:runAction(repeatForever1)   

   end
   if self.parent and self.area==1 then
         self:showBossPedrell()
   else
         self:showRTankDust() --显示右侧履带烟雾
         self:showLTankDust() --显示左侧履带烟雾 
   end
   local function inEnd()
        self.container:stopAllActions()
        self.inBattle=true
   end
   if self.area==1 then
      if (self.num == -1 or self.num == -2 or self.num==-3)  then
         if G_isIphone5()==true then
            self.rightTopPos[self.pos]=ccp(self.rightTopPos[self.pos].x+50,self.rightTopPos[self.pos].y+50)
         else
            self.rightTopPos[self.pos]=ccp(self.rightTopPos[self.pos].x+70,self.rightTopPos[self.pos].y+70)
         end
      end
        local stPos=self.rightTopPos[self.pos]
        self.container:setPosition(ccp(stPos.x+400,stPos.y+200))
        self.container2:setPosition(ccp(stPos.x-400,stPos.y-200))
        self.tankPosition=self.rightTopPos[self.pos]
        self.randPosition=self.rightTopPos[self.pos]
        local inMvTo=CCMoveTo:create(1 * G_battleSpeed,self.tankPosition)
        local  ffunc=CCCallFuncN:create(inEnd)
        local  fseq=CCSequence:createWithTwoActions(inMvTo,ffunc)

         local inMvTo2=CCMoveTo:create(1 * G_battleSpeed,self.tankPosition)


        if newGuidMgr:isNewGuiding() == true and newGuidMgr.curStep == 50 then
            self.container:setVisible(false)
            local function visibleCallback( )
               if self.isSpace ==true then
                  self.container:setVisible(false)
               else
                  self.container:setVisible(true)
               end
            end 
            local visCall = CCCallFunc:create(visibleCallback)
            local delayTime = CCDelayTime:create(4.5)
            local arr = CCArray:create()
            arr:addObject(delayTime)
            arr:addObject(visCall)
            arr:addObject(fseq)
            local seq = CCSequence:create(arr)
            self.container:runAction(seq)
        else
           self.container:runAction(fseq)
           self.container2:runAction(inMvTo2)
        end
   else
        local stPos=self.leftDownPos[self.pos]
        self.container:setPosition(ccp(stPos.x-400,stPos.y-200))
        self.container2:setPosition(ccp(stPos.x-400,stPos.y-200))
        self.tankPosition=self.leftDownPos[self.pos]
        self.randPosition=self.leftDownPos[self.pos]
        local inMvTo=CCMoveTo:create(1 * G_battleSpeed,self.tankPosition)
        local  ffunc=CCCallFuncN:create(inEnd)
        local  fseq=CCSequence:createWithTwoActions(inMvTo,ffunc)

        if newGuidMgr:isNewGuiding() == true and newGuidMgr.curStep == 50 then
            self.container:setVisible(false)
            if  self.pos < 3 then
               local function visibleCallback( )
                     self.container:setVisible(true)
               end 
               local visCall = CCCallFunc:create(visibleCallback)
               local delayTime = CCDelayTime:create(4.5)
               local arr = CCArray:create()
               arr:addObject(delayTime)
               arr:addObject(visCall)
               arr:addObject(fseq)
               local seq = CCSequence:create(arr)
               self.container:runAction(seq)
            end
        else
            self.container:runAction(fseq)
        end
   end
   
   if self.area==1 then
      if self.parent and self.parent.r_tankLayer then
         self.parent.r_tankLayer:addChild(self.container,2) --添加到战场
         self.parent.r_tankLayer:addChild(self.container2,22) --添加到战场
      else
        acEatChickenBattleScene.r_tankLayer:addChild(self.container,2) --添加到战场
        acEatChickenBattleScene.r_tankLayer:addChild(self.container2,22) --添加到战场
     end
   else
      if self.parent and self.parent.l_tankLayer then
         self.parent.l_tankLayer:addChild(self.container,2) --添加到战场
         self.parent.l_tankLayer:addChild(self.container2,22) --添加到战场
      else
        acEatChickenBattleScene.l_tankLayer:addChild(self.container,2) --添加到战场
        acEatChickenBattleScene.l_tankLayer:addChild(self.container2,22) --添加到战场
     end
   end
   --self.tankNumSp=CCSprite:createWithSpriteFrameName("BattleTankNumBg.png") --显示坦克剩余数量的容器
   --self.tankNumSp:setAnchorPoint(ccp(0,0))
 local capInSet = CCRect(5, 5, 1, 1);
 local function touchClick()

 end
 self.tankNumSp =LuaCCScale9Sprite:createWithSpriteFrameName("BattleTankNumBg.png",capInSet,touchClick)
 self.tankNumSp:setAnchorPoint(ccp(0,0))
 self.tankNumSp:setContentSize(CCSizeMake(40,22))
   if self.area==1 then
        self.tankNumSp:setPosition(ccp(40,30))
   else
        self.tankNumSp:setPosition(ccp(-70,0))
   end
   --self.tankNumSp:setScale(0.5)
   self.container:addChild(self.tankNumSp,8)
   self.curTankNums=self.num
   self.tankNumLb=GetTTFLabel(self.num,25)
   self.tankNumLb:setColor(G_ColorRed)
   self.tankNumLb:setAnchorPoint(ccp(0.5,0.5))
   self.tankNumLb:setPosition(ccp(self.tankNumSp:getContentSize().width/2,self.tankNumSp:getContentSize().height/2))
   self.tankNumSp:addChild(self.tankNumLb)
  if self.tankNumLb:getContentSize().width>40 then
       self.tankNumSp:setContentSize(CCSizeMake(self.tankNumLb:getContentSize().width+10,22))
       self.tankNumLb:setPosition(ccp(self.tankNumSp:getContentSize().width/2,self.tankNumSp:getContentSize().height/2))
   end

   -- if (self.num == -1 or self.num == -2 or self.num==-3) then
   --    self:addDestoryBossTank()
      self.tankNumSp:setVisible(false)
   -- else
      -- self.tankNumSp:setVisible(true)
   -- end


end
function acEatChickenTank:animationApproach( )--用于新手引导 支援部队动画
         self.inBattle =false
         self.container:setVisible(true)
         local function inEnd()
              self.container:stopAllActions()
              self.inBattle=true
         end
         local stPos=self.leftDownPos[self.pos]
         self.container:setPosition(ccp(stPos.x-400,stPos.y-200))
         self.tankPosition=self.leftDownPos[self.pos]
         self.randPosition=self.leftDownPos[self.pos]
         local inMvTo=CCMoveTo:create(1,self.tankPosition)
         local  ffunc=CCCallFuncN:create(inEnd)
         local  fseq=CCSequence:createWithTwoActions(inMvTo,ffunc)
         -- self.container:setVisible(true)
         local function visibleCallback( )
               self.container:setVisible(true)
         end 
         local visCall = CCCallFunc:create(visibleCallback)
         local delayTime = CCDelayTime:create(0.1)
         local arr = CCArray:create()
         arr:addObject(delayTime)
         arr:addObject(visCall)
         arr:addObject(fseq)
         local seq = CCSequence:create(arr)
         self.container:runAction(seq)
end

function acEatChickenTank:addDestoryBossTank()
   local tankTb = self:getBossTankNum()

   local destoryPos = {}
   if self.num == -2 then
      destoryPos = {ccp(258,297),ccp(284,245),ccp(379,227),ccp(348,358),ccp(433,357),ccp(473,299)}
   else
      destoryPos = {ccp(198,271),ccp(290,258),ccp(358,218),ccp(291,353),ccp(426,363),ccp(469,289)}
   end
   for i=1,6 do
      if tankTb[i]==nil then
         local sp1 = self.sprite:getChildByTag(1010+i)
         if sp1==nil then
            local addDestoryTankSp
            if self.num == -2 then
               addDestoryTankSp= CCSprite:createWithSpriteFrameName("t99998_1_2_"..i..".png")
            else
               addDestoryTankSp= CCSprite:createWithSpriteFrameName("t99999_1_2_"..i..".png")
            end
            addDestoryTankSp:setAnchorPoint(ccp(0.5,0.5))
            
            if self.num == -2 then
               addDestoryTankSp:setPosition(destoryPos[i])
            else
               addDestoryTankSp:setPosition(getCenterPoint(self.sprite))
            end
            self.sprite:addChild(addDestoryTankSp,5)
            addDestoryTankSp:setTag(1010+i)
         end
         local sp2 = self.sprite:getChildByTag(1020+i)
         if sp2==nil then
            local smokeSp = CCParticleSystemQuad:create("ship/FireTailing.plist")
           smokeSp:setAnchorPoint(ccp(0.5,0.5))
           smokeSp:setPosition(destoryPos[i])
           self.sprite:addChild(smokeSp,5)
           smokeSp:setTag(1020+i)
         end
      end
   end
   if newGuidMgr:isNewGuiding() == true and newGuidMgr.curStep == 54 and BossBattleVoApi and BossBattleVoApi:getBossOldHp() <=0 then--新手引导使用
      local destoryBoss =CCSprite:createWithSpriteFrameName("t99999_1.png")
      for i=1,6 do
         if tankTb[i]==nil then
            local sp1 = destoryBoss:getChildByTag(1010+i)
            if sp1==nil then
               addDestoryTankSp= CCSprite:createWithSpriteFrameName("t99999_1_2_"..i..".png")
               addDestoryTankSp:setAnchorPoint(ccp(0.5,0.5))
               addDestoryTankSp:setPosition(getCenterPoint(destoryBoss))
               destoryBoss:addChild(addDestoryTankSp,5)
               addDestoryTankSp:setTag(1010+i)
            end
            local sp2 = destoryBoss:getChildByTag(1020+i)
            if sp2==nil then
               local smokeSp = CCParticleSystemQuad:create("ship/FireTailing.plist")
              smokeSp:setAnchorPoint(ccp(0.5,0.5))
              smokeSp:setPosition(destoryPos[i])
              destoryBoss:addChild(smokeSp,5)
              smokeSp:setTag(1020+i)
            end
         end
      end
      self.parent:addDestoryTank(self.area,ccp(self.container:getPosition()),destoryBoss)
      self.container:setVisible(false)
      self.parent:battleEndWinerGoOut()
   end
end

function acEatChickenTank:showBossPedrell()

   local animArr=CCArray:create()
   
     for kk=1,3 do
        local nameStr="l"..self.tid.."_"..self.area.."_"..kk..".png"
        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
        animArr:addObject(frame)
     end
     
     local animation=CCAnimation:createWithSpriteFrames(animArr)
     animation:setDelayPerUnit(0.06)
     local animate=CCAnimate:create(animation)
     local seq=CCRepeatForever:create(animate)
     self.tankPedrellSp:runAction(seq)
     self.tankPedrellSp:setAnchorPoint(ccp(0,0))
     self.tankPedrellSp:setPosition(-400,-250)


     --local smokeSp = CCParticleSystemQuad:create("ship/BossSmoke.plist")
     --smokeSp:setAnchorPoint(ccp(0,0))
     --smokeSp:setPosition(-50,-200)
     --self.container:addChild(smokeSp,7)
end
function acEatChickenTank:getBossTankNum()

  local tankTb = {}
  local paotou = {}
  if self.num == -1 then
      paotou = BossBattleVoApi:getBossPaotou()
  elseif self.num == -2 then
      paotou = acNewYearsEveVoApi:getBossPaotou()
  elseif self.num==-3 then
      paotou = allianceFubenVoApi:getBossPaotou()
  end
  for k,v in pairs(paotou) do
    if v and v==1 then
      tankTb[k]=v
    end
  end
 return tankTb
  -- local maxHp = BossBattleVoApi:getBossMaxHp()
  -- local bossHp = BossBattleVoApi:getBossNowHp()
  -- local tankTb = {}
  -- if bossHp <=0 then
  --   return tankTb
  -- end
  -- for i=1,6 do
  --   if bossHp>maxHp/6*(i-1) then
  --     tankTb[bossCfg.paotou[6-i+1]]=1
  --   end
  -- end

  --  return tankTb
end
--rate:开火动画频率 fireNum:开火次数
function acEatChickenTank:fire(rate,fireNum,norecord)
    
    local tankTypeIndex=1

    if self.tankWithBulletAnim[self.tankId] then
       PlayEffect(audioCfg.tank_5)
       tankTypeIndex=2
    elseif tankCfg[self.tankId].type=="1" then
       PlayEffect(audioCfg.tank_1)
       tankTypeIndex=1
    elseif tankCfg[self.tankId].type=="2" then
       PlayEffect(audioCfg.tank_2)
       tankTypeIndex=2
    elseif tankCfg[self.tankId].type=="4" then
       PlayEffect(audioCfg.tank_3)
       tankTypeIndex=3
    elseif tankCfg[self.tankId].type=="8" then
       PlayEffect(audioCfg.tank_4)
       tankTypeIndex=4
    end

    if self.area==1 and (self.num ==-1 or self.num==-3)then
      tankTypeIndex=99999
    elseif self.area==1 and self.num ==-2 then
      tankTypeIndex=99998
    end
    
    if tankCfg[self.tankId].type=="8" then
        self:fireForMissile(rate,fireNum,norecord)
        do return end
    end
    if norecord==nil then
        if fireNum==nil then
            self.fireNum=1
        else
            self.fireNum=fireNum
        end
    end
    self.needShock=true
    self.shockIndex=1
    --************以下代码是开火动画
    if self.tankWithBulletAnim[self.tankId]==nil then
       if self.tankFireSp~=nil then
          self.tankFireSp:stopAllActions()
          self.tankFireSp:removeFromParentAndCleanup(true)
          self.tankFireSp=nil
       end
      local tankFireFrameName="fire"..tankTypeIndex.."_1.png" --开火动画
      self.tankFireSp=CCSprite:createWithSpriteFrameName(tankFireFrameName)

      local fireArr=CCArray:create()
       for kk=1,self.tankFireFrameCount[self.tankId] do
           local nameStr="fire"..tankTypeIndex.."_"..kk..".png"
           local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
           fireArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(fireArr)

      if rate==nil then
        animation:setDelayPerUnit(0.05 * G_battleSpeed)
      else
        animation:setDelayPerUnit(rate * G_battleSpeed)
      end

      local animate=CCAnimate:create(animation)

      self.tankFireSp:setPosition(ccp(0,0))
      if (self.num == -1 or self.num == -2 or self.num==-3) then
         self.sprite:addChild(self.tankFireSp,7)
      else
         self.container:addChild(self.tankFireSp,7) --开火动画
      end
      local firePos = {ccp(150,263),ccp(225,241),ccp(283,198),ccp(252,344),ccp(328,333),ccp(392,272)}
      if self.area==1 then
         if (self.num == -1 or self.num == -2 or self.num==-3) then
            if self.num == -2 then
               firePos = {ccp(192,265),ccp(214,226),ccp(310,203),ccp(299,338),ccp(316,309),ccp(415,277)}
            end
            local firePosIndex = SizeOfTable(firePos)-self.fireNum+1
            if self:getBossTankNum()[firePosIndex]==nil then
               firePosIndex = SizeOfTable(firePos)-SizeOfTable(self:getBossTankNum())+firePosIndex
            end
            if self:getBossTankNum()[firePosIndex]==nil then
               firePosIndex=firePosIndex-1
            end
            if self:getBossTankNum()[firePosIndex]==nil or (firePosIndex>SizeOfTable(firePos)) then
               firePosIndex=5
            end
            self.tankFireSp:setPosition(firePos[firePosIndex])
         else
           self.tankFireSp:setPosition(self.rtankFirePos[self.tankId])
        end
           local brato=210-(self.r_tankBulletRotate[self.tankId]<0 and (360+self.r_tankBulletRotate[self.tankId]) or self.r_tankBulletRotate[self.tankId])
           self.tankFireSp:setRotation(brato)
      elseif  self.area==2 then --左方坦克
           self.tankFireSp:setRotation(self.l_tankBulletRotate[self.tankId])
           self.tankFireSp:setPosition(self.ltankFirePos[self.tankId])
           local brato=210-(self.r_tankBulletRotate[self.tankId]<0 and (360+self.r_tankBulletRotate[self.tankId]) or self.r_tankBulletRotate[self.tankId])
           self.tankFireSp:setRotation(brato)
           self.tankFireSp:setRotation(180)
      end

      local function removeFireSp()
          self.tankFireSp:removeFromParentAndCleanup(true)
          self.tankFireSp=nil
          if (self.num == -1 or self.num==-3) and self.fireNum>0 then
               self:fire(0.04 * G_battleSpeed,0,true)
               self.fireNum=self.fireNum-1
          elseif self.num == -2 and self.fireNum>0 then
               self:fire(0.04 * G_battleSpeed,0,true)
               self.fireNum=self.fireNum-1
          end
      end
      local  ffunc=CCCallFuncN:create(removeFireSp)
      local  fseq=CCSequence:createWithTwoActions(animate,ffunc)
      self.tankFireSp:runAction(fseq)
   end
   --************以上代码是开火动画
   self:showBarrelSPAction()
   local t_bulletCfg=self.tankBulletCfg[self.tid]
   if self.isG then
      self.isG=nil
      t_bulletCfg={"t10064Bullet_1_2.png","t10064Bullet_1_1.png"}

   end
   
   local bulletframeName
   if self.area==1 then
      bulletframeName=t_bulletCfg[1]
   else
      if   t_bulletCfg[2]==nil then
            bulletframeName=t_bulletCfg[1]
      else
            bulletframeName=t_bulletCfg[2]
      end
   end
   self.shellSp=CCSprite:createWithSpriteFrameName(bulletframeName)
   self.shellSp:setAnchorPoint(ccp(0.5,0.5))
   --以下设置子弹
   local shellMV
   if self.area==1 then
        if self.parent and self.parent.r_tankLayer then
            self.parent.r_shellLayer:addChild(self.shellSp)
        else
           acEatChickenBattleScene.r_shellLayer:addChild(self.shellSp)
        end
        local  stPosX,stPosY=self.rightTopPos[self.pos].x,self.rightTopPos[self.pos].y
        if self.num == -1 or self.num==-3 then
                 local stpos = {ccp(stPosX-220,stPosY-10),ccp(stPosX-144,stPosY-8),ccp(stPosX-88,stPosY-74),ccp(stPosX-116,stPosY+80),ccp(stPosX-40,stPosY+70),ccp(stPosX+20,stPosY+19)}
                 local stPosIndex = SizeOfTable(stpos)-self.fireNum+1
                 if self:getBossTankNum()[stPosIndex]==nil then
                    stPosIndex = SizeOfTable(stpos)-SizeOfTable(self:getBossTankNum())+stPosIndex
                 end
                 if self:getBossTankNum()[stPosIndex]==nil then
                    stPosIndex=stPosIndex-1
                 end
                 if self:getBossTankNum()[stPosIndex]==nil or stPosIndex>SizeOfTable(stpos) then
                    stPosIndex=5
                 end
                 stPosX=stpos[stPosIndex].x
                 stPosY=stpos[stPosIndex].y
        elseif self.num == -2 then
                 local stpos = {ccp(stPosX-220,stPosY-10),ccp(stPosX-144,stPosY-8),ccp(stPosX-88,stPosY-74),ccp(stPosX-116,stPosY+80),ccp(stPosX-40,stPosY+70),ccp(stPosX+20,stPosY+19)}
                 local stPosIndex = SizeOfTable(stpos)-self.fireNum+1
                 if self:getBossTankNum()[stPosIndex]==nil then
                    stPosIndex = SizeOfTable(stpos)-SizeOfTable(self:getBossTankNum())+stPosIndex
                 end
                 if self:getBossTankNum()[stPosIndex]==nil then
                    stPosIndex=stPosIndex-1
                 end
                 if self:getBossTankNum()[stPosIndex]==nil or stPosIndex>SizeOfTable(stpos) then
                    stPosIndex=5
                 end
                 stPosX=stpos[stPosIndex].x
                 stPosY=stpos[stPosIndex].y

        end
        stPosX=stPosX+self.rightTopShellStartPos[self.tankId].x
        stPosY=stPosY+self.rightTopShellStartPos[self.tankId].y
        self.shellSp:setPosition(ccp(stPosX,stPosY))
        
        if self.tankWithBulletAnim[self.tankId]~=nil then
                local bulletAnimArr=CCArray:create()

                     for kk=1,6 do
                        local nameStr="ciBaoBullet_1_"..kk..".png"
                        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                        bulletAnimArr:addObject(frame)
                     end
                     
                     for kk=1,6 do
                        local nameStr="ciBaoBullet_1_"..kk..".png"
                        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                        bulletAnimArr:addObject(frame)
                     end
                     

                     local animation=CCAnimation:createWithSpriteFrames(bulletAnimArr)
                     animation:setDelayPerUnit(0.06 * G_battleSpeed)
                     shellMV=CCAnimate:create(animation)
                     self.shellSp:setAnchorPoint(ccp(1,0.5))
                     self.shellSp:setScale(self.tankWithBulletAnim[self.tankId])
                     self.shellSp:setRotation(self.r_tankBulletRotate[self.tankId])
        else
                 local bulletAimPos=ccp(0,0)
                --self.rightTopShellEndPos[self.pos]
                --bulletAimPos.y=bulletAimPos.y+self.r_tankBulletYoffset[self.tankId]
                local bulletAng=self.r_tankBulletRotate[self.tankId] --子弹旋转角度
                bulletAimPos.y=math.sin(math.rad(bulletAng))*1000+stPosY
                bulletAimPos.x=math.cos(math.rad(bulletAng))*1000+stPosX
                shellMV=CCMoveTo:create(0.2 * G_battleSpeed,bulletAimPos)


        end

   else
      if self.parent and self.parent.l_shellLayer then
         self.parent.l_shellLayer:addChild(self.shellSp)
      else
        acEatChickenBattleScene.l_shellLayer:addChild(self.shellSp)
      end
        local stPosX,stPosY=self.leftDownPos[self.pos].x,self.leftDownPos[self.pos].y
        stPosX=stPosX+self.leftDownShellStartPos[self.tankId].x
        stPosY=stPosY+self.leftDownShellStartPos[self.tankId].y
        self.shellSp:setPosition(ccp(stPosX,stPosY))
        --local bulletAimPos=self.leftDownShellEndPos[self.pos]
        --bulletAimPos.y=bulletAimPos.y+self.l_tankBulletYoffset[self.tankId]
        
         if self.tankWithBulletAnim[self.tankId]~=nil then

                     local bulletAnimArr=CCArray:create()
                     for kk=1,6 do
                        local nameStr="ciBaoBullet_1_"..kk..".png"
                        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                        bulletAnimArr:addObject(frame)
                     end
                     for kk=1,6 do
                        local nameStr="ciBaoBullet_1_"..kk..".png"
                        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                        bulletAnimArr:addObject(frame)
                     end

                     local animation=CCAnimation:createWithSpriteFrames(bulletAnimArr)
                     animation:setDelayPerUnit(0.06 * G_battleSpeed)
                     shellMV=CCAnimate:create(animation)
                     
                     self.shellSp:setAnchorPoint(ccp(0,0.5))
                     self.shellSp:setScale(self.tankWithBulletAnim[self.tankId])
                     self.shellSp:setRotation(self.l_tankBulletRotate[self.tankId])
         else
                local bulletAimPos=ccp(0,0)
                local bulletAng=self.l_tankBulletRotate[self.tankId] --子弹旋转角度
                
                bulletAimPos.y=math.sin(math.rad(bulletAng))*1000+stPosY
                bulletAimPos.x=math.cos(math.rad(bulletAng))*1000+stPosX
                
                shellMV=CCMoveTo:create(0.3 * G_battleSpeed,bulletAimPos)
        end

   end
   local function moveEnd()
      if self.shellSp then 
        self.shellSp:removeFromParentAndCleanup(true)
        self.shellSp=nil
      end
   end
   local  ffunc=CCCallFuncN:create(moveEnd)
   local  fseq=CCSequence:createWithTwoActions(shellMV,ffunc) 
   self.shellSp:runAction(fseq) 
   self:showShock()
   self:showDustEffect()
   self:showShellEffect()
end

function acEatChickenTank:showShellEffect()
   if self.tankWithBulletAnim[self.tankId]==nil then
      local effectSp=CCSprite:createWithSpriteFrameName("shells1__1.png")

      local animArr=CCArray:create()
      
        for kk=1,49 do
           local nameStr="shells1__"..kk..".png"
           local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
           animArr:addObject(frame)
        end
        local function spCallBack()
           effectSp:stopAllActions()
           effectSp:removeFromParentAndCleanup(true)
        end
        local funcHandler=CCCallFunc:create(spCallBack)
        
        local animation=CCAnimation:createWithSpriteFrames(animArr)
        animation:setDelayPerUnit(0.06 * G_battleSpeed)
        local animate=CCAnimate:create(animation)
        local seq=CCSequence:createWithTwoActions(animate,funcHandler)   
        effectSp:runAction(seq)
        effectSp:setAnchorPoint(ccp(0.5,0))
        local addX,addY=self.container:getPosition()
        if self.area==1 then
        
        else
            addX=addX-50
            addY=addY-70
        end
        if self.parent then
         self.parent:addShellEffect(self.area,ccp(addX,addY),effectSp)
        else
         acEatChickenBattleScene:addShellEffect(self.area,ccp(addX,addY),effectSp)
        end
        
   end
end

--开火地面尘土效果
function acEatChickenTank:showDustEffect()
   if self.tankWithBulletAnim[self.tankId]==nil then
    if tankCfg[self.tankId].type=="8" then
        do return end
    end
    --battleScene:addDustEffect(area,pos,sp)
    local effectSp=CCSprite:createWithSpriteFrameName("smoke_1.png")
    effectSp:setScale(1.5)

   local animArr=CCArray:create()
   
     for kk=1,14 do
        local nameStr="smoke_"..kk..".png"
        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
        animArr:addObject(frame)
     end
     
     local function spCallBack()
        effectSp:stopAllActions()
        effectSp:removeFromParentAndCleanup(true)
     end
     local funcHandler=CCCallFunc:create(spCallBack)
     
     local animation=CCAnimation:createWithSpriteFrames(animArr)
     animation:setDelayPerUnit(0.05 * G_battleSpeed)
     local animate=CCAnimate:create(animation)
     local seq=CCSequence:createWithTwoActions(animate,funcHandler)   
     effectSp:runAction(seq)
     effectSp:setAnchorPoint(ccp(0.5,0))
     local addX,addY=self.container:getPosition()
     if self.area==1 then
         addX=addX-20
         addY=addY-10
     else
         addX=addX+20
         addY=addY+10
     end
     --battleScene:addDie(self.area,ccp(addX,addY-70),effectSp)
  
     if self.parent then
      self.parent:addDustEffect(self.area,ccp(addX,addY-70),effectSp)
     else
      acEatChickenBattleScene:addDustEffect(self.area,ccp(addX,addY-70),effectSp)
     end
  end
end
function acEatChickenTank:fireForMissile(rate,fireNum,norecord)
    if norecord==nil then
         self.fireNum=6
    end
    --self.needShock=true
    --self.shockIndex=1
    --************以下代码是开火动画

   local tankFireFrameName="fire4_1.png" --开火动画
   local m_tankFireSp=CCSprite:createWithSpriteFrameName(tankFireFrameName)

   local fireArr=CCArray:create()
    for kk=1,self.tankFireFrameCount[self.tankId] do
        local nameStr="fire4_"..kk..".png"
        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
        fireArr:addObject(frame)
   end
   local animation=CCAnimation:createWithSpriteFrames(fireArr)
   if rate==nil then
     animation:setDelayPerUnit(0.05 * G_battleSpeed)
   else
     animation:setDelayPerUnit(rate * G_battleSpeed)
   end
   local animate=CCAnimate:create(animation)
   m_tankFireSp:setPosition(ccp(0,0))
   self.container:addChild(m_tankFireSp,7) --开火动画
   local missleTankP=self.tankId
   -- if self.tid>15 and self.tid<=20 then
   --     missleTankP=self.tid-15
   -- elseif self.tid>40 and self.tid<=45 then
   --     missleTankP=self.tid-40
   -- end
   local curFireNum = self.fireNum >6 and self.fireNum%6 or self.fireNum
   if self.area==1 then
        
        local tfSPoint=self.rtankFirePos[self.tankId]
        local tmpSPoint=ccp(0,0)
        tmpSPoint.x=tfSPoint.x+self.r_missleTankPC[missleTankP][6-curFireNum+1][1]
        tmpSPoint.y=tfSPoint.y+self.r_missleTankPC[missleTankP][6-curFireNum+1][2]
        
        m_tankFireSp:setPosition(tmpSPoint)
        local brato=210-(self.r_tankBulletRotate[self.tankId]<0 and (360+self.r_tankBulletRotate[self.tankId]) or self.r_tankBulletRotate[self.tankId])
        m_tankFireSp:setRotation(brato)
   elseif  self.area==2 then --左方坦克
        local tfSPoint=self.ltankFirePos[self.tankId]
        local tmpSPoint=ccp(0,0)
        tmpSPoint.x=tfSPoint.x+self.l_missleTankPC[missleTankP][6-curFireNum+1][1]
        tmpSPoint.y=tfSPoint.y+self.l_missleTankPC[missleTankP][6-curFireNum+1][2]
        m_tankFireSp:setRotation(self.l_tankBulletRotate[self.tankId])
        m_tankFireSp:setPosition(tmpSPoint)
        local brato=210-(self.r_tankBulletRotate[self.tankId]<0 and (360+self.r_tankBulletRotate[self.tankId]) or self.r_tankBulletRotate[self.tankId])
        m_tankFireSp:setRotation(brato)
        m_tankFireSp:setRotation(180)
   end
   local function removeFireSp()
       m_tankFireSp:removeFromParentAndCleanup(true)
       m_tankFireSp=nil
   end
   local  ffunc=CCCallFuncN:create(removeFireSp)
   local  fseq=CCSequence:createWithTwoActions(animate,ffunc)
   m_tankFireSp:runAction(fseq)
   --************以上代码是开火动画

   self:showBarrelSPAction()
   
   local t_bulletCfg=self.tankBulletCfg[self.tid]
   
   local bulletframeName
   if self.area==1 then
      bulletframeName=t_bulletCfg[1]
   else
      if   t_bulletCfg[2]==nil then
            bulletframeName=t_bulletCfg[1]
      else
            bulletframeName=t_bulletCfg[2]
      end
   end

   local m_shellSp=CCSprite:createWithSpriteFrameName(bulletframeName)

   --CCSprite:create(G_ZD1Src)
   m_shellSp:setAnchorPoint(ccp(0.5,0.5))
   local missleTankIndex=self.tankId
   -- if self.tid>15 and self.tid<=20 then
   --     missleTankIndex=self.tid-15
   -- elseif self.tid>40 and self.tid<=45 then
   --     missleTankIndex=self.tid-40
   -- end
   --以下设置子弹
   local shellMV
   local curFireNum2 = self.fireNum >6 and self.fireNum%6 or self.fireNum--用于随机炮弹数量使用
   if self.area==1 then
      if self.parent and self.parent.r_shellLayer then
         self.parent.r_shellLayer:addChild(m_shellSp)
      else
        acEatChickenBattleScene.r_shellLayer:addChild(m_shellSp)
     end
        local stPosX,stPosY=self.rightTopPos[self.pos].x,self.rightTopPos[self.pos].y
        stPosX=stPosX+self.rightTopShellStartPos[self.tankId].x+self.r_missleTankPC[missleTankIndex][6-curFireNum2+1][1]
        stPosY=stPosY+self.rightTopShellStartPos[self.tankId].y+self.r_missleTankPC[missleTankIndex][6-curFireNum2+1][2]
        m_shellSp:setPosition(ccp(stPosX,stPosY))
        
        local bulletAimPos=ccp(0,0)
        --self.rightTopShellEndPos[self.pos]
        --bulletAimPos.y=bulletAimPos.y+self.r_tankBulletYoffset[self.tankId]
        local bulletAng=self.r_tankBulletRotate[self.tankId] --子弹旋转角度
        bulletAimPos.y=math.sin(math.rad(bulletAng))*1000+stPosY
        bulletAimPos.x=math.cos(math.rad(bulletAng))*1000+stPosX
        shellMV=CCMoveTo:create(0.3 * G_battleSpeed,bulletAimPos)

   else
      if self.parent and self.parent.l_shellLayer then
         self.parent.l_shellLayer:addChild(m_shellSp)
      else
        acEatChickenBattleScene.l_shellLayer:addChild(m_shellSp)
     end
        local stPosX,stPosY=self.leftDownPos[self.pos].x,self.leftDownPos[self.pos].y
        stPosX=stPosX+self.leftDownShellStartPos[self.tankId].x+self.l_missleTankPC[missleTankIndex][6-curFireNum2+1][1]
        stPosY=stPosY+self.leftDownShellStartPos[self.tankId].y+self.l_missleTankPC[missleTankIndex][6-curFireNum2+1][2]
        m_shellSp:setPosition(ccp(stPosX,stPosY))
        --local bulletAimPos=self.leftDownShellEndPos[self.pos]
        --bulletAimPos.y=bulletAimPos.y+self.l_tankBulletYoffset[self.tankId]
        
        local bulletAimPos=ccp(0,0)
        local bulletAng=self.l_tankBulletRotate[self.tankId] --子弹旋转角度
        
        bulletAimPos.y=math.sin(math.rad(bulletAng))*1000+stPosY
        bulletAimPos.x=math.cos(math.rad(bulletAng))*1000+stPosX
        
        shellMV=CCMoveTo:create(0.3 * G_battleSpeed,bulletAimPos)

   end
   local function moveEnd()
        m_shellSp:removeFromParentAndCleanup(true)
        m_shellSp=nil
   end
   local  ffunc=CCCallFuncN:create(moveEnd)
   local  fseq=CCSequence:createWithTwoActions(shellMV,ffunc) 
   m_shellSp:runAction(fseq)
   --self:showShock()
end

function acEatChickenTank:showBarrelSPAction()

   if self.tankBarrelFrameCount[self.tankId]>0 then
       local fireArr=CCArray:create()
        for kk=1,self.tankBarrelFrameCount[self.tankId] do
            local nameStr="t"..self.tid.."_"..self.area.."_"..kk..".png"
            local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
            fireArr:addObject(frame)
       end
       local animation=CCAnimation:createWithSpriteFrames(fireArr)
       animation:setDelayPerUnit(0.06 * G_battleSpeed)
       local animate=CCAnimate:create(animation)
       self.tankBarrelSP:runAction(animate)
   end
end

function acEatChickenTank:showRTankDust()
   local tankDustFrameName="dust1_1.png" --履带烟雾
   self.rtankDustSp=CCSprite:createWithSpriteFrameName(tankDustFrameName)
   
   self.rtankDustSp:setAnchorPoint(ccp(0,0))
   local dustArr=CCArray:create()
   for kk=1,self.tankDustFrameCount[self.tankId] do
        local nameStr="dust1_"..kk..".png"
        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
        dustArr:addObject(frame)
   end
   local animation=CCAnimation:createWithSpriteFrames(dustArr)
   animation:setDelayPerUnit(0.05)
   local animate=CCAnimate:create(animation)
   local repeatForever=CCRepeatForever:create(animate)
   self.rtankDustSp:setPosition(ccp(0,0))
   self.rtankDustSp:runAction(repeatForever)
   self.container:addChild(self.rtankDustSp,7) --履带烟雾
   self.rtankDustSp:setOpacity(200)
   if self.area==1 then
        self.rtankDustSp:setScale(1.5)
        self.rtankDustSp:setPosition(ccp(self.r_rtankDustPos[self.tankId].x,self.r_rtankDustPos[self.tankId].y))
   elseif  self.area==2 then --左方坦克
        self.rtankDustSp:setScale(1.1)
        self.rtankDustSp:setPosition(ccp(self.l_rtankDustPos[self.tankId].x,self.l_rtankDustPos[self.tankId].y))
        self.rtankDustSp:setRotation(180)
   end
end

function acEatChickenTank:showLTankDust()
   local tankDustFrameName="dust1_1.png" --履带烟雾
   self.ltankDustSp=CCSprite:createWithSpriteFrameName(tankDustFrameName)
   self.ltankDustSp:setAnchorPoint(ccp(0,0))
   local dustArr=CCArray:create()
   for kk=1,self.tankDustFrameCount[self.tankId] do
        local nameStr="dust1_"..kk..".png"
        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
        dustArr:addObject(frame)
   end
   local animation=CCAnimation:createWithSpriteFrames(dustArr)
   animation:setDelayPerUnit(0.05)
   local animate=CCAnimate:create(animation)
   local repeatForever=CCRepeatForever:create(animate)
   self.ltankDustSp:setPosition(ccp(0,0))
   self.ltankDustSp:runAction(repeatForever)
   self.container:addChild(self.ltankDustSp,4) --履带烟雾
   self.ltankDustSp:setOpacity(210)
   if self.area==1 then
        self.ltankDustSp:setScale(1.5)
        self.ltankDustSp:setPosition(ccp(self.r_ltankDustPos[self.tankId].x,self.r_ltankDustPos[self.tankId].y))
   elseif  self.area==2 then --左方坦克
        self.ltankDustSp:setScale(1.3)
        self.ltankDustSp:setPosition(ccp(self.l_ltankDustPos[self.tankId].x,self.l_ltankDustPos[self.tankId].y))
        self.ltankDustSp:setRotation(180)
   end
end

function acEatChickenTank:showShock()
   if self.tankWithBulletAnim[self.tankId]==nil then
    local curTankPos=ccp(self.container:getPosition())
    local aimPos
    if self.area==1 then --右方
          aimPos=  ccp(curTankPos.x+3,curTankPos.y+1.5)
    else
          aimPos=  ccp(curTankPos.x-3,curTankPos.y-1.5)
    end
    self.container:setPosition(aimPos)
   end
end

function acEatChickenTank:setFire(flashInterval,num)
    
    self.fireNum=num
end
function acEatChickenTank:tick()

    if self.inBattle==false then
         return
    end
    self.tickIndex=self.tickIndex+1
    if self.needShock==true then
        self.shockIndex=self.shockIndex+1
        self:showShock()
        if self.shockIndex==6 then
            self.needShock=false
        end
    end
    local fireRate=25
    if tankCfg[self.tankId].type=="8" then
        fireRate=8
    end
    if self.tickIndex%fireRate==0 then

        if self.fireNum>0 then
            self:fire(0.04,0,true)
            self.fireNum=self.fireNum-1
        end
    end
    if self.randMove==false then
        if self.tickIndex%60==0 then
            self.randMove=true
            self.container:stopAllActions()
            if (math.floor(self.tickIndex/60))%3==0 then
                self.randMoveDirect=-1
            else
                self.randMoveDirect=1
            end
            --if self.area==1 then --右上角
                    local mvTo
                    if self.randPosition.x~=self.tankPosition.x or self.randPosition.y~=self.tankPosition.y then --返回原位置
                            mvTo=CCMoveTo:create(1 * G_battleSpeed,self.tankPosition)
                    else 
                        local aimPoint=ccp(self.tankPosition.x+self.randMoveDirect*16,self.tankPosition.y+self.randMoveDirect*8)
                            self.randPosition=aimPoint
                        mvTo=CCMoveTo:create(1 * G_battleSpeed,aimPoint)    
                    end
                    local function moveEnd()
                        if self.container then
                           self.container:stopAllActions()
                           if self.randPosition.x~=self.tankPosition.x or self.randPosition.y~=self.tankPosition.y then --返回原位置
                               self.randPosition=self.tankPosition
                               local fmv=CCMoveTo:create(1 * G_battleSpeed,self.tankPosition)
                               local  ffunc=CCCallFuncN:create(moveEnd)
                               local  fseq=CCSequence:createWithTwoActions(fmv,ffunc)
                               self.container:runAction(fseq)
                           else
                               self.randMove=false
                           end
                        end
                    end
                    local  func=CCCallFuncN:create(moveEnd);
                    local  seq=CCSequence:createWithTwoActions(mvTo,func)
                    self.container:runAction(seq)
            --else

            --end
        end
    end

end

--坦克自己掉血
function acEatChickenTank:attackedSelf(data)
   local dataStr,dataStr2
   if data and type(data)=="string" then
      dataStr=data
   elseif data and type(data)=="table" and SizeOfTable(data)>0 and data[1] then
      dataStr=data[1]
      if data[2] then
         dataStr2=data[2]
      end
   end
   if dataStr then
      local dataTb=Split(dataStr,"-")
      local lifesub=tonumber(dataTb[1])
      local leftn1=(dataTb[2]==nil and nil or tonumber(dataTb[2]))
      local leftn=leftn1
      local lifesub2,leftn2
      local finalLeftn
      if dataStr2 then
         local dataTb2=Split(dataStr2,"-")
         lifesub2=tonumber(dataTb2[1])
         leftn2=(dataTb2[2]==nil and nil or tonumber(dataTb2[2]))
         leftn=leftn2
      end
      if leftn~=nil and lifesub~=0 then
         self.tankNumLb:setString(leftn1)
         self.curTankNums=leftn
      end
      if leftn==0 then --被摧毁
             PlayEffect(audioCfg.battle_death)
             self:playDieAnim()
         if self.parent then
            if self.area == 1 and (self.num == -1 or self.num == -2 or self.num==-3) then
            else
               self.parent:addDestoryTank(self.area,ccp(self.container:getPosition()),CCSprite:createWithSpriteFrameName("t"..self.tid.."_"..self.area.."_die"..".png"))
            end
         else
            acEatChickenBattleScene:addDestoryTank(self.area,ccp(self.container:getPosition()),CCSprite:createWithSpriteFrameName("t"..self.tid.."_"..self.area.."_die"..".png"))
         end
         self.isSpace=true
         if self.area == 1 and (self.num == -1 or self.num == -2 or self.num==-3) then
         else
            self.container:setVisible(false)
         end
         self.subLifeLb=GetBMLabel(-lifesub,G_FontSrc,30)
         self.subLifeLb:setAnchorPoint(ccp(0.5,0.5))
         if self.parent then
            self.parent:addSubLife(self.area,ccp(self.container:getPosition()),self.subLifeLb,false)
         else
            acEatChickenBattleScene:addSubLife(self.area,ccp(self.container:getPosition()),self.subLifeLb,false)
         end
      else
         self.subLifeLb=GetBMLabel(-lifesub,G_FontSrc,30)
         self.subLifeLb:setAnchorPoint(ccp(0.5,0.5))
         if self.parent then
            self.parent:addSubLife(self.area,ccp(self.container:getPosition()),self.subLifeLb,false)
         else
            acEatChickenBattleScene:addSubLife(self.area,ccp(self.container:getPosition()),self.subLifeLb,false)
         end

         if self.isAY then
            self:fireSelfByEmblem(0.1 * G_battleSpeed)
         end
      end
      if lifesub2 then
         local acArr=CCArray:create()
         local delayTime2=CCDelayTime:create(0.4 * G_battleSpeed)
         local function callbackHandler( ... )
            if self and self.container and acEatChickenBattleScene.isBattleing==true then
               if leftn2~=nil and lifesub2~=0 and self.tankNumLb then
                  self.tankNumLb:setString(leftn2)
               end
               local subLifeLb=GetBMLabel(-lifesub2,G_FontSrc,30)
               subLifeLb:setAnchorPoint(ccp(0.5,0.5))
               if self.parent then
                  self.parent:addSubLife(self.area,ccp(self.container:getPosition()),subLifeLb,false)
               else
                  acEatChickenBattleScene:addSubLife(self.area,ccp(self.container:getPosition()),subLifeLb,false)
               end
            end
         end
         local callbackfunc=CCCallFuncN:create(callbackHandler)
         acArr:addObject(delayTime2)
         acArr:addObject(callbackfunc)
         local seq=CCSequence:create(acArr)
         if self.area==1 then
            if self.parent and self.parent.r_tankLayer then
               self.parent.r_tankLayer:runAction(seq)
            else
               acEatChickenBattleScene.r_tankLayer:runAction(seq)
            end
         else
            if self.parent and self.parent.l_tankLayer then
               self.parent.l_tankLayer:runAction(seq)
            else
               acEatChickenBattleScene.l_tankLayer:runAction(seq)
            end
         end
      end

   end
end


function acEatChickenTank:removeBeAtked10074()
   if base.isNewBufPos ==1 and (self.tankId==10074 or self.tankId==10075 or acEatChickenBattleScene:hasSpcSkil(self.area,"h","a"..self.tankId)) then
      self.isBeAtkLv=nil
      self:animationCtrlByType("h")
      do return end
   end
   if self.container:getChildByTag(100) then
      self.isBeAtkLv=nil
      self.container:getChildByTag(100):removeFromParentAndCleanup(true)
   end

end

function acEatChickenTank:addBeAtked10074(lv)
   do return end
   if base.isNewBufPos ==1 then
      self:animationCtrlByType("H",lv)
      do return end
   end

   if self.container:getChildByTag(100)==nil then
      local numHeight=25
      local newsNumLabel = GetTTFLabel(lv,numHeight)
      newsNumLabel:setTag(10)
      newsNumLabel:setColor(G_ColorBlack)
      local newsIcon =CCSprite:createWithSpriteFrameName("t10074Effect.png")
      newsIcon:setTag(100)
      newsIcon:setPosition(ccp(110,60))
      newsIcon:addChild(newsNumLabel,1)
      --newsIcon:setVisible(false)
      newsNumLabel:setPosition(ccp(newsIcon:getContentSize().width/2-2,newsIcon:getContentSize().height/2-15))
      self.container:addChild(newsIcon)
   else
      local sp=self.container:getChildByTag(100)
      local lb = sp:getChildByTag(10)
      lb=tolua.cast(lb,"CCLabelTTF")
      lb:setString(lv)

   end

end


function acEatChickenTank:addBeAtkedAtama()
   do return end
      local animSp =CCSprite:createWithSpriteFrameName("atamaAmin.png")
      animSp:setOpacity(0)
      --animSp:setPosition(getCenterPoint(self.container))
      animSp:setPosition(self.container:getContentSize().width*0.5,self.container:getContentSize().height*0.5+20)
      if self.area==1 then
         animSp:setFlipX(true)
      end

      self.container:addChild(animSp)
      local fadeto1=CCFadeTo:create(0.5 * G_battleSpeed,255)
      local fadeto2=CCFadeTo:create(0.5 * G_battleSpeed,0)
      local function callBack()
         animSp:removeFromParentAndCleanup(true)
      end
      local callFunc = CCCallFuncN:create(callBack)
      local acArr=CCArray:create()
      acArr:addObject(fadeto1)
      acArr:addObject(fadeto2)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      animSp:runAction(seq)
end


function acEatChickenTank:removeBeAtked10094()
   if base.isNewBufPos ==1 and (self.tankId==10094 or self.tankId==10095 or acEatChickenBattleScene:hasSpcSkil(self.area,"j","a"..self.tankId)) then
      self.is10094BeAtkLv=nil
      self:animationCtrlByType("j")
      do return end
   end
   if self.container:getChildByTag(200) then
      self.is10094BeAtkLv=nil
      self.container:getChildByTag(200):removeFromParentAndCleanup(true)
   end

end

function acEatChickenTank:addBeAtked10094(lv)
   -- if base.isNewBufPos ==1 then
   --    self:animationCtrlByType("J",lv)
      do return end
   -- end

   if self.container:getChildByTag(200)==nil then
      local numHeight=22
      local newsNumLabel = GetTTFLabel(lv,numHeight)
      newsNumLabel:setTag(10)
      --newsNumLabel:setColor(G_ColorBlack)
      local newsIcon =CCSprite:createWithSpriteFrameName("t10094Amin2.png")
      newsIcon:setTag(200)
      newsIcon:setPosition(ccp(95,60))
      newsIcon:addChild(newsNumLabel,1)
      --newsIcon:setVisible(false)
      newsNumLabel:setPosition(ccp(newsIcon:getContentSize().width/2-2,newsIcon:getContentSize().height/2))
      self.container:addChild(newsIcon)

      local animSp =CCSprite:createWithSpriteFrameName("t10094Amin.png")
      animSp:setOpacity(0)
      animSp:setPosition(getCenterPoint(self.container))
      if self.area==1 then
         animSp:setFlipX(true)
      end

      self.container:addChild(animSp)
      local fadeto1=CCFadeTo:create(0.2 * G_battleSpeed,255)
      local fadeto2=CCFadeTo:create(0.2 * G_battleSpeed,0)
      local function callBack()
         animSp:removeFromParentAndCleanup(true)
      end
      local callFunc = CCCallFuncN:create(callBack)
      local acArr=CCArray:create()
      acArr:addObject(fadeto1)
      acArr:addObject(fadeto2)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      animSp:runAction(seq)

   else
      local sp=self.container:getChildByTag(200)
      local lb = sp:getChildByTag(10)
      lb=tolua.cast(lb,"CCLabelTTF")
      lb:setString(lv)

      local animSp =CCSprite:createWithSpriteFrameName("t10094Amin.png")
      animSp:setOpacity(0)
      if self.area==1 then
         animSp:setFlipX(true)
      end
      animSp:setPosition(getCenterPoint(self.container))
      self.container:addChild(animSp)
      local fadeto1=CCFadeTo:create(0.2 * G_battleSpeed,255)
      local fadeto2=CCFadeTo:create(0.2 * G_battleSpeed,0)
      local function callBack()
         animSp:removeFromParentAndCleanup(true)
      end
      local callFunc = CCCallFuncN:create(callBack)
      local acArr=CCArray:create()
      acArr:addObject(fadeto1)
      acArr:addObject(fadeto2)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      animSp:runAction(seq)

   end

end

--坦克被攻击 delay:延时时长 type:坦克编号 life:扣除血量 data:被攻击的数据 data数据格式 23-4 或 23  kzhz:空中轰炸  beAttackerData:被攻击者的技能效果,isFushe:"@1"技能标识,isBurst:是否爆破,isShowBullet:是否显示子弹,specShowBeAttac:被攻击时用于特殊显示
function acEatChickenTank:beAttacked(delay,type,life,data,kzhz,beAttackerData,isG,posIndex,isFushe,isBurst,isShowBullet,subLifeDetime,curBeFireNums,specShowBeAttac,useChicken,useIconTb,useIdx)
    print("*********************",data)
    local useBattleSpeed = specShowBeAttac and 1 or G_battleSpeed
    self.isWillDie=false
    local tType = type
    local t_bulletCfg=self.tankBulletCfg[tType]

    type=GetTidByTankOrder(tType)
    if isG then
      t_bulletCfg={"t10064Bullet_1_2.png","t10064Bullet_1_1.png"}

    end
   
   local bulletframeName
   if self.area==2 then
      if kzhz~=nil then
        bulletframeName="feiji2_2.png"
      else
        bulletframeName=t_bulletCfg[1]
      end

   else
      if kzhz~=nil then
          bulletframeName="feiji2_1.png"
      else
          if   t_bulletCfg[2]==nil then
                bulletframeName=t_bulletCfg[1]
          else
                bulletframeName=t_bulletCfg[2]
          end
      end
   end
   local beShellSp=CCSprite:createWithSpriteFrameName(bulletframeName)
   beShellSp:setAnchorPoint(ccp(0.5,0.5))
   
   if isFushe then
      delay = 0
      beShellSp:setOpacity(0)
   end
   if isShowBullet==false then
      beShellSp:setOpacity(0)
   end

   local dataTb=Split(data,"-")
   local lifesub=tonumber(dataTb[1])
   local leftn=(dataTb[2]==nil and nil or tonumber(dataTb[2]))
   local ismiss=false
    if lifesub==0 then
       if leftn==nil or leftn==0 then
           ismiss=true
           leftn=nil
       end

   end
   
   if lifesub>0 then
     if leftn==nil or leftn==0 then
          self.isWillDie=true
     end
   end

   local aimPos
   local planAimPos=ccp(0,0)
   local xPL,yPL=60,-80

   if self.area==1 then --右上角的坦克
        if self.parent and self.parent.r_shellLayer then
         self.parent.r_shellLayer:addChild(beShellSp)
        else
         acEatChickenBattleScene.r_shellLayer:addChild(beShellSp)
        end
        aimPos=self.rightTopPos[self.pos]
        if self.num == -1 or self.num==-3 then
           local  stPosX,stPosY=aimPos.x,aimPos.y
           local stpos = {ccp(stPosX-155,stPosY+50),ccp(stPosX-80,stPosY+31),ccp(stPosX-21,stPosY-23),ccp(stPosX-56,stPosY+126),ccp(stPosX+65,stPosY+132),ccp(stPosX+88,stPosY+58)}
            aimPos=stpos[posIndex]
        elseif self.num == -2 then
           local  stPosX,stPosY=aimPos.x,aimPos.y
           local stpos = {ccp(stPosX-155,stPosY+50),ccp(stPosX-80,stPosY+31),ccp(stPosX-21,stPosY-23),ccp(stPosX-56,stPosY+126),ccp(stPosX+65,stPosY+132),ccp(stPosX+88,stPosY+58)}
            aimPos=stpos[posIndex]
        end
        if ismiss==true then  --需要打偏
            if self.area==1 and (self.num == -1 or self.num == -2 or self.num==-3) then
            else
               aimPos=ccp(aimPos.x+xPL,aimPos.y+yPL)
            end
        end
        local bulletStartPos=ccp(0,0)
        local brato
        brato=self.l_tankBulletRotateBeAttack[type]
        
        if brato~=0 then
           if tankCfg[type].type=="1" or tankCfg[type].type=="2" then
           
           elseif tankCfg[type].type=="4" or tankCfg[type].type=="8" then
              beShellSp:setRotation((180-self.l_tankBulletRotateBeAttack[type])+self.l_tankBulletRotate[type])
           end
        end
        bulletStartPos.y=math.sin(math.rad(brato))*1000+aimPos.y
        bulletStartPos.x=math.cos(math.rad(brato))*1000*(brato==0 and -1 or 1)+aimPos.x
        if kzhz~=nil then
            
            planAimPos.y=-math.sin(math.rad(brato))*500+aimPos.y
            planAimPos.x=-math.cos(math.rad(brato))*500*(brato==0 and -1 or 1)+aimPos.x
            bulletStartPos.y=bulletStartPos.y+50
            planAimPos.y=planAimPos.y+50
        end
        beShellSp:setPosition(bulletStartPos)
   else
        --beShellSp:setPosition(self.leftDownShellEndPos[self.pos])
        if self.parent and self.parent.l_shellLayer then
         self.parent.l_shellLayer:addChild(beShellSp)
        else
         acEatChickenBattleScene.l_shellLayer:addChild(beShellSp)
        end
        aimPos=self.leftDownPos[self.pos]
        if ismiss==true then  --需要打偏
            aimPos=ccp(aimPos.x+xPL,aimPos.y+yPL)
        end
        
        
        
        local bulletStartPos=ccp(0,0)
        local brato
        brato=self.r_tankBulletRotateBeAttack[type]
        
        if brato~=0 then
           if type<=10 then
    
           elseif type>=11 then
              beShellSp:setRotation((180-self.r_tankBulletRotateBeAttack[type])+self.r_tankBulletRotate[type])
           end
        end
        bulletStartPos.y=math.sin(math.rad(brato))*1000+aimPos.y
        bulletStartPos.x=math.cos(math.rad(brato))*1000+aimPos.x
         if kzhz~=nil then
            
            planAimPos.y=-math.sin(math.rad(brato))*500+aimPos.y
            planAimPos.x=-math.cos(math.rad(brato))*1000+aimPos.x
            bulletStartPos.y=bulletStartPos.y+50
            planAimPos.y=planAimPos.y+50
        end

        beShellSp:setPosition(bulletStartPos)
   end

   local function moveEnd()

      if ismiss==false and (self.tankId==10074 or self.tankId==10075 or acEatChickenBattleScene:hasSpcSkil(self.area,"h","a"..self.tankId)) then
         if self.isBeAtkLv==nil then
            self.isBeAtkLv=0
         end
         if (tonumber(dataTb[3])==1) then--暴击+1层
            self.isBeAtkLv=self.isBeAtkLv+2
         else
            self.isBeAtkLv=self.isBeAtkLv+1
         end
         self:addBeAtked10074(self.isBeAtkLv)
      end
      if ismiss==false and (self.tankId==10134 or self.tankId ==10135 or (self.tankId==10133 and acEatChickenBattleScene:hasSpcSkil(self.area,"m","a"..self.tankId))) and self.isAtamaTankAbility==true then
         self.isAtamaTankAbility=false
         self:addBeAtkedAtama()
      end


      if ismiss==false and (self.tankId==10094 or self.tankId==10095 or acEatChickenBattleScene:hasSpcSkil(self.area,"j","a"..self.tankId)  ) then
         if self.is10094BeAtkLv==nil then 
            self.is10094BeAtkLv=0
         end
         if (tonumber(dataTb[3])==1) then--暴击+1层
            self.is10094BeAtkLv=self.is10094BeAtkLv+2
         else
            self.is10094BeAtkLv=self.is10094BeAtkLv+1
         end
         self:addBeAtked10094(self.is10094BeAtkLv)
      end
        
        beShellSp:stopAllActions()
        beShellSp:removeFromParentAndCleanup(true)
        beShellSp=nil
        
        if self.isSpace==false then
                if ismiss==false then
                    self.tankNumLb:setString(leftn)
                    self.curTankNums=leftn
                end
        end

        if self.isSpace==false then
                if leftn==0 or useChicken then --被摧毁
                     local function tankDie(isBurst1)
                        PlayEffect(audioCfg.battle_death)
                        if self and self.container then
                              if isBurst1 and isBurst1==true then
                              else
                                 -- self:playDieAnim()
                              end
                              if self.parent then
                                 if self.area==1 and (self.num == -1 or self.num == -2 or self.num==-3) then
                                    self:addDestoryBossTank()
                                 else
                                    self.parent:mapShake(self.area)
                                    self.parent:addDestoryTank(self.area,ccp(self.container:getPosition()),CCSprite:createWithSpriteFrameName("t"..self.tid.."_"..self.area.."_die"..".png"))
                                 end
                              else
                                 acEatChickenBattleScene:mapShake(self.area)  
                                 acEatChickenBattleScene:addDestoryTank(self.area,ccp(self.container:getPosition()),CCSprite:createWithSpriteFrameName("t"..self.tid.."_"..self.area.."_die"..".png"))
                              end
                              if self.area == 1 and (self.num == -1 or self.num == -2 or self.num==-3) then
                              else
                                 self.container:setVisible(false)
                              end
                        end
                     end
                     if isBurst==true then
                        local function burstAnimHandler( ... )
                           --爆破动画
                           if self and self.container and acEatChickenBattleScene.isBattleing==true then
                              self:playBurst()
                           end
                        end
                        local function dieHandler( ... )
                           if acEatChickenBattleScene.isBattleing==true then
                              tankDie(isBurst)
                           end
                        end
                        local delayTime1=CCDelayTime:create(0.5 * useBattleSpeed)
                        local delayTime2=CCDelayTime:create(0.8 * useBattleSpeed)
                        local burstAnimFunc=CCCallFuncN:create(burstAnimHandler)
                        local dieFunc=CCCallFuncN:create(dieHandler)
                        local acArr=CCArray:create()
                        acArr:addObject(delayTime1)
                        acArr:addObject(burstAnimFunc)
                        acArr:addObject(delayTime2)
                        acArr:addObject(dieFunc)
                        local seq=CCSequence:create(acArr)
                        if self.area==1 then
                           if self.parent and self.parent.l_tankLayer then
                              self.parent.l_tankLayer:runAction(seq)
                           else
                              acEatChickenBattleScene.l_tankLayer:runAction(seq)
                           end
                        else
                           if self.parent and self.parent.l_tankLayer then
                              self.parent.l_tankLayer:runAction(seq)
                           else
                              acEatChickenBattleScene.l_tankLayer:runAction(seq)
                           end
                        end
                     elseif specShowBeAttac then
                           if tostring(specShowBeAttac) == "beAttInCityGun" then
                              self:showBeAttInCityGun(tankDie)
                              PlayEffect(audioCfg.tank_hit_4)
                           end
                     else
                        tankDie()
                     end
                else
                     if specShowBeAttac then
                           if tostring(specShowBeAttac) == "beAttInCityGun" then
                              self:showBeAttInCityGun()
                              PlayEffect(audioCfg.tank_hit_4)
                           end
                     else
                           local effectPath
                           if tankCfg[type].type=="1" then
                              effectPath=audioCfg.tank_hit_1
                           elseif tankCfg[type].type=="2" then
                              effectPath=audioCfg.tank_hit_2
                           elseif tankCfg[type].type=="4" then
                              effectPath=audioCfg.tank_hit_3
                           elseif tankCfg[type].type=="8" then
                              effectPath=audioCfg.tank_hit_4
                           end
                           PlayEffect(effectPath)
                     end
                end
                if useChicken then
                  local addSp = CCSprite:createWithSpriteFrameName("kfc_1.png")
      --addSp:setPosition(getCenterPoint(self.container))
                  addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y+80))
                  self.container2:addChild(addSp,9)

                  local pzArr=CCArray:create()
                  for kk=1,24 do
                      local nameStr="kfc_"..kk..".png"
                      local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                      pzArr:addObject(frame)
                  end
                  local animation=CCAnimation:createWithSpriteFrames(pzArr)
                  animation:setDelayPerUnit(0.04 * G_battleSpeed)
                  local animate=CCAnimate:create(animation)
                  local function callBack()
                     addSp:removeFromParentAndCleanup(true)
                  end
                  local callFunc=CCCallFunc:create(callBack)
                  local seq=CCSequence:createWithTwoActions(animate,callFunc)
                  addSp:runAction(seq)
                            -- for eindex=1,#beAttackerData do
                            --     self:animationCtrlByType(beAttackerData[eindex])
                            -- end
               end
        else
                        local effectPath
                        if tankCfg[type].type=="1" then
                           effectPath=audioCfg.tank_hit_1
                        elseif tankCfg[type].type=="2" then
                           effectPath=audioCfg.tank_hit_2
                        elseif tankCfg[type].type=="4" then
                           effectPath=audioCfg.tank_hit_3
                        elseif tankCfg[type].type=="8" then
                           effectPath=audioCfg.tank_hit_4
                        end
                        
                        PlayEffect(effectPath)
        end
        if self.isSpace==false then
                --播放扣除血量动画
                if ismiss==true then
                    self.subLifeLb=CCSprite:createWithSpriteFrameName("MISS.png")
                    --GetBMLabel("miss",G_MissSrc,30)
                    local scaleTo1=CCScaleTo:create(0.3 * useBattleSpeed,1)
                    local scaleTo2=CCScaleTo:create(1 * useBattleSpeed,0.8)
                    local acArr=CCArray:create()
                    acArr:addObject(scaleTo1)
                    acArr:addObject(scaleTo2)
                    local seq=CCSequence:create(acArr)
                    self.subLifeLb:runAction(seq)
                else
                    self.subLifeLb=GetBMLabel(-lifesub,G_FontSrc,30)
                    self.subLifeLb:setVisible(false)
                    if self.subLifeLb and lifesub==0 then
                        self.subLifeLb:setVisible(false)
                     end
                     if self.area==1 and self.num==-1 then
                        if BossBattleVoApi then
                           BossBattleVoApi:setBossOldHp(lifesub)
                           self:addDestoryBossTank()
                        end
                     elseif self.area==1 and self.num==-2 then
                        if acNewYearsEveVoApi then
                           acNewYearsEveVoApi:setBossOldHp(lifesub)
                           self:addDestoryBossTank()
                        end
                     elseif self.area==1 and self.num==-3 then
                        if allianceFubenVoApi then
                           allianceFubenVoApi:setBossOldHp(lifesub)
                           self:addDestoryBossTank()
                        end  
                     end                    
                end
                self.subLifeLb:setAnchorPoint(ccp(0.5,0.5))
                local bj=(tonumber(dataTb[3])==1)
                
               if useChicken then
                  local addSp = CCSprite:createWithSpriteFrameName("kfc_1.png")
      --addSp:setPosition(getCenterPoint(self.container))
                  addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y+80))
                  self.container2:addChild(addSp,9)

                  local pzArr=CCArray:create()
                  for kk=1,24 do
                      local nameStr="kfc_"..kk..".png"
                      local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                      pzArr:addObject(frame)
                  end
                  local animation=CCAnimation:createWithSpriteFrames(pzArr)
                  animation:setDelayPerUnit(0.04 * G_battleSpeed)
                  local animate=CCAnimate:create(animation)
                  local function callBack()
                     addSp:removeFromParentAndCleanup(true)
                  end
                  local callFunc=CCCallFunc:create(callBack)
                  local seq=CCSequence:createWithTwoActions(animate,callFunc)
                  addSp:runAction(seq)
                            -- for eindex=1,#beAttackerData do
                            --     self:animationCtrlByType(beAttackerData[eindex])
                            -- end
               end
                
               if self.parent then

                  if self.area==1 and (self.num == -1 or self.num == -2 or self.num==-3) then
                     self.parent:addSubLife(self.area,aimPos,self.subLifeLb,bj,subLifeDetime)
                  else
                     self.parent:addSubLife(self.area,ccp(self.container:getPosition()),self.subLifeLb,bj,subLifeDetime)
                  end
               else
                  acEatChickenBattleScene:addSubLife(self.area,ccp(self.container:getPosition()),self.subLifeLb,bj,subLifeDetime)
               end
                --播放克制动画

        else
              if tankCfg[type].type=="8" then
                  local digFrameIndex=math.ceil((deviceHelper:getRandom()/100)*3)
                  if digFrameIndex==0 then
                      digFrameIndex=1
                  end
                  local digSp=CCSprite:createWithSpriteFrameName("keng_"..digFrameIndex..".png")
                  digSp:setAnchorPoint(ccp(0.5,0.5))
                  local scaleOffset=self.tankLv[type]
                  digSp:setScale(0.3+scaleOffset*0.03)
                  if self.parent then
                     if self.area==1 and (self.num == -1 or self.num == -2 or self.num==-3) then
                        self.parent:addDig(self.area,aimPos,digSp)
                     else
                        self.parent:addDig(self.area,ccp(self.container:getPosition()),digSp)
                     end
                  else
                     acEatChickenBattleScene:addDig(self.area,ccp(self.container:getPosition()),digSp)
                  end
                   local spcSp=CCSprite:createWithSpriteFrameName("miss2_1.png")
                  local  spcArr=CCArray:create()
                   
                           for kk=1,15 do
                                local nameStr="miss2_"..kk..".png"
                                local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                                spcArr:addObject(frame)
                           end
                   local animation=CCAnimation:createWithSpriteFrames(spcArr)
                   animation:setDelayPerUnit(0.08 * useBattleSpeed)
                   local animate=CCAnimate:create(animation)
                   spcSp:setAnchorPoint(ccp(0.5,0.5))
                   spcSp:setPosition(ccp(digSp:getContentSize().width/2,digSp:getContentSize().height/2))
                   digSp:addChild(spcSp)
                   spcSp:setScale(3)
                   spcSp:runAction(animate)

                  local function subMvEnd()
                        digSp:removeFromParentAndCleanup(true)
                  end
                  local  subfunc=CCCallFuncN:create(subMvEnd);
                  local  subseq=CCSequence:createWithTwoActions(CCDelayTime:create(10 * useBattleSpeed),subfunc)
                  digSp:runAction(subseq)
              end
        end
        if leftn==0 then
            self.isSpace=true
        end
        --播放命中动画

          local beAtEffect=self.beAttackedEffect[type]
          local mzFrameName
          if ismiss==true then
             mzFrameName="miss_1.png"
          else
             mzFrameName="newhit"..beAtEffect.."_1.png" --命中动画
          end
          local mzSp=CCSprite:createWithSpriteFrameName(mzFrameName)
          if ismiss==false then
               mzSp:setScale(self.beAttackedEffectScale[beAtEffect])
          end
          local  mzArr=CCArray:create()
          
          if ismiss==true then
                  for kk=1,13 do
                       local nameStr="miss_"..kk..".png"
                       local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                       mzArr:addObject(frame)
                  end
           else
                  for kk=1,self.beAttackedEffectFrameCount[beAtEffect] do
                       local nameStr="newhit"..beAtEffect.."_"..kk..".png"
                       local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                       mzArr:addObject(frame)
                  end
          end
          local animation=CCAnimation:createWithSpriteFrames(mzArr)
          animation:setDelayPerUnit(0.08 * useBattleSpeed)
          local animate=CCAnimate:create(animation)
          if self.area==1 and (self.num == -1 or self.num == -2 or self.num==-3) then
            if self.parent then
               mzSp:setPosition(aimPos)
               self.parent.r_tankLayer:addChild(mzSp,20)
            end
          else
            if self.area==1 and acEatChickenBattleScene then
               mzSp:setPosition(aimPos)
               acEatChickenBattleScene.r_tankLayer:addChild(mzSp,20)
            else
               self.container:addChild(mzSp,20)
            end
          end 
          local function callNextAttack( )
              -- print("curBeFireNums---type(tid)---->",curBeFireNums,type)
              if curBeFireNums and curBeFireNums <= 0 and self.alsoparent and self.alsoparent.tankBeAttackAnimationFinish then
                   -- print("fire ready goto tankBeAttackAnimationFinish~~~~~")
                   self.alsoparent:tankBeAttackAnimationFinish()
              end
          end 
          local function mzEnd()
              mzSp:stopAllActions()
              mzSp:removeFromParentAndCleanup(true)
              mzSp=nil
          end
          local callDelayTime = 0.6--isBurst and 1 or 0.6
          local  delay1 =CCDelayTime:create(callDelayTime * useBattleSpeed)
          local  delay2 =CCDelayTime:create(0.3 * useBattleSpeed)
          local  mzArr = CCArray:create()
          local  mzArr2 = CCArray:create()
          local  mzNextAttack = CCCallFuncN:create(callNextAttack)
          local  mzfunc=CCCallFuncN:create(mzEnd);
          mzArr2:addObject(delay1)
          mzArr2:addObject(mzNextAttack)
          mzArr:addObject(animate)
          mzArr:addObject(delay2)
          mzArr:addObject(mzfunc)
          local  seq= CCSequence:create(mzArr)
          local  seq2= CCSequence:create(mzArr2)
          local mzArr3 = CCArray:create()
          mzArr3:addObject(seq)
          mzArr3:addObject(seq2)
          local spawn=CCSpawn:create(mzArr3)
          mzSp:runAction(spawn)

   end
   local delay=CCDelayTime:create(delay * useBattleSpeed)
   local shellMV
   if self.tankWithBulletAnim[type]~=nil then

                     local bulletAnimArr=CCArray:create()
                     for kk=1,6 do
                        local nameStr="ciBaoBullet_1_"..kk..".png"
                        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                        bulletAnimArr:addObject(frame)
                     end
                     for kk=1,6 do
                        local nameStr="ciBaoBullet_1_"..kk..".png"
                        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                        bulletAnimArr:addObject(frame)
                     end

                     local animation=CCAnimation:createWithSpriteFrames(bulletAnimArr)
                     animation:setDelayPerUnit(0.06 * useBattleSpeed)
                     local amiAc=CCAnimate:create(animation)
                     
                     
                     local function showCBBeAttackedAnim()

                         local beAttackedSP=CCSprite:createWithSpriteFrameName("newhit6_1.png")
                         beAttackedSP:setAnchorPoint(ccp(0.5,0.5))

                         local beAttackedAnimArr=CCArray:create()
                          for kk=1,6 do
                            local nameStr="newhit6_"..kk..".png"
                            local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                            beAttackedAnimArr:addObject(frame)
                         end
                         
                         for kk=1,6 do
                            local nameStr="newhit6_"..kk..".png"
                            local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                            beAttackedAnimArr:addObject(frame)
                         end

                          local animation=CCAnimation:createWithSpriteFrames(beAttackedAnimArr)
                          animation:setDelayPerUnit(0.1 * useBattleSpeed)
                           local animate=CCAnimate:create(animation)
                          
                          local function rmBeAttackedSP()
                             
                                    beAttackedSP:stopAllActions()
                                    beAttackedSP:removeFromParentAndCleanup(true)
                                    beAttackedSP=nil
                          end
                          
                           local  rmSPfunc=CCCallFuncN:create(rmBeAttackedSP)

                          local seq=CCSequence:createWithTwoActions(animate,rmSPfunc)

                          beAttackedSP:runAction(seq)

                          beAttackedSP:setPosition(aimPos)
                          beAttackedSP:setScale(2)
                          beShellSp:getParent():addChild(beAttackedSP,20)

                     end
                     
                     local  mzfunc=CCCallFuncN:create(showCBBeAttackedAnim);

                     local carray=CCArray:create()
                     carray:addObject(amiAc)
                     if ismiss~=true then
                         carray:addObject(mzfunc)
                     end
                     shellMV=CCSpawn:create(carray)
                     
                     if self.area==1 then
                         beShellSp:setAnchorPoint(ccp(1,0.5))
                         beShellSp:setScale(self.tankWithBulletAnim[type])
                         beShellSp:setPosition(aimPos)
                         beShellSp:setRotation(self.r_tankBulletRotate[type])
                     else
                         beShellSp:setAnchorPoint(ccp(0,0.5))
                         beShellSp:setScale(self.tankWithBulletAnim[type])
                         beShellSp:setPosition(aimPos)
                         beShellSp:setRotation(self.l_tankBulletRotate[type])
                     end
                     beShellSp:setVisible(false)
   else
       shellMV=CCMoveTo:create(kzhz==nil and 0.3 or 2,kzhz==nil and aimPos or planAimPos)
   end
   
   local function delayEnd()
   
      beShellSp:setVisible(true)
   end
   
   local ffunc2=CCCallFuncN:create(delayEnd)
   
   local  ffunc=CCCallFuncN:create(moveEnd)
   local  actionArr=CCArray:create()
   actionArr:addObject(delay)
   actionArr:addObject(ffunc2)
   actionArr:addObject(shellMV)
   actionArr:addObject(ffunc)
   local  fseq=CCSequence:create(actionArr)
   beShellSp:runAction(fseq)  
   return leftn
end

function acEatChickenTank:playDieAnim() --播放死亡烟雾动画

    local dieSp=CCSprite:createWithSpriteFrameName("die_1.png")
    local dieScaleTb={0.65,0.75,0.85,0.95,1}
    local scaleRate=self.tid%5
    
    if scaleRate==0 then
        scaleRate=5
    end
    dieSp:setScale(dieScaleTb[scaleRate])

   local animArr=CCArray:create()
   
     for kk=1,18 do
        local nameStr="die_"..kk..".png"
        local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
        animArr:addObject(frame)
     end
     --dieSp:setPosition(ccp(self.container:getPosition()))
     
     local function spCallBack()
        dieSp:stopAllActions()
        dieSp:removeFromParentAndCleanup(true)
     end
     local funcHandler=CCCallFunc:create(spCallBack)
     
     local animation=CCAnimation:createWithSpriteFrames(animArr)
     animation:setDelayPerUnit(0.1 * G_battleSpeed)
     local animate=CCAnimate:create(animation)
     local seq=CCSequence:createWithTwoActions(animate,funcHandler)   
     dieSp:runAction(seq)
     dieSp:setAnchorPoint(ccp(0.5,0))
     local addX,addY=self.container:getPosition()
     if self.parent then
      self.parent:addDie(self.area,ccp(addX,addY-70),dieSp)
     else
      acEatChickenBattleScene:addDie(self.area,ccp(addX,addY-70),dieSp)
     end
end

--播放爆破动画
function acEatChickenTank:playBurst()
      if self and self.container then
         -- self.container:stopAllActions()
         
         local burstSp=CCSprite:createWithSpriteFrameName("burstEffect0.png")
         local burstArr=CCArray:create()
         for kk=0,23 do
            local nameStr="burstEffect"..kk..".png"
            local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
            burstArr:addObject(frame)
         end
         local animation=CCAnimation:createWithSpriteFrames(burstArr)
         animation:setDelayPerUnit(0.05 * G_battleSpeed)
         local animate=CCAnimate:create(animation)
         local moveAnimArr=CCArray:create()
         moveAnimArr:addObject(animate)
         local speedNum=8
         local delay=1.25
         local mapmoveBy
         if self.parent and self.parent.mapmoveBy then
            mapmoveBy=self.parent.mapmoveBy
         else
            mapmoveBy=acEatChickenBattleScene.mapmoveBy
         end
         --看上去不动，和地图移动方向相反
         if self.area==1 then
            local disPos=ccp(mapmoveBy[1].x/speedNum*delay,mapmoveBy[1].y/speedNum*delay)
            local leftMoveBy=CCMoveBy:create(delay, disPos)
            moveAnimArr:addObject(leftMoveBy)
         else
            local disPos=ccp(mapmoveBy[2].x/speedNum*delay,mapmoveBy[2].y/speedNum*delay)
            local rightMoveBy=CCMoveBy:create(delay, disPos)
            moveAnimArr:addObject(rightMoveBy)
         end
         local moveAnimSpawn=CCSpawn:create(moveAnimArr)
         local function moveEndHandler( ... )
            if burstSp then
               burstSp:stopAllActions()
               burstSp:removeFromParentAndCleanup(true)
               burstSp=nil
            end
         end
         local funcHandler=CCCallFunc:create(moveEndHandler)
         local seq=CCSequence:createWithTwoActions(moveAnimSpawn,funcHandler)
         burstSp:runAction(seq)
         local addX,addY=self.container:getPosition()
         if self.parent then
            self.parent:addBurst(self.area,ccp(addX,addY),burstSp)
         else
            acEatChickenBattleScene:addBurst(self.area,ccp(addX,addY),burstSp)
         end
      end
end

function acEatChickenTank:animationCtrlByType(type,index,isPlaneShow,curDelayT)
  -- if acEatChickenBattleScene.isBattleing==false or self.container==nil or type== nil then
        do return end
  -- end
   -- bufPicDataTb={},--显示坦克buf debuf 图片的 数据信息（存放sp,buf的key,排列位置）
   -- bufAllTb={},--保存当前坦克所拥有的所有buf,debuf的key 对应value 为最高层数
   -- bufShowMask,--显示buf图片的容器
  if base.isNewBufPos ==1 and isPlaneShow == nil then

     local typeTB1=Split(type,"0")
     local typeTB2=Split(type,"1")
     if typeTB1 then
         type=typeTB1[1] --or typeTB1[2]
     elseif typeTB2 then
         type=typeTB2[1] --or typeTB2[2]
     end

     local skillNameTb = abilityCfg[string.lower(type)]
     if skillNameTb ==nil  then
         -- print("error~~~~~",type)--防BUG使用，调试开发新技能的时候 可以注释掉这段代码
         -- do return end
     else
           local skillLastIdx = SizeOfTable(skillNameTb)
           local skillName = skillNameTb[skillLastIdx]
           if skillName and skillName.buffIcon then--string.lower() 对KEY进行小写转换 

              local iconName = skillName.buffIcon
              local abilBufType  = skillName.buffType
              if self.bufShowMask ==nil then
                  local layerNum = 6
                  local capInSet = CCRect(5, 5, 1, 1);
                  local function showAllSkill() 
                     if self.bufAllTb and SizeOfTable(self.bufAllTb)>0 then
                        self.bufSmallDialog=tankBufSmallDialog:new(layerNum,self.tankId,self.curTankNums)
                        local bufSmallDialog= self.bufSmallDialog:init(self.bufAllTb)
                     end
                  end
                  local touchMask = LuaCCScale9Sprite:createWithSpriteFrameName("BlackAlphaBg.png",capInSet,showAllSkill)
                  touchMask:setAnchorPoint(ccp(0.5,0.5))
                  touchMask:setTouchPriority(-(layerNum-1) * 20 - 1)
                  touchMask:setOpacity(0)
                  touchMask:setContentSize(CCSizeMake(100,100))
                  touchMask:setPosition(getCenterPoint(self.container))
                  self.container:addChild(touchMask,11)

                  local function noData( ) end 
                  self.bufShowMask =LuaCCScale9Sprite:createWithSpriteFrameName("BlackAlphaBg.png",capInSet,noData)
                  self.bufShowMask:setAnchorPoint(ccp(0,0))
                  self.bufShowMask:setOpacity(0)
                  self.bufShowMask:setContentSize(CCSizeMake(120,40))
                  if self.area ==1 then
                     self.bufShowMask:setPosition(self.rightBufPosSet[self.pos])
                  else
                     self.bufShowMask:setPosition(self.leftBufPosSet[self.pos])
                  end
                  touchMask:addChild(self.bufShowMask,11)
              end
              if string.find(type,"[A-Z]")  then
                  if self.bufAllTb[type] ==nil then
                     self.bufAllTb[type] ={iconName=iconName,key=type,idx=SizeOfTable(self.bufAllTb)+1,abilBufType=abilBufType}
                     if skillName.SpTop then
                        local num = 1
                        if (type=="J" or type=="H") and index then
                           num =tonumber(index)
                        end
                        self.bufAllTb[type].num =num
                     elseif type=="AG" then
                        self.bufAllTb[type].num =3
                     end
                  elseif skillName.SpTop and self.bufAllTb[type].num < skillName.SpTop then
                     self.bufAllTb[type].num =self.bufAllTb[type].num+1
                     if (type=="J" or type=="H") and index then
                        self.bufAllTb[type].num =tonumber(index)
                     end
                  elseif type=="AG" then
                     self.bufAllTb[type].num =3
                  end
                  for k,v in pairs(self.bufAllTb) do
                        if v.abilBufType ==1 and self.bufAllTb[type].abilBufType == 0 and v.idx<self.bufAllTb[type].idx then
                           local takeIdx = self.bufAllTb[type].idx
                           self.bufAllTb[type].idx=v.idx
                           v.idx = takeIdx
                           if self.bufAllTb[type].idx <3 and v.iconSp then
                              v.iconSp:setPosition(ccp(self.bufShowMask:getContentSize().height*(v.idx-1),self.bufShowMask:getContentSize().height*0.5))
                              v.iconSp:setVisible(true)
                           end
                        end
                        if v.idx >3 and v.iconSp then
                           v.iconSp:setVisible(false)
                        end
                  end
                  if self.bufAllTb[type].idx<4 then
                     
                     if self.bufAllTb[type].iconSp ==nil then
                        local idx = self.bufAllTb[type].idx
                        local iconSp = CCSprite:createWithSpriteFrameName(self.bufAllTb[type].iconName)
                        iconSp:setAnchorPoint(ccp(0,0.5))
                        iconSp:setPosition(ccp(self.bufShowMask:getContentSize().height*(idx-1),self.bufShowMask:getContentSize().height*0.5))
                        iconSp:setScale(self.bufShowMask:getContentSize().height/iconSp:getContentSize().height)
                        self.bufShowMask:addChild(iconSp,10)
                        self.bufAllTb[type].iconSp = iconSp

                        if self.bufAllTb[type].num then
                           local numBg = CCSprite:createWithSpriteFrameName("numBg.png")
                           numBg:setAnchorPoint(ccp(1,0))
                           numBg:setPosition(ccp(iconSp:getContentSize().width-8,8))
                           iconSp:addChild(numBg)
                           numBg:setScale(self.bufShowMask:getContentSize().height*0.8/numBg:getContentSize().height)

                           local num = self.bufAllTb[type].num
                           local numStr = GetTTFLabel(num,23)
                           numStr:setAnchorPoint(ccp(0.5,0.5))
                           numStr:setPosition(getCenterPoint(numBg))
                           numBg:addChild(numStr)
                           numStr:setScale(numBg:getContentSize().height/numStr:getContentSize().height)
                           self.bufAllTb[type].numStr=numStr
                        end
                     else
                        if self.bufAllTb[type].numStr then
                           tolua.cast(self.bufAllTb[type].numStr,"CCLabelTTF"):setString(self.bufAllTb[type].num)
                        end
                     end
                  -- elseif 
                  end
                  if SizeOfTable(self.bufAllTb) > 3 and SizeOfTable(self.moreBufShow) ==0 then
                     --创建省略号 告知玩家还有更多的BUF没有显示
                     for i=1,3 do
                        local pointPic = CCSprite:createWithSpriteFrameName("pointPic.png")
                        pointPic:setAnchorPoint(ccp(0,0))
                        pointPic:setPosition(ccp(self.bufShowMask:getContentSize().height*3+(i*8),5))
                        -- pointPic:setScale()
                        pointPic:setVisible(false)
                        self.bufShowMask:addChild(pointPic,10)
                        table.insert(self.moreBufShow,pointPic)

                        local function runShow()
                           self.moreBufShow[i]:setVisible(true)
                        end
                        local function runHide()
                           self.moreBufShow[i]:setVisible(false)
                        end
                        local callFunc1=CCCallFuncN:create(runShow)
                        local callFunc2=CCCallFuncN:create(runHide)
                        local acArr=CCArray:create()
                        local delaTime1 = CCDelayTime:create(i*0.8)
                        local delaTime2 = CCDelayTime:create((4-i)*0.8)
                        acArr:addObject(delaTime1)
                        acArr:addObject(callFunc1)
                        acArr:addObject(delaTime2)
                        acArr:addObject(callFunc2)
                        local seq = CCSequence:create(acArr)
                        local repeatForever=CCRepeatForever:create(seq)
                        self.moreBufShow[i]:runAction(repeatForever)
                     end
                  end

               elseif string.find(type,"[a-z]") then
                  local Type = string.upper(type)
                  if self.bufAllTb[Type] ==nil then
                     do return end
                  end

                  local idx = self.bufAllTb[Type].idx
                  if idx<5 and SizeOfTable(self.moreBufShow) >0 then --清除 省略号
                     for i=1,SizeOfTable(self.moreBufShow) do
                        self.moreBufShow[i]:removeFromParentAndCleanup(true)
                        self.moreBufShow[i]=nil
                     end
                     self.moreBufShow={}
                  end
                  if type=="ag" and  self.bufAllTb[Type].num>1 then--特殊处理 ag 减层数显示
                        self.bufAllTb[Type].num = self.bufAllTb[Type].num-1
                        tolua.cast(self.bufAllTb[Type].numStr,"CCLabelTTF"):setString(self.bufAllTb[Type].num)
                  else
                     local oldIdx = idx
                     if oldIdx < 4 then
                        self.bufAllTb[Type].iconSp:removeFromParentAndCleanup(true)
                        self.bufAllTb[Type].iconSp =nil
                        self.is10094BeAtkLv=nil
                        self.isBeAtkLv=nil
                     end
                     self.bufAllTb[Type] =nil
                     local newTb = {}
                     for k,v in pairs(self.bufAllTb) do
                        if v then
                           newTb[k]=v
                        end
                     end
                     self.bufAllTb = newTb

                     for k,v in pairs(self.bufAllTb) do
                        if v.idx > oldIdx and v.idx > 1 then
                           v.idx =v.idx-1
                           -- newIdx =newIdx+1
                           if v.idx< 4 then
                              if v.iconSp ==nil then
                                 local idx = v.idx
                                 local iconSp = CCSprite:createWithSpriteFrameName(v.iconName)
                                 iconSp:setAnchorPoint(ccp(0,0.5))
                                 iconSp:setPosition(ccp(self.bufShowMask:getContentSize().height*(idx-1),self.bufShowMask:getContentSize().height*0.5))
                                 iconSp:setScale(self.bufShowMask:getContentSize().height/iconSp:getContentSize().height)
                                 self.bufShowMask:addChild(iconSp,10)
                                 v.iconSp = iconSp
                                 if v.num then
                                    local num = v.num
                                    local numStr = GetTTFLabel(num,23)
                                    numStr:setAnchorPoint(ccp(1,0))
                                    numStr:setPosition(ccp(iconSp:getContentSize().width,0))
                                    iconSp:addChild(numStr)
                                    v.numStr =numStr
                                 end
                              else 
                                 v.iconSp:setPosition(ccp(self.bufShowMask:getContentSize().height*(v.idx-1),self.bufShowMask:getContentSize().height*0.5))
                                 v.iconSp:setVisible(true)
                              end
                           elseif v.iconSp then
                              v.iconSp:setVisible(false)
                           end
                        end
                     end
                     
                  end
               end
               do return end
           end
      end
  end
  if type=="A" then
     if self.container:getChildByTag(101) then
        do return end
     end
     
     if self.container:getChildByTag(106) then
        self.container:getChildByTag(106):setPosition(ccp(getCenterPoint(self.container).x+80,getCenterPoint(self.container).y+30))
     end

     local  addSp1 = CCSprite:createWithSpriteFrameName("Pushdown_1.png")
     local  addSp2 = CCSprite:createWithSpriteFrameName("Pushdown_2.png")
     addSp2:setPosition(ccp(27,10))
     addSp1:addChild(addSp2,1)
     addSp1:setPosition(ccp(getCenterPoint(self.container).x+40,getCenterPoint(self.container).y+30))
     --addSp1:setPosition(getCenterPoint(self.container))
     self.container:addChild(addSp1,10)
     addSp1:setTag(101)

     local moveTo1=CCMoveTo:create(0.2 ,CCPointMake(addSp2:getPositionX(),addSp2:getPositionY()-5))
     local moveTo2=CCMoveTo:create(0.2 ,CCPointMake(addSp2:getPositionX(),addSp2:getPositionY()))
     local acArr=CCArray:create()
     acArr:addObject(moveTo1)
     acArr:addObject(moveTo2)
     local seq=CCSequence:create(acArr)
     local repeatForever=CCRepeatForever:create(seq)
     addSp2:runAction(repeatForever)
  elseif type=="B" then
      if self.container:getChildByTag(102) then
        do return end
      end
      local addSp = CCSprite:createWithSpriteFrameName("Sheild_1.png")
      addSp:setPosition(getCenterPoint(self.container))
      self.container:addChild(addSp,10)
      addSp:setTag(102)

      local pzArr=CCArray:create()
      for kk=1,3 do
          local nameStr="Sheild_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.1)
      local animate=CCAnimate:create(animation)
      
      local repeatForever=CCRepeatForever:create(animate)
      addSp:runAction(repeatForever)
  elseif type=="C" then
      if self.container:getChildByTag(103) then
        do
          return
        end
      end
      local addSp = CCSprite:createWithSpriteFrameName("Aim_1.png")
      addSp:setPosition(getCenterPoint(self.container))
      self.container:addChild(addSp,11)
      addSp:setTag(103)

      local scaleTo1=CCScaleTo:create(0.2,1.5)
      local scaleTo2=CCScaleTo:create(0.2,1)
      local acArr=CCArray:create()
      acArr:addObject(scaleTo1)
      acArr:addObject(scaleTo2)
      local seq=CCSequence:create(acArr)
      local repeatForever=CCRepeatForever:create(seq)
      addSp:runAction(repeatForever)
  elseif type=="D" or type=="AY" then
      local typeTag=104
      if self.sameBuffNum[typeTag]==nil then
         self.sameBuffNum[typeTag]={}
      end
      self.sameBuffNum[typeTag][type]=1
      if self.container:getChildByTag(typeTag) then
        do
          return
        end
      end
      if type== "AY" then
         self.isAY = true
         -- local addSp2 = CCSprite:createWithSpriteFrameName("sFlame_1.png")
         -- addSp2:setPosition(getCenterPoint(self.container))
         -- self.container:addChild(addSp2,9)

         -- local pzArr=CCArray:create()
         -- for kk=1,3 do
         --     local nameStr="sFlame_"..kk..".png"
         --     local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
         --     pzArr:addObject(frame)
         -- end
         -- local animation=CCAnimation:createWithSpriteFrames(pzArr)
         -- animation:setDelayPerUnit(0.1)
         -- local animate=CCAnimate:create(animation)
         -- local repeatSp =CCRepeat:create(animate, 3);

         -- local function animationCall( )
         --       addSp2:removeFromParentAndCleanup(true)
         -- end 
         -- local ccfun = CCCallFunc:create(animationCall)
         -- local arr = CCArray:create()
         -- arr:addObject(repeatSp)
         -- arr:addObject(ccfun)
         -- local seq = CCSequence:create(arr)
         -- addSp2:runAction(seq)
      end

      local addSp = CCSprite:createWithSpriteFrameName("Flame_1.png")
      addSp:setPosition(getCenterPoint(self.container))
      self.container:addChild(addSp,9)
      addSp:setTag(typeTag)

      local pzArr=CCArray:create()
      for kk=1,3 do
          local nameStr="Flame_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.1)
      local animate=CCAnimate:create(animation)
      
      local repeatForever=CCRepeatForever:create(animate)
      addSp:runAction(repeatForever)
  elseif type=="E" then
      local time1 = 1.5
      local time2 = 0.75
      local colorA = 40
      local colorB = 170
      local fadeOut=CCTintTo:create(time1,colorA,colorA,colorA)
      local fadeIn=CCTintTo:create(time2,colorB,colorB,colorB)
      local seq=CCSequence:createWithTwoActions(fadeOut,fadeIn)
      local repeatForever=CCRepeatForever:create(seq)
      repeatForever:setTag(100)
      self.sprite:runAction(repeatForever)

      local fadeOut1=CCTintTo:create(time1,colorA,colorA,colorA)
      local fadeIn1=CCTintTo:create(time2,colorB,colorB,colorB)
      local seq1=CCSequence:createWithTwoActions(fadeOut1,fadeIn1)
      local repeatForever1=CCRepeatForever:create(seq1)
      repeatForever1:setTag(100)
      self.tankBarrelSP:runAction(repeatForever1)
   elseif type=="F" then
      local sp = self.container:getChildByTag(106)
      if sp and sp:getChildByTag(1) and sp:getChildByTag(2) then
         do return end
      end

      if sp and sp:getChildByTag(1) and sp:getChildByTag(2)==nil then
         local  downSp3 = CCSprite:createWithSpriteFrameName("t10054_skill.png")
         downSp3:setTag(2)
         downSp3:setAnchorPoint(ccp(0.5,0))
         downSp3:setPosition(ccp(sp:getContentSize().width/2,sp:getContentSize().height*2-10))
         sp:addChild(downSp3)
      end

      if sp and sp:getChildByTag(1)==nil then
         local  downSp2 = CCSprite:createWithSpriteFrameName("t10054_skill.png")
         downSp2:setTag(1)
         downSp2:setAnchorPoint(ccp(0.5,0))
         downSp2:setPosition(ccp(sp:getContentSize().width/2,sp:getContentSize().height-5))
         sp:addChild(downSp2)
      end
      
      if sp==nil then
         local  downSp = CCSprite:createWithSpriteFrameName("t10054_skill.png")
          downSp:setTag(106)
          if self.container:getChildByTag(101) then
             downSp:setPosition(ccp(getCenterPoint(self.container).x+80,getCenterPoint(self.container).y+30))
          end
          downSp:setPosition(ccp(getCenterPoint(self.container).x+40,getCenterPoint(self.container).y+30))
          self.container:addChild(downSp,10)
      end
   elseif type=="G" then
         local cha = 60
         local time = 0.5 * G_battleSpeed
         local eSp1 = self.container:getChildByTag(107)
         local eSp2 = self.container:getChildByTag(108)
         if eSp1 ==nil then
            eSp1 = CCSprite:createWithSpriteFrameName("t10064_effect.png")
            eSp1:setPosition(ccp(getCenterPoint(self.container).x+cha,getCenterPoint(self.container).y+cha))
            self.container:addChild(eSp1,10)
            eSp1:setTag(107)
         end
         if eSp2 ==nil then
            eSp2 = CCSprite:createWithSpriteFrameName("t10064_effect.png")
            eSp2:setPosition(ccp(getCenterPoint(self.container).x-cha,getCenterPoint(self.container).y-cha))
            self.container:addChild(eSp2,10)
            eSp2:setTag(108)
         end
         local moveTo1=CCMoveTo:create(time ,getCenterPoint(self.container))
         local moveTo2=CCMoveTo:create(time,getCenterPoint(self.container))
         if index then

            local containerX = getCenterPoint(self.container).x
            local containerY = getCenterPoint(self.container).y
            local skillPos = {ccp(containerX-153,containerY+48),ccp(containerX-75,containerY+31),ccp(containerX-23,containerY-21),ccp(containerX-55,containerY+131),ccp(containerX+70,containerY+148),ccp(containerX+88,containerY+60)}
            eSp1:setPosition(skillPos[index].x+cha,skillPos[index].y+cha)
            eSp2:setPosition(skillPos[index].x-cha,skillPos[index].y-cha)
            moveTo1=CCMoveTo:create(time,skillPos[index])
            moveTo2=CCMoveTo:create(time,skillPos[index])
         end
         
         local function callBack1()
            --eSp1:removeFromParentAndCleanup(true)
         end
         local callFunc1=CCCallFunc:create(callBack1)
         local acArr1=CCArray:create()
         local delay1=CCDelayTime:create(time)
         acArr1:addObject(moveTo1)
         acArr1:addObject(delay1)
         acArr1:addObject(callFunc1)
         local seq1=CCSequence:create(acArr1)
         local function callBack2()
            --eSp2:removeFromParentAndCleanup(true)
         end
         local callFunc2=CCCallFunc:create(callBack2)
         local acArr2=CCArray:create()
         local delay2=CCDelayTime:create(time)
         acArr2:addObject(moveTo2)
         acArr2:addObject(delay2)
         acArr2:addObject(callFunc2)
         
         local seq2=CCSequence:create(acArr2)

         eSp1:runAction(seq1)
         eSp2:runAction(seq2)
  elseif type=="K" then

      local addSp = CCSprite:createWithSpriteFrameName("t10114Anim_1.png")
      --addSp:setPosition(getCenterPoint(self.container))
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y+80))
      self.container:addChild(addSp,9)

      local pzArr=CCArray:create()
      for kk=1,16 do
          local nameStr="t10114Anim_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.03 * G_battleSpeed)
      local animate=CCAnimate:create(animation)
      local function callBack()
         addSp:removeFromParentAndCleanup(true)
      end
      local callFunc=CCCallFunc:create(callBack)
      local seq=CCSequence:createWithTwoActions(animate,callFunc)
      addSp:runAction(seq)

  elseif type=="L" then
     if self.container:getChildByTag(108) then
        do return end
     end

     local  addSp = CCSprite:createWithSpriteFrameName("t10124Anim.png")
     addSp:setScale(0.8)
     addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y+65))
     self.container:addChild(addSp,10)
     addSp:setTag(108)

  elseif type=="I" then
   if self.tankId >20152 and self.tankId <20156 then
      for i=1,6 do
         local animSp = CCSprite:createWithSpriteFrameName("inClip.png")
         if self.area ==1 then 
            animSp:setPosition(self.rtankMuzzlePos[self.tankId].x+(i-1)*5-30,self.rtankMuzzlePos[self.tankId].y+40)
         else
            animSp:setPosition(self.ltankMuzzlePos[self.tankId].x+(i-1)*5-10,self.ltankMuzzlePos[self.tankId].y)
         end
         self.container:addChild(animSp,10)
         animSp:setVisible(false)
         local function callBack1( )
            animSp:setVisible(true)
         end 
         local function callBack2( )
            animSp:removeFromParentAndCleanup(true)
         end
         local delaTimeFir = CCDelayTime:create(0.25*i * G_battleSpeed)
         local callFunc1 = CCCallFunc:create(callBack1)
         local delaTimeSec = CCDelayTime:create(0.25*(6-i+1) * G_battleSpeed)
         local callFunc2 = CCCallFunc:create(callBack2)
         local acArr = CCArray:create()
         acArr:addObject(delaTimeFir)
         acArr:addObject(callFunc1)
         acArr:addObject(delaTimeSec)
         acArr:addObject(callFunc2)
         local seq=CCSequence:create(acArr)
         animSp:runAction(seq)
      end
   else
      local animSp =CCSprite:createWithSpriteFrameName("atamaAmin.png")
      animSp:setOpacity(0)
      --animSp:setPosition(getCenterPoint(self.container))
      animSp:setPosition(self.container:getContentSize().width*0.5,self.container:getContentSize().height*0.5+20)
      if self.area==1 then
         animSp:setFlipX(true)
      end

      self.container:addChild(animSp)
      local fadeto1=CCFadeTo:create(0.7 * G_battleSpeed,255)
      local fadeto2=CCFadeTo:create(0.7 * G_battleSpeed,0)
      local function callBack()
         animSp:removeFromParentAndCleanup(true)
      end
      local callFunc = CCCallFuncN:create(callBack)
      local acArr=CCArray:create()
      acArr:addObject(fadeto1)
      acArr:addObject(fadeto2)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      animSp:runAction(seq)
   end
  elseif type=="N" then --被磁暴坦克攻击后触发的受击技能
     if self.container:getChildByTag(109) then
        do return end
     end
      local addSp = CCSprite:createWithSpriteFrameName("t10144Anim_1.png")
      addSp:setScale(1.2)
      addSp:setTag(109)
      --addSp:setPosition(getCenterPoint(self.container))
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y))
      self.container:addChild(addSp,9)
      local pzArr=CCArray:create()
      for kk=1,8 do
          local nameStr="t10144Anim_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.03)
      local animate=CCAnimate:create(animation)
      local repeatForever1=CCRepeatForever:create(animate)
      addSp:runAction(repeatForever1)   
  elseif type=="W" then --伤害导向  受到令己方部队减员超过x%的伤害时，减少y%的伤害
     if self.container:getChildByTag(110) then
        do
          return
        end
     end
      local addSp = CCSprite:createWithSpriteFrameName("subHurt_1.png")
      addSp:setScale(1.2)
      addSp:setTag(110)
      --addSp:setPosition(getCenterPoint(self.container))
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y))
      self.container:addChild(addSp,9)
      local pzArr=CCArray:create()
      for kk=1,10 do
          local nameStr="subHurt_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.03)
      local animate=CCAnimate:create(animation)
      local repeatForever1=CCRepeatForever:create(animate)
      local function callBack()
         addSp:removeFromParentAndCleanup(true)
      end
      local callFunc = CCCallFuncN:create(callBack)
      local acArr=CCArray:create()
      acArr:addObject(animate)
      acArr:addObject(animate)
      acArr:addObject(animate)
      acArr:addObject(animate)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      addSp:runAction(seq) 
  elseif type=="X" then--多层护盾    每次受到伤害增加x点防护值，持续到战斗结束，最多叠加y层
     self.fyBufPosWidth=0 --开启减防位置的偏移设置
     local  addSp=tolua.cast(self.container:getChildByTag(111),"CCSprite")
     local xlabel = nil
     if addSp then
         xlabel =  tolua.cast(addSp:getChildByTag(123),"CCLabelTTF")
     end
     -- if addSp and xlabel and tonumber(xlabel:getString())>5 then
     --    do
     --      return
     --    end
     -- end
      if addSp and xlabel then
            local needNum = tonumber(xlabel:getString())
            if needNum then
               xlabel:setString(tostring(needNum+1))
            end
      else
             addSp = CCSprite:createWithSpriteFrameName("mulShield.png")
            addSp:setScale(0.5)
            addSp:setTag(111)
            if self.area ==1 then
               addSp:setPosition(ccp(getCenterPoint(self.container).x-50,getCenterPoint(self.container).y-50))
            else
               addSp:setPosition(ccp(getCenterPoint(self.container).x+100,getCenterPoint(self.container).y))
            end 
            self.container:addChild(addSp,9)
            local mulNum = GetTTFLabel("1",25)
            mulNum:setPosition(ccp(getCenterPoint(addSp).x,getCenterPoint(addSp).y))
            mulNum:setTag(123)
            addSp:addChild(mulNum)
      end
      if self.fyBufPosWidth ~=nil then
         local  addSp2=tolua.cast(self.container:getChildByTag(114),"CCSprite")
         if addSp2 then
            local needPosWidth =addSp2:getContentSize().width*0.5+10
            if self.area ==1 then
               addSp2:setPosition(ccp(getCenterPoint(self.container).x-50+needPosWidth,getCenterPoint(self.container).y-50))
            else
               addSp2:setPosition(ccp(getCenterPoint(self.container).x+100+needPosWidth,getCenterPoint(self.container).y))
            end 
         end
      end
  elseif type=="Y" then--急速破解  攻击前，清除自身的负面效果，必然清除1个效果，x%清除2个效果 
     if self.container:getChildByTag(112) then
        do return end
     end
      local addSp = CCSprite:createWithSpriteFrameName("cleanslf_1.png")
      addSp:setScale(1.2)
      addSp:setTag(112)
      --addSp:setPosition(getCenterPoint(self.container))
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y))
      self.container:addChild(addSp,9)
      local pzArr=CCArray:create()
      for kk=1,11 do
          local nameStr="cleanslf_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.03 * G_battleSpeed)
      local animate=CCAnimate:create(animation)

      local function callBack()
         addSp:removeFromParentAndCleanup(true)
         local dizzSp = self.container:getChildByTag(120)
         if dizzSp and self.dizzT and self.dizzT == 1 then
            self.dizzT = 0
            dizzSp:removeFromParentAndCleanup(true)   
         end
      end
      local callFunc = CCCallFuncN:create(callBack)
      local acArr=CCArray:create()
      acArr:addObject(animate)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      addSp:runAction(seq)
  elseif type=="Z" then--重点打击 攻击时如未打出任何暴击,下次攻击增加40%暴击
     if self.container:getChildByTag(113) then
        do return end
     end
         local addSp = CCSprite:createWithSpriteFrameName("BlackAlphaBg.png")
         addSp:setVisible(false)
         addSp:setScale(0.6)
         addSp:setTag(113)
         if self.area ==1 then
            addSp:setPosition(ccp(self.rtankMuzzlePos[self.tankId].x,self.rtankMuzzlePos[self.tankId].y))
         else
            addSp:setPosition(ccp(self.ltankMuzzlePos[self.tankId].x,self.ltankMuzzlePos[self.tankId].y))
         end
         self.container:addChild(addSp,6)
         local function runRepeat( ... )
            local pzArr=CCArray:create()
            for kk=1,10 do
                local nameStr="chargeCr_"..kk..".png"
                local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
                pzArr:addObject(frame)
            end
            
            local animation=CCAnimation:createWithSpriteFrames(pzArr)
            animation:setDelayPerUnit(0.03)
            local animate=CCAnimate:create(animation)
            local repeatForever1=CCRepeatForever:create(animate)
            local adsp = self.container:getChildByTag(113)
            adsp:setVisible(true)
            adsp:runAction(repeatForever1)
         end 
         local callFunc=CCCallFuncN:create(runRepeat)
         local acArr=CCArray:create()
         local delaTime = CCDelayTime:create(3 * G_battleSpeed)
         acArr:addObject(delaTime)
         acArr:addObject(callFunc)
         local seq = CCSequence:create(acArr)
         addSp:runAction(seq)
  elseif type=="O" then--酸性炸弹    减少目标X%的装甲值，持续一定回合

     local  addSp=tolua.cast(self.container:getChildByTag(114),"CCSprite")
     local xlabel = nil
     local needPosWidth = 0
      if addSp then
            xlabel =  tolua.cast(addSp:getChildByTag(123),"CCLabelTTF")
         if tonumber(xlabel:getString())>3 then
           do
             return
           end
         else
            local needNum = tonumber(xlabel:getString())
            if needNum then
               xlabel:setString(tostring(needNum+1))
            end
         end
      else
            addSp = CCSprite:createWithSpriteFrameName("hjSkillPic.png")
            addSp:setScale(0.8)
            addSp:setTag(114)
            if self.fyBufPosWidth ~=nil then
               needPosWidth =addSp:getContentSize().width*0.5+10
            end
            if self.area ==1 then
               addSp:setPosition(ccp(getCenterPoint(self.container).x-50+needPosWidth,getCenterPoint(self.container).y-50))
            else
               addSp:setPosition(ccp(getCenterPoint(self.container).x+100+needPosWidth,getCenterPoint(self.container).y))
            end 
            self.container:addChild(addSp,9)
            local mulNum = GetTTFLabel("1",25)
            mulNum:setPosition(ccp(getCenterPoint(addSp).x,getCenterPoint(addSp).y))
            mulNum:setTag(123)
            addSp:addChild(mulNum)
      end
  elseif type=="AT" then
     local bigTankTb = {[10034]=10034,[10035]=10035,[10036]=10036,[10037]=10037,[10038]=10038,[50038]=10038,[50034]=10034,[50035]=10035,[50036]=10036,[50037]=10037,[10082]=10082,[10083]=10083,[10084]=10084,[10163]=10163,[10164]=10164,[10165]=10165,[50082]=10082,[50083]=10083,[50084]=10084,[50163]=10163,[50164]=10164,[50165]=10165,[20153]=20153,[20154]=20154,[20155]=20155,[60153]=20153,[60154]=20154,[60155]=20155}--判断是否为火箭车
     local particleS = tolua.cast(self.container:getChildByTag(115),"CCParticleSystemQuad")
     if particleS ~=nil then
        do return end
     end
     particleS = CCParticleSystemQuad:create("public/frBarrier.plist")
     particleS:setTag(115)
     particleS:setScale(1.5)
     particleS:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y))
     if bigTankTb[self.tankId]~=nil then
         particleS:setScale(1.7)
         if self.area==1 then
            particleS:setRotation(-15)
            particleS:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y+5))
         end
     end
     particleS:setPositionType(kCCPositionTypeGrouped)--防拖动
     self.container:addChild(particleS,11)
  elseif type=="BA" or type=="BB" then--清除坦克BUF（目前仅用于敌方）
      if self.container:getChildByTag(116) then
         do return end
      end
      local addSp = CCSprite:createWithSpriteFrameName("cleanBuff_1.png")
      addSp:setScale(1.7)
      addSp:setTag(116)
      --addSp:setPosition(getCenterPoint(self.container))
      addSp:setPosition(ccp(getCenterPoint(self.container).x-5,getCenterPoint(self.container).y+80))
      self.container:addChild(addSp,9)
      local pzArr=CCArray:create()
      for kk=1,7 do
          local nameStr="cleanBuff_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.16 * G_battleSpeed)
      local animate=CCAnimate:create(animation)

      local function callBack()
         addSp:removeFromParentAndCleanup(true)
         for k,v in pairs(abilityCfg_buff) do
               if self.bufAllTb[string.upper(v)] then--强制干掉自身buf层数，让清除变彻底
                     self.bufAllTb[string.upper(v)].num = 1
               end
             self:animationCtrlByType(v)
         end
      end
      local callFunc = CCCallFuncN:create(callBack)
      curDelayT = curDelayT or 2.2
      local delayT = CCDelayTime:create(curDelayT * G_battleSpeed)
      local acArr=CCArray:create()
      acArr:addObject(delayT)
      acArr:addObject(animate)
      -- acArr:addObject(animate)
      -- acArr:addObject(animate)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      addSp:runAction(seq)
  elseif type=="BC" or type=="BD" then--清除坦克DEBUF（目前仅用于自己）
      if self.container:getChildByTag(117) then
         do return end
      end
      local addSp = CCSprite:createWithSpriteFrameName("cleanDebuff_1.png")
      addSp:setScale(1.7)
      addSp:setTag(117)
      --addSp:setPosition(getCenterPoint(self.container))
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y+85))
      self.container:addChild(addSp,9)
      local pzArr=CCArray:create()
      for kk=1,7 do
          local nameStr="cleanDebuff_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.16 * G_battleSpeed)
      local animate=CCAnimate:create(animation)

      local function callBack()
         addSp:removeFromParentAndCleanup(true)
         local dizzSp = self.container:getChildByTag(120)
         if dizzSp and self.dizzT and self.dizzT == 1 then
            self.dizzT = 0
            dizzSp:removeFromParentAndCleanup(true)   
         end
         for k,v in pairs(abilityCfg_debuff) do
             if self.bufAllTb[string.upper(v)] then--强制干掉自身buf层数，让清除变彻底
                  self.bufAllTb[string.upper(v)].num = 1
             end
             self:animationCtrlByType(v)
         end
         
      end
      local callFunc = CCCallFuncN:create(callBack)
      curDelayT = curDelayT or 2.2
      local delayT = CCDelayTime:create(curDelayT * G_battleSpeed)
      local acArr=CCArray:create()
      acArr:addObject(delayT)
      acArr:addObject(animate)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      addSp:runAction(seq)
  elseif type=="BG" or type=="BH" or type=="BI" or type=="BJ" then--几个针对自身技能的效果为一种显示方案
      if self.container:getChildByTag(118) then
         do return end
      end
      local addSp = CCSprite:createWithSpriteFrameName("addHurt_1.png")
      addSp:setScale(1)
      addSp:setTag(118)
      --addSp:setPosition(getCenterPoint(self.container))
      addSp:setPosition(ccp(getCenterPoint(self.container).x-5,getCenterPoint(self.container).y+30))
      self.container:addChild(addSp,9)
      local pzArr=CCArray:create()
      for kk=1,7 do
          local nameStr="addHurt_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.12 * G_battleSpeed)
      local animate=CCAnimate:create(animation)

      local function callBack()
         addSp:removeFromParentAndCleanup(true)
      end
      local callFunc = CCCallFuncN:create(callBack)
      curDelayT = curDelayT or 2.2
      local delayT = CCDelayTime:create(curDelayT * G_battleSpeed)
      local acArr=CCArray:create()
      acArr:addObject(delayT)
      acArr:addObject(animate)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      addSp:runAction(seq)
  elseif type=="BE" then
      if self.container:getChildByTag(119) then
        do return end
      end
      local addSp = CCSprite:createWithSpriteFrameName("fireRing_1.png")
      -- local addSp2 = CCSprite:createWithSpriteFrameName("fireRing_1.png")
      -- self.container:addChild(addSp2,9)
      addSp:setScale(0.65)
      addSp:setTag(119)
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y+60))
      self.container:addChild(addSp,9)
      
      local function callBack()
         local pzArr=CCArray:create()
         for kk=2,12 do
             local nameStr="fireRing_"..kk..".png"
             local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
             pzArr:addObject(frame)
         end
         local animation=CCAnimation:createWithSpriteFrames(pzArr)
         animation:setDelayPerUnit(0.1)
         local animate=CCAnimate:create(animation)
         local repeatForever1=CCRepeatForever:create(animate)
         addSp:runAction(repeatForever1)  
      end
      local callFunc = CCCallFuncN:create(callBack)
      curDelayT = curDelayT or 2.2
      local delayT = CCDelayTime:create(curDelayT * G_battleSpeed)
      local acArr=CCArray:create()
      acArr:addObject(delayT)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      addSp:runAction(seq)    
  elseif type=="BF" then
      if self.container:getChildByTag(120) then
        do return end
      end
      local addSp = CCSprite:createWithSpriteFrameName("dizz_1.png")
      addSp:setScale(1)
      addSp:setTag(120)
      addSp:setPosition(ccp(getCenterPoint(self.container).x,getCenterPoint(self.container).y))
      self.container:addChild(addSp,9)      
      
      local function callBack()
         self.dizzT = 1
         local pzArr=CCArray:create()
         for kk=1,8 do
             local nameStr="dizz_"..kk..".png"
             local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
             pzArr:addObject(frame)
         end
         local animation=CCAnimation:createWithSpriteFrames(pzArr)
         animation:setDelayPerUnit(0.05)
         local animate=CCAnimate:create(animation)
         local repeatForever1=CCRepeatForever:create(animate)
         addSp:runAction(repeatForever1)  
      end
      local callFunc = CCCallFuncN:create(callBack)
      curDelayT = curDelayT or 2.2
      local delayT = CCDelayTime:create(curDelayT * G_battleSpeed)
      local acArr=CCArray:create()
      acArr:addObject(delayT)
      acArr:addObject(callFunc)
      local seq=CCSequence:create(acArr)
      addSp:runAction(seq)   
  else
      local tag=0
      local cleanTb = {a=101,b=102,c=103,f=106,l=108,n=109,w=110,x=111,y=112,z=113,o=114,at=115,be=119,bf=120}
      local hasTagNum = cleanTb[type] or nil
      if hasTagNum then
          if self.container:getChildByTag(hasTagNum) then
             self.container:getChildByTag(hasTagNum):removeFromParentAndCleanup(true)
          end
      else
         -- print("type====>>>>",type)
         -- if type=="a" then
         --     tag=101
         -- elseif type=="b" then
         --     tag=102
         -- elseif type=="c" then
         --     tag=103
         -- else
         if type=="d" or type=="ay" then
             tag=104
             if type=="ay" then
                self.isAY = false
             end
             if self.sameBuffNum and self.sameBuffNum[typeTag] then
                  if self.sameBuffNum[typeTag][string.upper(type)] then
                     self.sameBuffNum[typeTag][string.upper(type)]=nil
                  end
                  if SizeOfTable(self.sameBuffNum[typeTag])>0 then
                     do return end
                  end
             end
         elseif type=="e" then
            if self.sprite and self.tankBarrelSP then
                  self.sprite:stopActionByTag(100)
                  self.tankBarrelSP:stopActionByTag(100)
                  self.sprite:setColor(G_ColorWhite)
                  self.tankBarrelSP:setColor(G_ColorWhite)
            end
         -- elseif type=="f" then
         --    tag=106
         elseif type=="g" then
            if self.container:getChildByTag(107) then
               self.container:getChildByTag(107):removeFromParentAndCleanup(true)
            end
            if self.container:getChildByTag(108) then
               self.container:getChildByTag(108):removeFromParentAndCleanup(true)
            end
         -- elseif type=="l" then
         --     tag=108
         -- elseif type=="n" then
         --    if self.container:getChildByTag(109) then
         --       self.container:getChildByTag(109):removeFromParentAndCleanup(true)
         --    end
         -- elseif type=="w" then
         --    if self.container:getChildByTag(110) then
         --       self.container:getChildByTag(110):removeFromParentAndCleanup(true)
         --    end
         -- elseif type=="x" then
         --    if self.container:getChildByTag(111) then
         --       self.container:getChildByTag(111):removeFromParentAndCleanup(true)
         --    end
         -- elseif type=="y" then
         --    if self.container:getChildByTag(112) then
         --       self.container:getChildByTag(112):removeFromParentAndCleanup(true)
         --    end
         -- elseif type=="z" then
         --    if self.container:getChildByTag(113) then
         --       self.container:getChildByTag(113):removeFromParentAndCleanup(true)
         --    end
         -- elseif type=="o" then
         --    if self.container:getChildByTag(114) then
         --       self.container:getChildByTag(114):removeFromParentAndCleanup(true)
         --    end
         -- elseif type=="at" then
         --    if self.container:getChildByTag(115) then
         --       self.container:getChildByTag(115):removeFromParentAndCleanup(true)
         --    end
         -- elseif type=="be" then
         --    if self.container:getChildByTag(119) then
         --       self.container:getChildByTag(119):removeFromParentAndCleanup(true)   
         --    end
         -- elseif type=="bf" then
         --    if self.container:getChildByTag(120) then
         --       self.container:getChildByTag(120):removeFromParentAndCleanup(true)   
         --    end
         end

         if self.container:getChildByTag(tag) then
             self.container:getChildByTag(tag):removeFromParentAndCleanup(true)
         end
      end
  end


end

function acEatChickenTank:showPlaneAttEff(showNum,whiNum)--被飞机攻击效果
   local posSet = whiNum == 1 and {10,20,30,40,50} or { -10,-20,-30,-40,-50}
   local stPos = whiNum ==1 and ccp(-10,20) or ccp(50,60)
   for ii=1,showNum do
      local beAttcEff="planeShells_"..whiNum.."_1.png" --开火动画
      local m_beAttcEff=CCSprite:createWithSpriteFrameName(beAttcEff)
      self.container:addChild(m_beAttcEff,20) --开火动画   
      m_beAttcEff:setVisible(false)
      local beFireArr=CCArray:create()
      for i=1,14 do
         local nameStr = "planeShells_"..whiNum.."_"..i..".png"
         local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
         beFireArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(beFireArr)
      animation:setDelayPerUnit(0.05 * G_battleSpeed)

      local animate=CCAnimate:create(animation)
      m_beAttcEff:setPosition(ccp(stPos.x+posSet[ii],stPos.y+posSet[ii]))
      

      local function removeFireSp()
          m_beAttcEff:removeFromParentAndCleanup(true)
          m_beAttcEff=nil
      end
      local  ffunc=CCCallFuncN:create(removeFireSp)
      local acArr=CCArray:create()
      local delayT = CCDelayTime:create(0.7+0.1*ii)
      acArr:addObject(delayT)
      acArr:addObject(animate)
      acArr:addObject(ffunc)
      local seq=CCSequence:create(acArr)
      m_beAttcEff:setVisible(true)
      m_beAttcEff:runAction(seq)
   end
end

function acEatChickenTank:showBeAttInCityGun(tankDie)
      if self and self.container then         
         local burstSp=CCSprite:createWithSpriteFrameName("burstEffect0.png")
         self.container:addChild(burstSp,21)
         local burstArr=CCArray:create()
         for kk=13,23 do
            local nameStr="burstEffect"..kk..".png"
            local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
            burstArr:addObject(frame)
         end
         local animation=CCAnimation:createWithSpriteFrames(burstArr)
         animation:setDelayPerUnit(0.07)
         local animate=CCAnimate:create(animation)
         
         local function moveEndHandler( ... )
            if tankDie then
               tankDie()
            end
            if burstSp then
               burstSp:stopAllActions()
               burstSp:removeFromParentAndCleanup(true)
               burstSp=nil
            end
            
         end
         local funcHandler=CCCallFunc:create(moveEndHandler)
         local seq=CCSequence:createWithTwoActions(animate,funcHandler)
         burstSp:runAction(seq)
      end
end

function acEatChickenTank:fireSelfByEmblem(deT)
      local addSp2 = CCSprite:createWithSpriteFrameName("sFlame_1.png")
      addSp2:setScale(2.1)
      addSp2:setPosition(ccp(self.container:getContentSize().width*0.5+13,self.container:getContentSize().height*0.5+20))
      self.container:addChild(addSp2,9)
      addSp2:setVisible(false)

      local pzArr=CCArray:create()
      for kk=1,3 do
          local nameStr="sFlame_"..kk..".png"
          local frame = CCSpriteFrameCache:sharedSpriteFrameCache():spriteFrameByName(nameStr)
          pzArr:addObject(frame)
      end
      local animation=CCAnimation:createWithSpriteFrames(pzArr)
      animation:setDelayPerUnit(0.1)
      local animate=CCAnimate:create(animation)
      local repeatSp =CCRepeat:create(animate, 2);
      local function visableCall( )
         addSp2:setVisible(true)
      end 
      local function animationCall( )
            addSp2:removeFromParentAndCleanup(true)
      end 
      local delayT = CCDelayTime:create(deT)
      local ccfun1 = CCCallFunc:create(visableCall)
      local ccfun = CCCallFunc:create(animationCall)
      local arr = CCArray:create()
      arr:addObject(delayT)
      arr:addObject(ccfun1)
      arr:addObject(repeatSp)
      arr:addObject(ccfun)
      local seq = CCSequence:create(arr)
      addSp2:runAction(seq)
end

function acEatChickenTank:dispose()
   self.container=nil
   self.sprite=nil --坦克图片
   self.shellSp=nil --子弹
   self.tankBarrelSP=nil --坦克炮管
   self.tankPedrellSp=nil --坦克履带
   self.ltankDustSp=nil --坦克履带烟雾（左）
   self.rtankDustSp=nil --坦克履带烟雾（右）
   self.lightSp=nil --开火闪光
   self.tid=nil
   self.pos=nil
   self.area=nil
   self.tankBarrelFrameCount=nil --每种坦克炮管帧动画数 20种坦克
   self.tankPedrellFrameCount=nil --每种坦克履带帧动画数 20种坦克
   self.tankDustFrameCount=nil --每种坦克履带烟雾帧动画数 20种坦克
   self.tankFireFrameCount=nil --每种坦克履开火帧动画数 20种坦克
   self.leftDownPos=nil
   self.rightTopPos=nil
   self.leftDownShellStartPos=nil
   
   self.leftDownShellEndPos=nil --左方每个坦克的子弹终点值,6个
   self.rightTopShellStartPos=nil --每个坦克子弹相对坦克本身的坐标偏移
   
   self.rightTopShellEndPos=nil --右方每个坦克的子弹终点值,6个
   self.r_rtankDustPos=nil --右边坦克右侧履带烟雾位置
   self.r_ltankDustPos=nil --右边坦克左侧履带烟雾位置
   self.l_rtankDustPos=nil --左边坦克右侧履带烟雾位置
   self.l_ltankDustPos=nil --左边坦克左侧履带烟雾位置    
   self.tankPosition=nil
   self.randMoveDirect=nil
   self.randMove=nil
   self.tickIndex=nil
   self.randPosition=nil
   self.tankFireSp=nil
   self.rtankFirePos=nil
   self.ltankFirePos=nil
   self.rtankMuzzlePos=nil
   self.ltankMuzzlePos=nil
   self.needShock=nil
   self.shockIndex=nil
   self.inBattle=nil
   self.tankBulletCfg=nil
   self.fyBufPosWidth=nil
   self.bufPicDataTb=nil--显示坦克buf debuf 图片的 数据信息（存放sp,buf的key,排列位置）
   self.bufAllTb=nil--保存当前坦克所拥有的所有buf,debuf的key
   self.bufShowMask=nil--显示buf图片的容器
   self.moreBufShow =nil
   self.isWillDie =nil
   if self.bufSmallDialog then
      self.bufSmallDialog:close()
   end
   self.bufSmallDialog =nil
   self.sameBuffNum=nil

   self.beSkillCD={}

   self=nil
end