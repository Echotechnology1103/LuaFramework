---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2018/10/10 10:53
---
IndividualPanel = IndividualPanel or class("IndividualPanel", BaseItem)
local this = IndividualPanel

IndividualPanel.togIndex = 1;

IndividualPanel.MAX_BUY_TIMES = 2;

function IndividualPanel:ctor(parent_node, layer, defaultTogIndex)
    self.abName = "dungeon"
    self.image_ab = "dungeon_image";
    self.assetName = "IndividualPanel"
    self.layer = "UI"
    self.panel_type = 2;
    self.events = {};
    self.togIndex = defaultTogIndex or 1;
    IndividualPanel.super.Load(self);
end

function IndividualPanel:dctor()
    self.togIndex = 1;
    GlobalEvent:RemoveTabListener(self.events);
    if self.view then
        self.view:destroy();
    end
end

function IndividualPanel:Open(tabIndex)
    --WindowPanel.Open(self)
    --self.default_table_index = tabIndex;
end

function IndividualPanel:LoadCallBack()
    self.nodes = {
    }
    self:GetChildren(self.nodes);

    SetLocalPosition(self.transform, 0, 0, 0);

    self:InitUI();
    self:AddEvent();
end

function IndividualPanel:InitUI()
    if self.togIndex == 1 then
        self.view = ExpEntrancePanel(self.transform, "UI");
    elseif self.togIndex == 2 then
        self.view = GoldEntrancePanel(self.transform, "UI");
    end
end

function IndividualPanel:AddEvent()
end

function IndividualPanel:HandleTogChange(target, bool)
    if self.view then
        self.view:destroy();
    end
    if bool then
        self.togIndex = 1;
        self.view = ExpEntrancePanel(self.transform, "UI");
    else
        self.togIndex = 2;
        self.view = GoldEntrancePanel(self.transform, "UI");
    end
end

function IndividualPanel:UpdateData(id, data)
    if self.view then
        if id == 11004 and self.togIndex == 1 then
            self.view:UpdateData(data);
        elseif id == 11008 and self.togIndex == 2 then
            self.view:UpdateData(data);
        end
    end
end

function IndividualPanel:UpdateInfo(id, data)
    if self.view then
        if id == 11004 and self.togIndex == 1 then
            self.view:UpdateInfo(data);
        elseif id == 11008 and self.togIndex == 2 then
            self.view:UpdateInfo(data);
        end
    end
end