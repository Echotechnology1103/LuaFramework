---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by win 10.
--- DateTime: 2018/10/11 14:40
---
AdvanceItem = AdvanceItem or class("AdvanceItem", Node)
local this = AdvanceItem

AdvanceItem.robotSetValue = false;

function AdvanceItem:ctor(obj, tab)
    self.transform = obj.transform
    self.gameObject = self.transform.gameObject;
    self.data = tab;
    self.image_ab = "dungeon_image";
    self.transform_find = self.transform.Find;
    self.events = {};
    self:Init();
    self:AddEvents();
end

function AdvanceItem:dctor()
    GlobalEvent:RemoveTabListener(self.events);
    if self.schedule then
        GlobalSchedule:Stop(self.schedule);
    end

    if self.reddot then
        self.reddot:destroy()
    end
    self.reddot = nil;
end

function AdvanceItem:Init()
    self.is_loaded = true;
    self.nodes = {
        "selected", "head", "jie", "bg", "stars/star_1", "stars/star_2", "stars/star_3",
    }
    self:GetChildren(self.nodes);

    self:InitUI();
    self:AddEvents();
end

function AdvanceItem:InitUI()
    self.selected = GetImage(self.selected);
    self.stars = {};
    for i = 1, 3 do
        local starName = "star_" .. i;
        self.stars[i] = GetToggle(self[starName]);
        self.stars[i].isOn = false;
    end

    self.reddot = RedDot(self.transform, nil, RedDot.RedDotType.Nor)
    self.reddot:SetPosition(68, 22)

end

function AdvanceItem:AddEvents()

end

--设置是否选中当前物体
function AdvanceItem:SetSelected(bool)
    bool = bool and true or false;
    self.selected.gameObject:SetActive(bool);
end
function AdvanceItem:SetStar(num)
    for i = 1, 3 do
        self.stars[i].isOn = false;
    end
    for i = 1, num do
        self.stars[i].isOn = true;
    end

    if num == 0 then
        self.reddot:SetRedDotParam(true);
    else
        self.reddot:SetRedDotParam(false);
    end
end
