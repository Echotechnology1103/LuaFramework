local testFactoryObj = class("testFactoryObj")
function testFactoryObj:ctor()
  MessageEventExtend.extend(self)
  self:ListenMessage(MsgID_Factory)
end
function testFactoryObj:OnMessage(msgSID, ...)
  print("[TestFactory]", "---->>>MyApp:OnMessage:", self:GetFIDWithSID(msgSID), msgSID, ...)
  local arg = {
    ...
  }
  if msgSID == MsgID_Factory_NewObje then
    local obj = arg[1]
    print("创建了对象:", obj)
    if obj then
      print("obj.id=", obj:getObjId())
      print("obj.lType=", obj:getType())
      print("obj.Pos=", obj:getWarPos())
      print("obj.TypeId=", obj:getTypeId())
      print("obj.Name=", obj:getProperty(PROPERTY_NAME))
      print("obj.AP=", obj:getProperty(PROPERTY_AP))
      print("obj.SP=", obj:getProperty(PROPERTY_SP))
      print("obj.HP=", obj:getProperty(PROPERTY_HP))
      print("obj.MP=", obj:getProperty(PROPERTY_MP))
      print("obj.MaxHP=", obj:getMaxProperty(PROPERTY_HP))
      print("obj.MaxMP=", obj:getMaxProperty(PROPERTY_MP))
      if obj:getType() == LOGICTYPE_HERO then
        print("obj.RACE=", obj:getProperty(PROPERTY_RACE))
        print("obj.GENDER=", obj:getProperty(PROPERTY_GENDER))
      end
      print("====> 抗性")
      for i, v in ipairs(PROPERTY_LEVEL_KANG) do
        print("-->", v, obj:getProperty(v))
      end
      print("抗 混乱:", obj:getKangPro(SKILLATTR_CONFUSE))
      print("抗 封印:", obj:getKangPro(SKILLATTR_ICE))
      print("抗 昏睡:", obj:getKangPro(SKILLATTR_SLEEP))
      print("抗 中毒:", obj:getKangPro(SKILLATTR_POISON))
      print("反 抗 混乱:", obj:getFkangPro(SKILLATTR_CONFUSE))
      print("反 抗 封印:", obj:getFkangPro(SKILLATTR_ICE))
      print("反 抗 昏睡:", obj:getFkangPro(SKILLATTR_SLEEP))
      print("反 抗 中毒:", obj:getFkangPro(SKILLATTR_POISON))
      print("------------------------")
      obj:setKangPro(SKILLATTR_CONFUSE, 1000)
      print("1抗 混乱:", obj:getKangPro(SKILLATTR_CONFUSE))
      obj:setKangPro(SKILLATTR_CONFUSE)
      print("2抗 混乱:", obj:getKangPro(SKILLATTR_CONFUSE))
      print("3抗 混乱:", obj:getOrgKangPro(SKILLATTR_CONFUSE))
      print("=================")
      print("========== temp")
      print("1temp:", obj:getTempProperty(PROPERTY_KHUNLUAN))
      obj:setTempProperty(PROPERTY_KHUNLUAN, 990099)
      print("2temp:", obj:getTempProperty(PROPERTY_KHUNLUAN))
      print("4抗 混乱:", obj:getTempKangPro(SKILLATTR_CONFUSE))
      obj:setTempKangPro(SKILLATTR_CONFUSE, "asdfpiou")
      print("5抗 混乱:", obj:getTempKangPro(SKILLATTR_CONFUSE))
      print("========================")
      print("SP:", obj:getProperty(PROPERTY_SP))
      print("TempSP:", obj:getTempProperty(PROPERTY_SP))
      obj:setTempProperty(PROPERTY_SP, 1000)
      print("1SP:", obj:getProperty(PROPERTY_SP))
      print("2TempSP:", obj:getTempProperty(PROPERTY_SP))
      print("=================")
      local skills_ = obj:getSkills()
      print("=====>> 技能:", tostring(skills_))
      for i, v in pairs(skills_) do
        print("------->>", i, v, obj:getProficiency(v))
      end
      print("=================")
      print("\n")
    end
  end
end
local testHero = function()
  local warObj = CWarAI.new()
  local hero1 = warObj:newObject(getInsId(LOGICTYPE_HERO), 11001, 1)
  print("---------------测试MAX-------------")
  print("max HP:", hero1:getMaxProperty(PROPERTY_HP))
  print("max MP:", hero1:getMaxProperty(PROPERTY_MP))
  hero1:setMaxProperty(PROPERTY_HP, hero1:getMaxProperty(PROPERTY_HP) * 2)
  hero1:setMaxProperty(PROPERTY_MP, hero1:getMaxProperty(PROPERTY_MP) * 2)
  print("max HP:", hero1:getMaxProperty(PROPERTY_HP))
  print("max MP:", hero1:getMaxProperty(PROPERTY_MP))
  print("---------------------------------------")
end
local testPet = function()
  CWarAI.new()
  local pet = g_WarAiIns:newObject(getInsId(LOGICTYPE_PET), 20001, 6)
  pet:setProperty(PROPERTY_HP, 88998899)
  pet:setSP(5566)
  pet:setProperty(PROPERTY_NAME, "德玛西亚")
  pet:setProficiency(1001, 500)
  pet:setProficiency(1002, 10005)
  print("---------------测试team-------------")
  print("1TEAM:", pet:getProperty(PROPERTY_TEAM))
  pet:setProperty(PROPERTY_TEAM, 1)
  print("2TEAM:", pet:getProperty(PROPERTY_TEAM))
  print("---------------测试MAX-------------")
  print("max HP:", pet:getMaxProperty(PROPERTY_HP))
  print("max MP:", pet:getMaxProperty(PROPERTY_MP))
  pet:setMaxProperty(PROPERTY_HP, pet:getMaxProperty(PROPERTY_HP) * 2)
  pet:setMaxProperty(PROPERTY_MP, pet:getMaxProperty(PROPERTY_MP) * 2)
  print("max HP:", pet:getMaxProperty(PROPERTY_HP))
  print("max MP:", pet:getMaxProperty(PROPERTY_MP))
  print("---------------------------------------")
  local pet1 = g_WarAiIns:newObject(pet:getObjId(), pet:getTypeId(), pet:getWarPos(), pet:getProSerialization())
end
function testFactory(nodeObj)
  local testObj = testFactoryObj.new()
  testPet()
end
