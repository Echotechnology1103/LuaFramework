MapEffectData = {
  ["11"] = {
    typ = 1,
    data = {
      {0, 255},
      {5, 180},
      {10, 255},
      {15, 180},
      {20, 255}
    },
    framePerSec = 8
  },
  ["12"] = {
    typ = 1,
    data = {
      {0, 255},
      {5, 180},
      {10, 255},
      {15, 180},
      {20, 255}
    },
    framePerSec = 8
  },
  ["13"] = {
    typ = 1,
    data = {
      {0, 255},
      {5, 180},
      {10, 255},
      {15, 180},
      {20, 255}
    },
    framePerSec = 8
  },
  ["14"] = {
    typ = 1,
    data = {
      {0, 255},
      {5, 180},
      {10, 255},
      {15, 180},
      {20, 255}
    },
    framePerSec = 8
  },
  ["21"] = {
    typ = 1,
    data = {
      {0, 180},
      {3, 140},
      {6, 180},
      {10, 130},
      {13, 180},
      {17, 130},
      {20, 180}
    },
    framePerSec = 8
  },
  ["22"] = {
    typ = 1,
    data = {
      {0, 130},
      {3, 100},
      {6, 130},
      {10, 100},
      {13, 130},
      {17, 100},
      {20, 130}
    },
    framePerSec = 8
  },
  ["23"] = {
    typ = 1,
    data = {
      {0, 100},
      {3, 130},
      {6, 100},
      {10, 130},
      {13, 100},
      {17, 130},
      {20, 100}
    },
    framePerSec = 8
  },
  ["24"] = {
    typ = 1,
    data = {
      {0, 100},
      {3, 130},
      {6, 100},
      {10, 130},
      {13, 100},
      {17, 130},
      {20, 100}
    },
    framePerSec = 8
  },
  ["81"] = {
    typ = 2,
    data = {
      {
        0,
        254,
        255,
        106,
        200
      },
      {
        3,
        254,
        255,
        106,
        255
      },
      {
        6,
        254,
        255,
        106,
        255
      },
      {
        9,
        255,
        255,
        25,
        200
      }
    },
    framePerSec = 8
  },
  ["82"] = {
    typ = 2,
    data = {
      {
        0,
        254,
        255,
        106,
        200
      },
      {
        2,
        254,
        255,
        106,
        255
      },
      {
        5,
        254,
        255,
        106,
        255
      },
      {
        8,
        255,
        255,
        25,
        200
      }
    },
    framePerSec = 8
  },
  ["1081"] = {
    typ = 3,
    data = {
      {
        0,
        100,
        0.3,
        0.3
      },
      {
        6,
        255,
        0.5,
        0.5
      },
      {
        8,
        150,
        0.4,
        0.4
      }
    },
    framePerSec = 8
  },
  ["1082"] = {
    typ = 3,
    data = {
      {
        0,
        150,
        0.3,
        0.3
      },
      {
        2,
        255,
        0.4,
        0.4
      },
      {
        4,
        150,
        0.3,
        0.3
      },
      {
        7,
        255,
        0.5,
        0.5
      },
      {
        9,
        150,
        0.4,
        0.4
      }
    },
    framePerSec = 8
  },
  ["1083"] = {
    typ = 4,
    data = {
      {
        0,
        80,
        0.4,
        0.4,
        -360
      },
      {
        2,
        255,
        0.45,
        0.4,
        -300
      },
      {
        4,
        255,
        0.25,
        0.2,
        -270
      },
      {
        7,
        0,
        0,
        0.1,
        -200
      }
    },
    framePerSec = 8
  },
  ["1084"] = {
    typ = 3,
    data = {
      {
        0,
        120,
        0.5,
        0.5
      },
      {
        3,
        200,
        0.25,
        0.25
      },
      {
        6,
        100,
        0,
        0
      }
    },
    framePerSec = 8
  },
  ["1085"] = {
    typ = 3,
    data = {
      {
        0,
        120,
        0.4,
        0.4
      },
      {
        3,
        150,
        0.2,
        0.2
      },
      {
        6,
        150,
        0.2,
        0.2
      },
      {
        9,
        150,
        0.35,
        0.35
      }
    },
    framePerSec = 8
  },
  ["1086"] = {
    typ = 3,
    data = {
      {
        0,
        120,
        0.35,
        0.35
      },
      {
        3,
        150,
        0.2,
        0.2
      },
      {
        6,
        150,
        0.2,
        0.2
      },
      {
        9,
        150,
        0.3,
        0.3
      }
    },
    framePerSec = 8
  },
  ["1087"] = {
    typ = 3,
    data = {
      {
        0,
        120,
        0.35,
        0.35
      },
      {
        3,
        150,
        0.2,
        0.2
      },
      {
        6,
        150,
        0.2,
        0.2
      },
      {
        9,
        150,
        0.3,
        0.3
      }
    },
    framePerSec = 8
  },
  ["1088"] = {
    typ = 3,
    data = {
      {
        0,
        100,
        0.1,
        0.1
      },
      {
        2,
        255,
        0.6,
        0.5
      },
      {
        4,
        255,
        0.4,
        0.4
      },
      {
        6,
        100,
        0.2,
        0.2
      }
    },
    framePerSec = 8
  },
  ["1089"] = {
    typ = 3,
    data = {
      {
        4,
        50,
        0.25,
        0.25
      },
      {
        8,
        255,
        0.6,
        0.5
      },
      {
        10,
        0,
        0.6,
        0.5
      }
    },
    framePerSec = 8
  },
  ["1090"] = {
    typ = 3,
    data = {
      {
        0,
        50,
        0.1,
        0.1
      },
      {
        2,
        180,
        0.6,
        0.5
      },
      {
        4,
        180,
        0.4,
        0.4
      },
      {
        6,
        50,
        0.2,
        0.2
      }
    },
    framePerSec = 8
  }
}
function CreateMapEffectCommon(node, typ)
  local effect = MapEffectData[tostring(typ)]
  if effect then
    local eType = effect.typ
    if eType == 1 then
      local acTimePerFrame = 1 / effect.framePerSec
      local actions = {}
      local ldt = 0
      for i, d in ipairs(effect.data) do
        if d[1] == 0 then
          node:setOpacity(d[2])
        end
        actions[#actions + 1] = CCFadeTo:create((d[1] - ldt) * acTimePerFrame, d[2])
        ldt = d[1]
      end
      if #actions > 0 then
        node:runAction(CCRepeatForever:create(transition.sequence(actions)))
      end
    elseif eType == 2 then
      local acTimePerFrame = 1 / effect.framePerSec
      local actions = {}
      local ldt = 0
      for i, d in ipairs(effect.data) do
        local f, r, g, b, a = unpack(d, 1, 5)
        if f == 0 then
          node:setOpacity(a)
          node:setColor(ccc3(r, g, b))
        end
        local t = (f - ldt) * acTimePerFrame
        local actOpacity = CCFadeTo:create(t, a)
        local actColor = CCTintTo:create(t, r, g, b)
        actions[#actions + 1] = CCSpawn:createWithTwoActions(actOpacity, actColor)
        ldt = f
      end
      if #actions > 0 then
        node:runAction(CCRepeatForever:create(transition.sequence(actions)))
      end
    elseif eType == 3 then
      local acTimePerFrame = 1 / effect.framePerSec
      local actions = {}
      local ldt = 0
      for i, d in ipairs(effect.data) do
        local f, a, sx, sy = unpack(d, 1, 4)
        if f == 0 then
          node:setOpacity(a)
          node:setScaleX(sx)
          node:setScaleY(sy)
        end
        local t = (f - ldt) * acTimePerFrame
        local actOpacity = CCFadeTo:create(t, a)
        local actScale = CCScaleTo:create(t, sx, sy)
        actions[#actions + 1] = CCSpawn:createWithTwoActions(actOpacity, actScale)
        ldt = f
      end
      if #actions > 0 then
        node:runAction(CCRepeatForever:create(transition.sequence(actions)))
      end
    elseif eType == 4 then
      local acTimePerFrame = 1 / effect.framePerSec
      local actions = {}
      local ldt = 0
      for i, d in ipairs(effect.data) do
        local f, a, sx, sy, rotate = unpack(d, 1, 5)
        if f == 0 then
          node:setOpacity(a)
          node:setScaleX(sx)
          node:setScaleY(sy)
          node:setRotation(rotate)
        end
        local t = (f - ldt) * acTimePerFrame
        local actOpacity = CCFadeTo:create(t, a)
        local actScale = CCScaleTo:create(t, sx, sy)
        local roScale = CCRotateTo:create(t, rotate)
        actions[#actions + 1] = CCSpawn:createWithTwoActions(CCSpawn:createWithTwoActions(actOpacity, actScale), roScale)
        ldt = f
      end
      if #actions > 0 then
        node:runAction(CCRepeatForever:create(transition.sequence(actions)))
      end
    end
  end
end
