-------------------------------------------------------
module(..., package.seeall)

local require = require;

local ui = require("ui/base");
-------------------------------------------------------五绝战绩
wnd_fiveUnique_exploits = i3k_class("wnd_fiveUnique_exploits", ui.wnd_base)


function wnd_fiveUnique_exploits:ctor()
	
end
function wnd_fiveUnique_exploits:configure()
	self._layout.vars.close:onClick(self, self.onCloseUI)
end
function wnd_fiveUnique_exploits:refresh(info,id)
	self._id  = id
	
	self:updateFiveUniqueInfo(info)
end


function wnd_fiveUnique_exploits:updateFiveUniqueInfo(info)
	
	self._layout.vars.scroll:removeAllChildren()
	
	local climbingTowerActivity = i3k_db_climbing_tower
	
	for i, v in ipairs(climbingTowerActivity) do
		if info[i] then
			self:appendFiveUniqueItem(info[i],v.iconId )
		end
		
	end
	
end

function wnd_fiveUnique_exploits:appendFiveUniqueItem(info,iconId)
	
	local exploitsWidgets = require("ui/widgets/wjzjt")()---btn sharder
	
	self:updateFiveUniqueItem(exploitsWidgets,info,iconId )
	self._layout.vars.scroll:addItem(exploitsWidgets)
	
end

function wnd_fiveUnique_exploits:updateFiveUniqueItem(item,info,iconId )
	
	--对五绝个人,帮派,全服记录进行设置显示 item_bg  item_icon
	local hero = i3k_game_get_player_hero()
	
	local server = info.serverData 
	local faction = info.sectData
	item.vars.self:setText(info.ownData)
	local  hero_name = info.ownData > 0 and hero._name or "暂无"
	local faction_name = faction.floor > 0 and faction.name or "暂无"
	local server_name = server.floor >0 and server.name or "暂无"
	item.vars.self_name:setText(hero_name)--"个人记录"
	item.vars.faction:setText(faction.floor)
	item.vars.faction_name:setText(faction_name)--"本帮派记录"..
	item.vars.server:setText(server.floor)
	item.vars.server_name:setText(server_name)---"本服记录\n"..
	--item.vars.item_bg:setImage(g_i3k_db.i3k_db_get_common_item_rank_frame_icon_path(iconId) )
	item.vars.item_icon:setImage(g_i3k_db.i3k_db_get_head_icon_path(iconId, false))---true为方框 否则为圆框
	
end


function wnd_create(layout)
	local wnd = wnd_fiveUnique_exploits.new();
	wnd:create(layout);
	return wnd;
end


